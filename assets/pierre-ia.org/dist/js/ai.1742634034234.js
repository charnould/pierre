/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */var{entries:eQ,setPrototypeOf:iQ,isFrozen:d0,getPrototypeOf:i0,getOwnPropertyDescriptor:l0}=Object,{freeze:g,seal:_,create:J0}=Object,{apply:XQ,construct:YQ}=typeof Reflect!=="undefined"&&Reflect;if(!g)g=function J(Q){return Q};if(!_)_=function J(Q){return Q};if(!XQ)XQ=function J(Q,q,Z){return Q.apply(q,Z)};if(!YQ)YQ=function J(Q,q){return new Q(...q)};var AJ=N(Array.prototype.forEach),c0=N(Array.prototype.lastIndexOf),lQ=N(Array.prototype.pop),GJ=N(Array.prototype.push),s0=N(Array.prototype.splice),NJ=N(String.prototype.toLowerCase),qQ=N(String.prototype.toString),cQ=N(String.prototype.match),UJ=N(String.prototype.replace),a0=N(String.prototype.indexOf),o0=N(String.prototype.trim),p=N(Object.prototype.hasOwnProperty),A=N(RegExp.prototype.test),wJ=n0(TypeError);function N(J){return function(Q){for(var q=arguments.length,Z=new Array(q>1?q-1:0),$=1;$<q;$++)Z[$-1]=arguments[$];return XQ(J,Q,Z)}}function n0(J){return function(){for(var Q=arguments.length,q=new Array(Q),Z=0;Z<Q;Z++)q[Z]=arguments[Z];return YQ(J,q)}}function w(J,Q){let q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NJ;if(iQ)iQ(J,null);let Z=Q.length;while(Z--){let $=Q[Z];if(typeof $==="string"){let K=q($);if(K!==$){if(!d0(Q))Q[Z]=K;$=K}}J[$]=!0}return J}function r0(J){for(let Q=0;Q<J.length;Q++)if(!p(J,Q))J[Q]=null;return J}function e(J){let Q=J0(null);for(let[q,Z]of eQ(J))if(p(J,q))if(Array.isArray(Z))Q[q]=r0(Z);else if(Z&&typeof Z==="object"&&Z.constructor===Object)Q[q]=e(Z);else Q[q]=Z;return Q}function HJ(J,Q){while(J!==null){let Z=l0(J,Q);if(Z){if(Z.get)return N(Z.get);if(typeof Z.value==="function")return N(Z.value)}J=i0(J)}function q(){return null}return q}var sQ=g(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ZQ=g(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),KQ=g(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),t0=g(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),$Q=g(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),e0=g(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),aQ=g(["#text"]),oQ=g(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),VQ=g(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),nQ=g(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),gJ=g(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),J1=_(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Q1=_(/<%[\w\W]*|[\w\W]*%>/gm),q1=_(/\$\{[\w\W]*/gm),Z1=_(/^data-[\-\w.\u00B7-\uFFFF]+$/),K1=_(/^aria-[\-\w]+$/),Q0=_(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),$1=_(/^(?:\w+script|data):/i),V1=_(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),q0=_(/^html$/i),X1=_(/^[a-z][.\w]*(-[.\w]+)+$/i),rQ=Object.freeze({__proto__:null,ARIA_ATTR:K1,ATTR_WHITESPACE:V1,CUSTOM_ELEMENT:X1,DATA_ATTR:Z1,DOCTYPE_NAME:q0,ERB_EXPR:Q1,IS_ALLOWED_URI:Q0,IS_SCRIPT_OR_DATA:$1,MUSTACHE_EXPR:J1,TMPLIT_EXPR:q1}),FJ={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},Y1=function J(){return typeof window==="undefined"?null:window},j1=function J(Q,q){if(typeof Q!=="object"||typeof Q.createPolicy!=="function")return null;let Z=null,$="data-tt-policy-suffix";if(q&&q.hasAttribute($))Z=q.getAttribute($);let K="dompurify"+(Z?"#"+Z:"");try{return Q.createPolicy(K,{createHTML(X){return X},createScriptURL(X){return X}})}catch(X){return console.warn("TrustedTypes policy "+K+" could not be created."),null}},tQ=function J(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Z0(){let J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Y1(),Q=(G)=>Z0(G);if(Q.version="3.2.4",Q.removed=[],!J||!J.document||J.document.nodeType!==FJ.document||!J.Element)return Q.isSupported=!1,Q;let{document:q}=J,Z=q,$=Z.currentScript,{DocumentFragment:K,HTMLTemplateElement:X,Node:j,Element:B,NodeFilter:z,NamedNodeMap:U=J.NamedNodeMap||J.MozNamedAttrMap,HTMLFormElement:C,DOMParser:H,trustedTypes:D}=J,F=B.prototype,R=HJ(F,"cloneNode"),s=HJ(F,"remove"),YJ=HJ(F,"nextSibling"),PJ=HJ(F,"childNodes"),a=HJ(F,"parentNode");if(typeof X==="function"){let G=q.createElement("template");if(G.content&&G.content.ownerDocument)q=G.content.ownerDocument}let P,o="",{implementation:n,createNodeIterator:r,createDocumentFragment:h0,getElementsByTagName:S0}=q,{importNode:y0}=Z,x=tQ();Q.isSupported=typeof eQ==="function"&&typeof a==="function"&&n&&n.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:kJ,ERB_EXPR:dJ,TMPLIT_EXPR:iJ,DATA_ATTR:x0,ARIA_ATTR:L0,IS_SCRIPT_OR_DATA:A0,ATTR_WHITESPACE:bQ,CUSTOM_ELEMENT:g0}=rQ,{IS_ALLOWED_URI:CQ}=rQ,O=null,IQ=w({},[...sQ,...ZQ,...KQ,...$Q,...aQ]),h=null,DQ=w({},[...oQ,...VQ,...nQ,...gJ]),M=Object.seal(J0(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),jJ=null,lJ=null,MQ=!0,cJ=!0,RQ=!1,PQ=!0,qJ=!1,sJ=!0,t=!1,aJ=!1,oJ=!1,ZJ=!1,OJ=!1,fJ=!1,OQ=!0,fQ=!1,N0="user-content-",nJ=!0,BJ=!1,KJ={},$J=null,hQ=w({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),SQ=null,yQ=w({},["audio","video","img","source","image","track"]),rJ=null,xQ=w({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),hJ="http://www.w3.org/1998/Math/MathML",SJ="http://www.w3.org/2000/svg",l="http://www.w3.org/1999/xhtml",VJ=l,tJ=!1,eJ=null,E0=w({},[hJ,SJ,l],qQ),yJ=w({},["mi","mo","mn","ms","mtext"]),xJ=w({},["annotation-xml"]),u0=w({},["title","style","font","a","script"]),zJ=null,_0=["application/xhtml+xml","text/html"],m0="text/html",f=null,XJ=null,T0=q.createElement("form"),LQ=function G(V){return V instanceof RegExp||V instanceof Function},JQ=function G(){let V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(XJ&&XJ===V)return;if(!V||typeof V!=="object")V={};if(V=e(V),zJ=_0.indexOf(V.PARSER_MEDIA_TYPE)===-1?m0:V.PARSER_MEDIA_TYPE,f=zJ==="application/xhtml+xml"?qQ:NJ,O=p(V,"ALLOWED_TAGS")?w({},V.ALLOWED_TAGS,f):IQ,h=p(V,"ALLOWED_ATTR")?w({},V.ALLOWED_ATTR,f):DQ,eJ=p(V,"ALLOWED_NAMESPACES")?w({},V.ALLOWED_NAMESPACES,qQ):E0,rJ=p(V,"ADD_URI_SAFE_ATTR")?w(e(xQ),V.ADD_URI_SAFE_ATTR,f):xQ,SQ=p(V,"ADD_DATA_URI_TAGS")?w(e(yQ),V.ADD_DATA_URI_TAGS,f):yQ,$J=p(V,"FORBID_CONTENTS")?w({},V.FORBID_CONTENTS,f):hQ,jJ=p(V,"FORBID_TAGS")?w({},V.FORBID_TAGS,f):{},lJ=p(V,"FORBID_ATTR")?w({},V.FORBID_ATTR,f):{},KJ=p(V,"USE_PROFILES")?V.USE_PROFILES:!1,MQ=V.ALLOW_ARIA_ATTR!==!1,cJ=V.ALLOW_DATA_ATTR!==!1,RQ=V.ALLOW_UNKNOWN_PROTOCOLS||!1,PQ=V.ALLOW_SELF_CLOSE_IN_ATTR!==!1,qJ=V.SAFE_FOR_TEMPLATES||!1,sJ=V.SAFE_FOR_XML!==!1,t=V.WHOLE_DOCUMENT||!1,ZJ=V.RETURN_DOM||!1,OJ=V.RETURN_DOM_FRAGMENT||!1,fJ=V.RETURN_TRUSTED_TYPE||!1,oJ=V.FORCE_BODY||!1,OQ=V.SANITIZE_DOM!==!1,fQ=V.SANITIZE_NAMED_PROPS||!1,nJ=V.KEEP_CONTENT!==!1,BJ=V.IN_PLACE||!1,CQ=V.ALLOWED_URI_REGEXP||Q0,VJ=V.NAMESPACE||l,yJ=V.MATHML_TEXT_INTEGRATION_POINTS||yJ,xJ=V.HTML_INTEGRATION_POINTS||xJ,M=V.CUSTOM_ELEMENT_HANDLING||{},V.CUSTOM_ELEMENT_HANDLING&&LQ(V.CUSTOM_ELEMENT_HANDLING.tagNameCheck))M.tagNameCheck=V.CUSTOM_ELEMENT_HANDLING.tagNameCheck;if(V.CUSTOM_ELEMENT_HANDLING&&LQ(V.CUSTOM_ELEMENT_HANDLING.attributeNameCheck))M.attributeNameCheck=V.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;if(V.CUSTOM_ELEMENT_HANDLING&&typeof V.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements==="boolean")M.allowCustomizedBuiltInElements=V.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;if(qJ)cJ=!1;if(OJ)ZJ=!0;if(KJ){if(O=w({},aQ),h=[],KJ.html===!0)w(O,sQ),w(h,oQ);if(KJ.svg===!0)w(O,ZQ),w(h,VQ),w(h,gJ);if(KJ.svgFilters===!0)w(O,KQ),w(h,VQ),w(h,gJ);if(KJ.mathMl===!0)w(O,$Q),w(h,nQ),w(h,gJ)}if(V.ADD_TAGS){if(O===IQ)O=e(O);w(O,V.ADD_TAGS,f)}if(V.ADD_ATTR){if(h===DQ)h=e(h);w(h,V.ADD_ATTR,f)}if(V.ADD_URI_SAFE_ATTR)w(rJ,V.ADD_URI_SAFE_ATTR,f);if(V.FORBID_CONTENTS){if($J===hQ)$J=e($J);w($J,V.FORBID_CONTENTS,f)}if(nJ)O["#text"]=!0;if(t)w(O,["html","head","body"]);if(O.table)w(O,["tbody"]),delete jJ.tbody;if(V.TRUSTED_TYPES_POLICY){if(typeof V.TRUSTED_TYPES_POLICY.createHTML!=="function")throw wJ('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof V.TRUSTED_TYPES_POLICY.createScriptURL!=="function")throw wJ('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');P=V.TRUSTED_TYPES_POLICY,o=P.createHTML("")}else{if(P===void 0)P=j1(D,$);if(P!==null&&typeof o==="string")o=P.createHTML("")}if(g)g(V);XJ=V},AQ=w({},[...ZQ,...KQ,...t0]),gQ=w({},[...$Q,...e0]),p0=function G(V){let Y=a(V);if(!Y||!Y.tagName)Y={namespaceURI:VJ,tagName:"template"};let W=NJ(V.tagName),I=NJ(Y.tagName);if(!eJ[V.namespaceURI])return!1;if(V.namespaceURI===SJ){if(Y.namespaceURI===l)return W==="svg";if(Y.namespaceURI===hJ)return W==="svg"&&(I==="annotation-xml"||yJ[I]);return Boolean(AQ[W])}if(V.namespaceURI===hJ){if(Y.namespaceURI===l)return W==="math";if(Y.namespaceURI===SJ)return W==="math"&&xJ[I];return Boolean(gQ[W])}if(V.namespaceURI===l){if(Y.namespaceURI===SJ&&!xJ[I])return!1;if(Y.namespaceURI===hJ&&!yJ[I])return!1;return!gQ[W]&&(u0[W]||!AQ[W])}if(zJ==="application/xhtml+xml"&&eJ[V.namespaceURI])return!0;return!1},k=function G(V){GJ(Q.removed,{element:V});try{a(V).removeChild(V)}catch(Y){s(V)}},LJ=function G(V,Y){try{GJ(Q.removed,{attribute:Y.getAttributeNode(V),from:Y})}catch(W){GJ(Q.removed,{attribute:null,from:Y})}if(Y.removeAttribute(V),V==="is")if(ZJ||OJ)try{k(Y)}catch(W){}else try{Y.setAttribute(V,"")}catch(W){}},NQ=function G(V){let Y=null,W=null;if(oJ)V="<remove></remove>"+V;else{let S=cQ(V,/^[\r\n\t ]+/);W=S&&S[0]}if(zJ==="application/xhtml+xml"&&VJ===l)V='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+V+"</body></html>";let I=P?P.createHTML(V):V;if(VJ===l)try{Y=new H().parseFromString(I,zJ)}catch(S){}if(!Y||!Y.documentElement){Y=n.createDocument(VJ,"template",null);try{Y.documentElement.innerHTML=tJ?o:I}catch(S){}}let y=Y.body||Y.documentElement;if(V&&W)y.insertBefore(q.createTextNode(W),y.childNodes[0]||null);if(VJ===l)return S0.call(Y,t?"html":"body")[0];return t?Y.documentElement:y},EQ=function G(V){return r.call(V.ownerDocument||V,V,z.SHOW_ELEMENT|z.SHOW_COMMENT|z.SHOW_TEXT|z.SHOW_PROCESSING_INSTRUCTION|z.SHOW_CDATA_SECTION,null)},QQ=function G(V){return V instanceof C&&(typeof V.nodeName!=="string"||typeof V.textContent!=="string"||typeof V.removeChild!=="function"||!(V.attributes instanceof U)||typeof V.removeAttribute!=="function"||typeof V.setAttribute!=="function"||typeof V.namespaceURI!=="string"||typeof V.insertBefore!=="function"||typeof V.hasChildNodes!=="function")},uQ=function G(V){return typeof j==="function"&&V instanceof j};function c(G,V,Y){AJ(G,(W)=>{W.call(Q,V,Y,XJ)})}let _Q=function G(V){let Y=null;if(c(x.beforeSanitizeElements,V,null),QQ(V))return k(V),!0;let W=f(V.nodeName);if(c(x.uponSanitizeElement,V,{tagName:W,allowedTags:O}),V.hasChildNodes()&&!uQ(V.firstElementChild)&&A(/<[/\w]/g,V.innerHTML)&&A(/<[/\w]/g,V.textContent))return k(V),!0;if(V.nodeType===FJ.progressingInstruction)return k(V),!0;if(sJ&&V.nodeType===FJ.comment&&A(/<[/\w]/g,V.data))return k(V),!0;if(!O[W]||jJ[W]){if(!jJ[W]&&TQ(W)){if(M.tagNameCheck instanceof RegExp&&A(M.tagNameCheck,W))return!1;if(M.tagNameCheck instanceof Function&&M.tagNameCheck(W))return!1}if(nJ&&!$J[W]){let I=a(V)||V.parentNode,y=PJ(V)||V.childNodes;if(y&&I){let S=y.length;for(let u=S-1;u>=0;--u){let d=R(y[u],!0);d.__removalCount=(V.__removalCount||0)+1,I.insertBefore(d,YJ(V))}}}return k(V),!0}if(V instanceof B&&!p0(V))return k(V),!0;if((W==="noscript"||W==="noembed"||W==="noframes")&&A(/<\/no(script|embed|frames)/i,V.innerHTML))return k(V),!0;if(qJ&&V.nodeType===FJ.text){if(Y=V.textContent,AJ([kJ,dJ,iJ],(I)=>{Y=UJ(Y,I," ")}),V.textContent!==Y)GJ(Q.removed,{element:V.cloneNode()}),V.textContent=Y}return c(x.afterSanitizeElements,V,null),!1},mQ=function G(V,Y,W){if(OQ&&(Y==="id"||Y==="name")&&((W in q)||(W in T0)))return!1;if(cJ&&!lJ[Y]&&A(x0,Y));else if(MQ&&A(L0,Y));else if(!h[Y]||lJ[Y])if(TQ(V)&&(M.tagNameCheck instanceof RegExp&&A(M.tagNameCheck,V)||M.tagNameCheck instanceof Function&&M.tagNameCheck(V))&&(M.attributeNameCheck instanceof RegExp&&A(M.attributeNameCheck,Y)||M.attributeNameCheck instanceof Function&&M.attributeNameCheck(Y))||Y==="is"&&M.allowCustomizedBuiltInElements&&(M.tagNameCheck instanceof RegExp&&A(M.tagNameCheck,W)||M.tagNameCheck instanceof Function&&M.tagNameCheck(W)));else return!1;else if(rJ[Y]);else if(A(CQ,UJ(W,bQ,"")));else if((Y==="src"||Y==="xlink:href"||Y==="href")&&V!=="script"&&a0(W,"data:")===0&&SQ[V]);else if(RQ&&!A(A0,UJ(W,bQ,"")));else if(W)return!1;return!0},TQ=function G(V){return V!=="annotation-xml"&&cQ(V,g0)},pQ=function G(V){c(x.beforeSanitizeAttributes,V,null);let{attributes:Y}=V;if(!Y||QQ(V))return;let W={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:h,forceKeepAttr:void 0},I=Y.length;while(I--){let y=Y[I],{name:S,namespaceURI:u,value:d}=y,WJ=f(S),L=S==="value"?d:o0(d);if(W.attrName=WJ,W.attrValue=L,W.keepAttr=!0,W.forceKeepAttr=void 0,c(x.uponSanitizeAttribute,V,W),L=W.attrValue,fQ&&(WJ==="id"||WJ==="name"))LJ(S,V),L=N0+L;if(sJ&&A(/((--!?|])>)|<\/(style|title)/i,L)){LJ(S,V);continue}if(W.forceKeepAttr)continue;if(LJ(S,V),!W.keepAttr)continue;if(!PQ&&A(/\/>/i,L)){LJ(S,V);continue}if(qJ)AJ([kJ,dJ,iJ],(dQ)=>{L=UJ(L,dQ," ")});let kQ=f(V.nodeName);if(!mQ(kQ,WJ,L))continue;if(P&&typeof D==="object"&&typeof D.getAttributeType==="function")if(u);else switch(D.getAttributeType(kQ,WJ)){case"TrustedHTML":{L=P.createHTML(L);break}case"TrustedScriptURL":{L=P.createScriptURL(L);break}}try{if(u)V.setAttributeNS(u,S,L);else V.setAttribute(S,L);if(QQ(V))k(V);else lQ(Q.removed)}catch(dQ){}}c(x.afterSanitizeAttributes,V,null)},k0=function G(V){let Y=null,W=EQ(V);c(x.beforeSanitizeShadowDOM,V,null);while(Y=W.nextNode())if(c(x.uponSanitizeShadowNode,Y,null),_Q(Y),pQ(Y),Y.content instanceof K)G(Y.content);c(x.afterSanitizeShadowDOM,V,null)};return Q.sanitize=function(G){let V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Y=null,W=null,I=null,y=null;if(tJ=!G,tJ)G="<!-->";if(typeof G!=="string"&&!uQ(G))if(typeof G.toString==="function"){if(G=G.toString(),typeof G!=="string")throw wJ("dirty is not a string, aborting")}else throw wJ("toString is not a function");if(!Q.isSupported)return G;if(!aJ)JQ(V);if(Q.removed=[],typeof G==="string")BJ=!1;if(BJ){if(G.nodeName){let d=f(G.nodeName);if(!O[d]||jJ[d])throw wJ("root node is forbidden and cannot be sanitized in-place")}}else if(G instanceof j)if(Y=NQ("<!---->"),W=Y.ownerDocument.importNode(G,!0),W.nodeType===FJ.element&&W.nodeName==="BODY")Y=W;else if(W.nodeName==="HTML")Y=W;else Y.appendChild(W);else{if(!ZJ&&!qJ&&!t&&G.indexOf("<")===-1)return P&&fJ?P.createHTML(G):G;if(Y=NQ(G),!Y)return ZJ?null:fJ?o:""}if(Y&&oJ)k(Y.firstChild);let S=EQ(BJ?G:Y);while(I=S.nextNode())if(_Q(I),pQ(I),I.content instanceof K)k0(I.content);if(BJ)return G;if(ZJ){if(OJ){y=h0.call(Y.ownerDocument);while(Y.firstChild)y.appendChild(Y.firstChild)}else y=Y;if(h.shadowroot||h.shadowrootmode)y=y0.call(Z,y,!0);return y}let u=t?Y.outerHTML:Y.innerHTML;if(t&&O["!doctype"]&&Y.ownerDocument&&Y.ownerDocument.doctype&&Y.ownerDocument.doctype.name&&A(q0,Y.ownerDocument.doctype.name))u="<!DOCTYPE "+Y.ownerDocument.doctype.name+`>
`+u;if(qJ)AJ([kJ,dJ,iJ],(d)=>{u=UJ(u,d," ")});return P&&fJ?P.createHTML(u):u},Q.setConfig=function(){let G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};JQ(G),aJ=!0},Q.clearConfig=function(){XJ=null,aJ=!1},Q.isValidAttribute=function(G,V,Y){if(!XJ)JQ({});let W=f(G),I=f(V);return mQ(W,I,Y)},Q.addHook=function(G,V){if(typeof V!=="function")return;GJ(x[G],V)},Q.removeHook=function(G,V){if(V!==void 0){let Y=c0(x[G],V);return Y===-1?void 0:s0(x[G],Y,1)[0]}return lQ(x[G])},Q.removeHooks=function(G){x[G]=[]},Q.removeAllHooks=function(){x=tQ()},Q}var K0=Z0();function BQ(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var QJ=BQ();function B0(J){QJ=J}var CJ={exec:()=>null};function b(J,Q=""){let q=typeof J==="string"?J:J.source,Z={replace:($,K)=>{let X=typeof K==="string"?K:K.source;return X=X.replace(E.caret,"$1"),q=q.replace($,X),Z},getRegex:()=>{return new RegExp(q,Q)}};return Z}var E={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:(J)=>new RegExp(`^( {0,3}${J})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:(J)=>new RegExp(`^ {0,${Math.min(3,J-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:(J)=>new RegExp(`^ {0,${Math.min(3,J-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:(J)=>new RegExp(`^ {0,${Math.min(3,J-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:(J)=>new RegExp(`^ {0,${Math.min(3,J-1)}}#`),htmlBeginRegex:(J)=>new RegExp(`^ {0,${Math.min(3,J-1)}}<(?:[a-z].*>|!--)`,"i")},B1=/^(?:[ \t]*(?:\n|$))+/,z1=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,W1=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,RJ=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,G1=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,zQ=/(?:[*+-]|\d{1,9}[.)])/,z0=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,W0=b(z0).replace(/bull/g,zQ).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),U1=b(z0).replace(/bull/g,zQ).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),WQ=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,w1=/^[^\n]+/,GQ=/(?!\s*\])(?:\\.|[^\[\]\\])+/,H1=b(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",GQ).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),F1=b(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,zQ).getRegex(),_J="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",UQ=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,v1=b("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",UQ).replace("tag",_J).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),G0=b(WQ).replace("hr",RJ).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_J).getRegex(),b1=b(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",G0).getRegex(),wQ={blockquote:b1,code:z1,def:H1,fences:W1,heading:G1,hr:RJ,html:v1,lheading:W0,list:F1,newline:B1,paragraph:G0,table:CJ,text:w1},$0=b("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",RJ).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_J).getRegex(),C1={...wQ,lheading:U1,table:$0,paragraph:b(WQ).replace("hr",RJ).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",$0).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_J).getRegex()},I1={...wQ,html:b(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",UQ).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:CJ,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:b(WQ).replace("hr",RJ).replace("heading",` *#{1,6} *[^
]`).replace("lheading",W0).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},D1=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,M1=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,U0=/^( {2,}|\\)\n(?!\s*$)/,R1=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,mJ=/[\p{P}\p{S}]/u,HQ=/[\s\p{P}\p{S}]/u,w0=/[^\s\p{P}\p{S}]/u,P1=b(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,HQ).getRegex(),H0=/(?!~)[\p{P}\p{S}]/u,O1=/(?!~)[\s\p{P}\p{S}]/u,f1=/(?:[^\s\p{P}\p{S}]|~)/u,h1=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,F0=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,S1=b(F0,"u").replace(/punct/g,mJ).getRegex(),y1=b(F0,"u").replace(/punct/g,H0).getRegex(),v0="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",x1=b(v0,"gu").replace(/notPunctSpace/g,w0).replace(/punctSpace/g,HQ).replace(/punct/g,mJ).getRegex(),L1=b(v0,"gu").replace(/notPunctSpace/g,f1).replace(/punctSpace/g,O1).replace(/punct/g,H0).getRegex(),A1=b("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,w0).replace(/punctSpace/g,HQ).replace(/punct/g,mJ).getRegex(),g1=b(/\\(punct)/,"gu").replace(/punct/g,mJ).getRegex(),N1=b(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),E1=b(UQ).replace("(?:-->|$)","-->").getRegex(),u1=b("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",E1).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),uJ=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,_1=b(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",uJ).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),b0=b(/^!?\[(label)\]\[(ref)\]/).replace("label",uJ).replace("ref",GQ).getRegex(),C0=b(/^!?\[(ref)\](?:\[\])?/).replace("ref",GQ).getRegex(),m1=b("reflink|nolink(?!\\()","g").replace("reflink",b0).replace("nolink",C0).getRegex(),FQ={_backpedal:CJ,anyPunctuation:g1,autolink:N1,blockSkip:h1,br:U0,code:M1,del:CJ,emStrongLDelim:S1,emStrongRDelimAst:x1,emStrongRDelimUnd:A1,escape:D1,link:_1,nolink:C0,punctuation:P1,reflink:b0,reflinkSearch:m1,tag:u1,text:R1,url:CJ},T1={...FQ,link:b(/^!?\[(label)\]\((.*?)\)/).replace("label",uJ).getRegex(),reflink:b(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",uJ).getRegex()},jQ={...FQ,emStrongRDelimAst:L1,emStrongLDelim:y1,url:b(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},p1={...jQ,br:b(U0).replace("{2,}","*").getRegex(),text:b(jQ.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},EJ={normal:wQ,gfm:C1,pedantic:I1},vJ={normal:FQ,gfm:jQ,breaks:p1,pedantic:T1},k1={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},V0=(J)=>k1[J];function i(J,Q){if(Q){if(E.escapeTest.test(J))return J.replace(E.escapeReplace,V0)}else if(E.escapeTestNoEncode.test(J))return J.replace(E.escapeReplaceNoEncode,V0);return J}function X0(J){try{J=encodeURI(J).replace(E.percentDecode,"%")}catch{return null}return J}function Y0(J,Q){let q=J.replace(E.findPipe,(K,X,j)=>{let B=!1,z=X;while(--z>=0&&j[z]==="\\")B=!B;if(B)return"|";else return" |"}),Z=q.split(E.splitPipe),$=0;if(!Z[0].trim())Z.shift();if(Z.length>0&&!Z.at(-1)?.trim())Z.pop();if(Q)if(Z.length>Q)Z.splice(Q);else while(Z.length<Q)Z.push("");for(;$<Z.length;$++)Z[$]=Z[$].trim().replace(E.slashPipe,"|");return Z}function bJ(J,Q,q){let Z=J.length;if(Z===0)return"";let $=0;while($<Z)if(J.charAt(Z-$-1)===Q)$++;else break;return J.slice(0,Z-$)}function d1(J,Q){if(J.indexOf(Q[1])===-1)return-1;let q=0;for(let Z=0;Z<J.length;Z++)if(J[Z]==="\\")Z++;else if(J[Z]===Q[0])q++;else if(J[Z]===Q[1]){if(q--,q<0)return Z}return-1}function j0(J,Q,q,Z,$){let K=Q.href,X=Q.title||null,j=J[1].replace($.other.outputLinkReplace,"$1");if(J[0].charAt(0)!=="!"){Z.state.inLink=!0;let B={type:"link",raw:q,href:K,title:X,text:j,tokens:Z.inlineTokens(j)};return Z.state.inLink=!1,B}return{type:"image",raw:q,href:K,title:X,text:j}}function i1(J,Q,q){let Z=J.match(q.other.indentCodeCompensation);if(Z===null)return Q;let $=Z[1];return Q.split(`
`).map((K)=>{let X=K.match(q.other.beginningSpace);if(X===null)return K;let[j]=X;if(j.length>=$.length)return K.slice($.length);return K}).join(`
`)}class DJ{options;rules;lexer;constructor(J){this.options=J||QJ}space(J){let Q=this.rules.block.newline.exec(J);if(Q&&Q[0].length>0)return{type:"space",raw:Q[0]}}code(J){let Q=this.rules.block.code.exec(J);if(Q){let q=Q[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:Q[0],codeBlockStyle:"indented",text:!this.options.pedantic?bJ(q,`
`):q}}}fences(J){let Q=this.rules.block.fences.exec(J);if(Q){let q=Q[0],Z=i1(q,Q[3]||"",this.rules);return{type:"code",raw:q,lang:Q[2]?Q[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):Q[2],text:Z}}}heading(J){let Q=this.rules.block.heading.exec(J);if(Q){let q=Q[2].trim();if(this.rules.other.endingHash.test(q)){let Z=bJ(q,"#");if(this.options.pedantic)q=Z.trim();else if(!Z||this.rules.other.endingSpaceChar.test(Z))q=Z.trim()}return{type:"heading",raw:Q[0],depth:Q[1].length,text:q,tokens:this.lexer.inline(q)}}}hr(J){let Q=this.rules.block.hr.exec(J);if(Q)return{type:"hr",raw:bJ(Q[0],`
`)}}blockquote(J){let Q=this.rules.block.blockquote.exec(J);if(Q){let q=bJ(Q[0],`
`).split(`
`),Z="",$="",K=[];while(q.length>0){let X=!1,j=[],B;for(B=0;B<q.length;B++)if(this.rules.other.blockquoteStart.test(q[B]))j.push(q[B]),X=!0;else if(!X)j.push(q[B]);else break;q=q.slice(B);let z=j.join(`
`),U=z.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");Z=Z?`${Z}
${z}`:z,$=$?`${$}
${U}`:U;let C=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(U,K,!0),this.lexer.state.top=C,q.length===0)break;let H=K.at(-1);if(H?.type==="code")break;else if(H?.type==="blockquote"){let D=H,F=D.raw+`
`+q.join(`
`),R=this.blockquote(F);K[K.length-1]=R,Z=Z.substring(0,Z.length-D.raw.length)+R.raw,$=$.substring(0,$.length-D.text.length)+R.text;break}else if(H?.type==="list"){let D=H,F=D.raw+`
`+q.join(`
`),R=this.list(F);K[K.length-1]=R,Z=Z.substring(0,Z.length-H.raw.length)+R.raw,$=$.substring(0,$.length-D.raw.length)+R.raw,q=F.substring(K.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:Z,tokens:K,text:$}}}list(J){let Q=this.rules.block.list.exec(J);if(Q){let q=Q[1].trim(),Z=q.length>1,$={type:"list",raw:"",ordered:Z,start:Z?+q.slice(0,-1):"",loose:!1,items:[]};if(q=Z?`\\d{1,9}\\${q.slice(-1)}`:`\\${q}`,this.options.pedantic)q=Z?q:"[*+-]";let K=this.rules.other.listItemRegex(q),X=!1;while(J){let B=!1,z="",U="";if(!(Q=K.exec(J)))break;if(this.rules.block.hr.test(J))break;z=Q[0],J=J.substring(z.length);let C=Q[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,(YJ)=>" ".repeat(3*YJ.length)),H=J.split(`
`,1)[0],D=!C.trim(),F=0;if(this.options.pedantic)F=2,U=C.trimStart();else if(D)F=Q[1].length+1;else F=Q[2].search(this.rules.other.nonSpaceChar),F=F>4?1:F,U=C.slice(F),F+=Q[1].length;if(D&&this.rules.other.blankLine.test(H))z+=H+`
`,J=J.substring(H.length+1),B=!0;if(!B){let YJ=this.rules.other.nextBulletRegex(F),PJ=this.rules.other.hrRegex(F),a=this.rules.other.fencesBeginRegex(F),P=this.rules.other.headingBeginRegex(F),o=this.rules.other.htmlBeginRegex(F);while(J){let n=J.split(`
`,1)[0],r;if(H=n,this.options.pedantic)H=H.replace(this.rules.other.listReplaceNesting,"  "),r=H;else r=H.replace(this.rules.other.tabCharGlobal,"    ");if(a.test(H))break;if(P.test(H))break;if(o.test(H))break;if(YJ.test(H))break;if(PJ.test(H))break;if(r.search(this.rules.other.nonSpaceChar)>=F||!H.trim())U+=`
`+r.slice(F);else{if(D)break;if(C.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4)break;if(a.test(C))break;if(P.test(C))break;if(PJ.test(C))break;U+=`
`+H}if(!D&&!H.trim())D=!0;z+=n+`
`,J=J.substring(n.length+1),C=r.slice(F)}}if(!$.loose){if(X)$.loose=!0;else if(this.rules.other.doubleBlankLine.test(z))X=!0}let R=null,s;if(this.options.gfm){if(R=this.rules.other.listIsTask.exec(U),R)s=R[0]!=="[ ] ",U=U.replace(this.rules.other.listReplaceTask,"")}$.items.push({type:"list_item",raw:z,task:!!R,checked:s,loose:!1,text:U,tokens:[]}),$.raw+=z}let j=$.items.at(-1);if(j)j.raw=j.raw.trimEnd(),j.text=j.text.trimEnd();else return;$.raw=$.raw.trimEnd();for(let B=0;B<$.items.length;B++)if(this.lexer.state.top=!1,$.items[B].tokens=this.lexer.blockTokens($.items[B].text,[]),!$.loose){let z=$.items[B].tokens.filter((C)=>C.type==="space"),U=z.length>0&&z.some((C)=>this.rules.other.anyLine.test(C.raw));$.loose=U}if($.loose)for(let B=0;B<$.items.length;B++)$.items[B].loose=!0;return $}}html(J){let Q=this.rules.block.html.exec(J);if(Q)return{type:"html",block:!0,raw:Q[0],pre:Q[1]==="pre"||Q[1]==="script"||Q[1]==="style",text:Q[0]}}def(J){let Q=this.rules.block.def.exec(J);if(Q){let q=Q[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),Z=Q[2]?Q[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",$=Q[3]?Q[3].substring(1,Q[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):Q[3];return{type:"def",tag:q,raw:Q[0],href:Z,title:$}}}table(J){let Q=this.rules.block.table.exec(J);if(!Q)return;if(!this.rules.other.tableDelimiter.test(Q[2]))return;let q=Y0(Q[1]),Z=Q[2].replace(this.rules.other.tableAlignChars,"").split("|"),$=Q[3]?.trim()?Q[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],K={type:"table",raw:Q[0],header:[],align:[],rows:[]};if(q.length!==Z.length)return;for(let X of Z)if(this.rules.other.tableAlignRight.test(X))K.align.push("right");else if(this.rules.other.tableAlignCenter.test(X))K.align.push("center");else if(this.rules.other.tableAlignLeft.test(X))K.align.push("left");else K.align.push(null);for(let X=0;X<q.length;X++)K.header.push({text:q[X],tokens:this.lexer.inline(q[X]),header:!0,align:K.align[X]});for(let X of $)K.rows.push(Y0(X,K.header.length).map((j,B)=>{return{text:j,tokens:this.lexer.inline(j),header:!1,align:K.align[B]}}));return K}lheading(J){let Q=this.rules.block.lheading.exec(J);if(Q)return{type:"heading",raw:Q[0],depth:Q[2].charAt(0)==="="?1:2,text:Q[1],tokens:this.lexer.inline(Q[1])}}paragraph(J){let Q=this.rules.block.paragraph.exec(J);if(Q){let q=Q[1].charAt(Q[1].length-1)===`
`?Q[1].slice(0,-1):Q[1];return{type:"paragraph",raw:Q[0],text:q,tokens:this.lexer.inline(q)}}}text(J){let Q=this.rules.block.text.exec(J);if(Q)return{type:"text",raw:Q[0],text:Q[0],tokens:this.lexer.inline(Q[0])}}escape(J){let Q=this.rules.inline.escape.exec(J);if(Q)return{type:"escape",raw:Q[0],text:Q[1]}}tag(J){let Q=this.rules.inline.tag.exec(J);if(Q){if(!this.lexer.state.inLink&&this.rules.other.startATag.test(Q[0]))this.lexer.state.inLink=!0;else if(this.lexer.state.inLink&&this.rules.other.endATag.test(Q[0]))this.lexer.state.inLink=!1;if(!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(Q[0]))this.lexer.state.inRawBlock=!0;else if(this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(Q[0]))this.lexer.state.inRawBlock=!1;return{type:"html",raw:Q[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:Q[0]}}}link(J){let Q=this.rules.inline.link.exec(J);if(Q){let q=Q[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(q)){if(!this.rules.other.endAngleBracket.test(q))return;let K=bJ(q.slice(0,-1),"\\");if((q.length-K.length)%2===0)return}else{let K=d1(Q[2],"()");if(K>-1){let j=(Q[0].indexOf("!")===0?5:4)+Q[1].length+K;Q[2]=Q[2].substring(0,K),Q[0]=Q[0].substring(0,j).trim(),Q[3]=""}}let Z=Q[2],$="";if(this.options.pedantic){let K=this.rules.other.pedanticHrefTitle.exec(Z);if(K)Z=K[1],$=K[3]}else $=Q[3]?Q[3].slice(1,-1):"";if(Z=Z.trim(),this.rules.other.startAngleBracket.test(Z))if(this.options.pedantic&&!this.rules.other.endAngleBracket.test(q))Z=Z.slice(1);else Z=Z.slice(1,-1);return j0(Q,{href:Z?Z.replace(this.rules.inline.anyPunctuation,"$1"):Z,title:$?$.replace(this.rules.inline.anyPunctuation,"$1"):$},Q[0],this.lexer,this.rules)}}reflink(J,Q){let q;if((q=this.rules.inline.reflink.exec(J))||(q=this.rules.inline.nolink.exec(J))){let Z=(q[2]||q[1]).replace(this.rules.other.multipleSpaceGlobal," "),$=Q[Z.toLowerCase()];if(!$){let K=q[0].charAt(0);return{type:"text",raw:K,text:K}}return j0(q,$,q[0],this.lexer,this.rules)}}emStrong(J,Q,q=""){let Z=this.rules.inline.emStrongLDelim.exec(J);if(!Z)return;if(Z[3]&&q.match(this.rules.other.unicodeAlphaNumeric))return;if(!(Z[1]||Z[2])||!q||this.rules.inline.punctuation.exec(q)){let K=[...Z[0]].length-1,X,j,B=K,z=0,U=Z[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;U.lastIndex=0,Q=Q.slice(-1*J.length+K);while((Z=U.exec(Q))!=null){if(X=Z[1]||Z[2]||Z[3]||Z[4]||Z[5]||Z[6],!X)continue;if(j=[...X].length,Z[3]||Z[4]){B+=j;continue}else if(Z[5]||Z[6]){if(K%3&&!((K+j)%3)){z+=j;continue}}if(B-=j,B>0)continue;j=Math.min(j,j+B+z);let C=[...Z[0]][0].length,H=J.slice(0,K+Z.index+C+j);if(Math.min(K,j)%2){let F=H.slice(1,-1);return{type:"em",raw:H,text:F,tokens:this.lexer.inlineTokens(F)}}let D=H.slice(2,-2);return{type:"strong",raw:H,text:D,tokens:this.lexer.inlineTokens(D)}}}}codespan(J){let Q=this.rules.inline.code.exec(J);if(Q){let q=Q[2].replace(this.rules.other.newLineCharGlobal," "),Z=this.rules.other.nonSpaceChar.test(q),$=this.rules.other.startingSpaceChar.test(q)&&this.rules.other.endingSpaceChar.test(q);if(Z&&$)q=q.substring(1,q.length-1);return{type:"codespan",raw:Q[0],text:q}}}br(J){let Q=this.rules.inline.br.exec(J);if(Q)return{type:"br",raw:Q[0]}}del(J){let Q=this.rules.inline.del.exec(J);if(Q)return{type:"del",raw:Q[0],text:Q[2],tokens:this.lexer.inlineTokens(Q[2])}}autolink(J){let Q=this.rules.inline.autolink.exec(J);if(Q){let q,Z;if(Q[2]==="@")q=Q[1],Z="mailto:"+q;else q=Q[1],Z=q;return{type:"link",raw:Q[0],text:q,href:Z,tokens:[{type:"text",raw:q,text:q}]}}}url(J){let Q;if(Q=this.rules.inline.url.exec(J)){let q,Z;if(Q[2]==="@")q=Q[0],Z="mailto:"+q;else{let $;do $=Q[0],Q[0]=this.rules.inline._backpedal.exec(Q[0])?.[0]??"";while($!==Q[0]);if(q=Q[0],Q[1]==="www.")Z="http://"+Q[0];else Z=Q[0]}return{type:"link",raw:Q[0],text:q,href:Z,tokens:[{type:"text",raw:q,text:q}]}}}inlineText(J){let Q=this.rules.inline.text.exec(J);if(Q){let q=this.lexer.state.inRawBlock;return{type:"text",raw:Q[0],text:Q[0],escaped:q}}}}class m{tokens;options;state;tokenizer;inlineQueue;constructor(J){this.tokens=[],this.tokens.links=Object.create(null),this.options=J||QJ,this.options.tokenizer=this.options.tokenizer||new DJ,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let Q={other:E,block:EJ.normal,inline:vJ.normal};if(this.options.pedantic)Q.block=EJ.pedantic,Q.inline=vJ.pedantic;else if(this.options.gfm)if(Q.block=EJ.gfm,this.options.breaks)Q.inline=vJ.breaks;else Q.inline=vJ.gfm;this.tokenizer.rules=Q}static get rules(){return{block:EJ,inline:vJ}}static lex(J,Q){return new m(Q).lex(J)}static lexInline(J,Q){return new m(Q).inlineTokens(J)}lex(J){J=J.replace(E.carriageReturn,`
`),this.blockTokens(J,this.tokens);for(let Q=0;Q<this.inlineQueue.length;Q++){let q=this.inlineQueue[Q];this.inlineTokens(q.src,q.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(J,Q=[],q=!1){if(this.options.pedantic)J=J.replace(E.tabCharGlobal,"    ").replace(E.spaceLine,"");while(J){let Z;if(this.options.extensions?.block?.some((K)=>{if(Z=K.call({lexer:this},J,Q))return J=J.substring(Z.raw.length),Q.push(Z),!0;return!1}))continue;if(Z=this.tokenizer.space(J)){J=J.substring(Z.raw.length);let K=Q.at(-1);if(Z.raw.length===1&&K!==void 0)K.raw+=`
`;else Q.push(Z);continue}if(Z=this.tokenizer.code(J)){J=J.substring(Z.raw.length);let K=Q.at(-1);if(K?.type==="paragraph"||K?.type==="text")K.raw+=`
`+Z.raw,K.text+=`
`+Z.text,this.inlineQueue.at(-1).src=K.text;else Q.push(Z);continue}if(Z=this.tokenizer.fences(J)){J=J.substring(Z.raw.length),Q.push(Z);continue}if(Z=this.tokenizer.heading(J)){J=J.substring(Z.raw.length),Q.push(Z);continue}if(Z=this.tokenizer.hr(J)){J=J.substring(Z.raw.length),Q.push(Z);continue}if(Z=this.tokenizer.blockquote(J)){J=J.substring(Z.raw.length),Q.push(Z);continue}if(Z=this.tokenizer.list(J)){J=J.substring(Z.raw.length),Q.push(Z);continue}if(Z=this.tokenizer.html(J)){J=J.substring(Z.raw.length),Q.push(Z);continue}if(Z=this.tokenizer.def(J)){J=J.substring(Z.raw.length);let K=Q.at(-1);if(K?.type==="paragraph"||K?.type==="text")K.raw+=`
`+Z.raw,K.text+=`
`+Z.raw,this.inlineQueue.at(-1).src=K.text;else if(!this.tokens.links[Z.tag])this.tokens.links[Z.tag]={href:Z.href,title:Z.title};continue}if(Z=this.tokenizer.table(J)){J=J.substring(Z.raw.length),Q.push(Z);continue}if(Z=this.tokenizer.lheading(J)){J=J.substring(Z.raw.length),Q.push(Z);continue}let $=J;if(this.options.extensions?.startBlock){let K=1/0,X=J.slice(1),j;if(this.options.extensions.startBlock.forEach((B)=>{if(j=B.call({lexer:this},X),typeof j==="number"&&j>=0)K=Math.min(K,j)}),K<1/0&&K>=0)$=J.substring(0,K+1)}if(this.state.top&&(Z=this.tokenizer.paragraph($))){let K=Q.at(-1);if(q&&K?.type==="paragraph")K.raw+=`
`+Z.raw,K.text+=`
`+Z.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=K.text;else Q.push(Z);q=$.length!==J.length,J=J.substring(Z.raw.length);continue}if(Z=this.tokenizer.text(J)){J=J.substring(Z.raw.length);let K=Q.at(-1);if(K?.type==="text")K.raw+=`
`+Z.raw,K.text+=`
`+Z.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=K.text;else Q.push(Z);continue}if(J){let K="Infinite loop on byte: "+J.charCodeAt(0);if(this.options.silent){console.error(K);break}else throw new Error(K)}}return this.state.top=!0,Q}inline(J,Q=[]){return this.inlineQueue.push({src:J,tokens:Q}),Q}inlineTokens(J,Q=[]){let q=J,Z=null;if(this.tokens.links){let X=Object.keys(this.tokens.links);if(X.length>0){while((Z=this.tokenizer.rules.inline.reflinkSearch.exec(q))!=null)if(X.includes(Z[0].slice(Z[0].lastIndexOf("[")+1,-1)))q=q.slice(0,Z.index)+"["+"a".repeat(Z[0].length-2)+"]"+q.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex)}}while((Z=this.tokenizer.rules.inline.blockSkip.exec(q))!=null)q=q.slice(0,Z.index)+"["+"a".repeat(Z[0].length-2)+"]"+q.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);while((Z=this.tokenizer.rules.inline.anyPunctuation.exec(q))!=null)q=q.slice(0,Z.index)+"++"+q.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let $=!1,K="";while(J){if(!$)K="";$=!1;let X;if(this.options.extensions?.inline?.some((B)=>{if(X=B.call({lexer:this},J,Q))return J=J.substring(X.raw.length),Q.push(X),!0;return!1}))continue;if(X=this.tokenizer.escape(J)){J=J.substring(X.raw.length),Q.push(X);continue}if(X=this.tokenizer.tag(J)){J=J.substring(X.raw.length),Q.push(X);continue}if(X=this.tokenizer.link(J)){J=J.substring(X.raw.length),Q.push(X);continue}if(X=this.tokenizer.reflink(J,this.tokens.links)){J=J.substring(X.raw.length);let B=Q.at(-1);if(X.type==="text"&&B?.type==="text")B.raw+=X.raw,B.text+=X.text;else Q.push(X);continue}if(X=this.tokenizer.emStrong(J,q,K)){J=J.substring(X.raw.length),Q.push(X);continue}if(X=this.tokenizer.codespan(J)){J=J.substring(X.raw.length),Q.push(X);continue}if(X=this.tokenizer.br(J)){J=J.substring(X.raw.length),Q.push(X);continue}if(X=this.tokenizer.del(J)){J=J.substring(X.raw.length),Q.push(X);continue}if(X=this.tokenizer.autolink(J)){J=J.substring(X.raw.length),Q.push(X);continue}if(!this.state.inLink&&(X=this.tokenizer.url(J))){J=J.substring(X.raw.length),Q.push(X);continue}let j=J;if(this.options.extensions?.startInline){let B=1/0,z=J.slice(1),U;if(this.options.extensions.startInline.forEach((C)=>{if(U=C.call({lexer:this},z),typeof U==="number"&&U>=0)B=Math.min(B,U)}),B<1/0&&B>=0)j=J.substring(0,B+1)}if(X=this.tokenizer.inlineText(j)){if(J=J.substring(X.raw.length),X.raw.slice(-1)!=="_")K=X.raw.slice(-1);$=!0;let B=Q.at(-1);if(B?.type==="text")B.raw+=X.raw,B.text+=X.text;else Q.push(X);continue}if(J){let B="Infinite loop on byte: "+J.charCodeAt(0);if(this.options.silent){console.error(B);break}else throw new Error(B)}}return Q}}class MJ{options;parser;constructor(J){this.options=J||QJ}space(J){return""}code({text:J,lang:Q,escaped:q}){let Z=(Q||"").match(E.notSpaceStart)?.[0],$=J.replace(E.endingNewline,"")+`
`;if(!Z)return"<pre><code>"+(q?$:i($,!0))+`</code></pre>
`;return'<pre><code class="language-'+i(Z)+'">'+(q?$:i($,!0))+`</code></pre>
`}blockquote({tokens:J}){return`<blockquote>
${this.parser.parse(J)}</blockquote>
`}html({text:J}){return J}heading({tokens:J,depth:Q}){return`<h${Q}>${this.parser.parseInline(J)}</h${Q}>
`}hr(J){return`<hr>
`}list(J){let{ordered:Q,start:q}=J,Z="";for(let X=0;X<J.items.length;X++){let j=J.items[X];Z+=this.listitem(j)}let $=Q?"ol":"ul",K=Q&&q!==1?' start="'+q+'"':"";return"<"+$+K+`>
`+Z+"</"+$+`>
`}listitem(J){let Q="";if(J.task){let q=this.checkbox({checked:!!J.checked});if(J.loose)if(J.tokens[0]?.type==="paragraph"){if(J.tokens[0].text=q+" "+J.tokens[0].text,J.tokens[0].tokens&&J.tokens[0].tokens.length>0&&J.tokens[0].tokens[0].type==="text")J.tokens[0].tokens[0].text=q+" "+i(J.tokens[0].tokens[0].text),J.tokens[0].tokens[0].escaped=!0}else J.tokens.unshift({type:"text",raw:q+" ",text:q+" ",escaped:!0});else Q+=q+" "}return Q+=this.parser.parse(J.tokens,!!J.loose),`<li>${Q}</li>
`}checkbox({checked:J}){return"<input "+(J?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:J}){return`<p>${this.parser.parseInline(J)}</p>
`}table(J){let Q="",q="";for(let $=0;$<J.header.length;$++)q+=this.tablecell(J.header[$]);Q+=this.tablerow({text:q});let Z="";for(let $=0;$<J.rows.length;$++){let K=J.rows[$];q="";for(let X=0;X<K.length;X++)q+=this.tablecell(K[X]);Z+=this.tablerow({text:q})}if(Z)Z=`<tbody>${Z}</tbody>`;return`<table>
<thead>
`+Q+`</thead>
`+Z+`</table>
`}tablerow({text:J}){return`<tr>
${J}</tr>
`}tablecell(J){let Q=this.parser.parseInline(J.tokens),q=J.header?"th":"td";return(J.align?`<${q} align="${J.align}">`:`<${q}>`)+Q+`</${q}>
`}strong({tokens:J}){return`<strong>${this.parser.parseInline(J)}</strong>`}em({tokens:J}){return`<em>${this.parser.parseInline(J)}</em>`}codespan({text:J}){return`<code>${i(J,!0)}</code>`}br(J){return"<br>"}del({tokens:J}){return`<del>${this.parser.parseInline(J)}</del>`}link({href:J,title:Q,tokens:q}){let Z=this.parser.parseInline(q),$=X0(J);if($===null)return Z;J=$;let K='<a href="'+J+'"';if(Q)K+=' title="'+i(Q)+'"';return K+=">"+Z+"</a>",K}image({href:J,title:Q,text:q}){let Z=X0(J);if(Z===null)return i(q);J=Z;let $=`<img src="${J}" alt="${q}"`;if(Q)$+=` title="${i(Q)}"`;return $+=">",$}text(J){return"tokens"in J&&J.tokens?this.parser.parseInline(J.tokens):("escaped"in J)&&J.escaped?J.text:i(J.text)}}class TJ{strong({text:J}){return J}em({text:J}){return J}codespan({text:J}){return J}del({text:J}){return J}html({text:J}){return J}text({text:J}){return J}link({text:J}){return""+J}image({text:J}){return""+J}br(){return""}}class T{options;renderer;textRenderer;constructor(J){this.options=J||QJ,this.options.renderer=this.options.renderer||new MJ,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new TJ}static parse(J,Q){return new T(Q).parse(J)}static parseInline(J,Q){return new T(Q).parseInline(J)}parse(J,Q=!0){let q="";for(let Z=0;Z<J.length;Z++){let $=J[Z];if(this.options.extensions?.renderers?.[$.type]){let X=$,j=this.options.extensions.renderers[X.type].call({parser:this},X);if(j!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(X.type)){q+=j||"";continue}}let K=$;switch(K.type){case"space":{q+=this.renderer.space(K);continue}case"hr":{q+=this.renderer.hr(K);continue}case"heading":{q+=this.renderer.heading(K);continue}case"code":{q+=this.renderer.code(K);continue}case"table":{q+=this.renderer.table(K);continue}case"blockquote":{q+=this.renderer.blockquote(K);continue}case"list":{q+=this.renderer.list(K);continue}case"html":{q+=this.renderer.html(K);continue}case"paragraph":{q+=this.renderer.paragraph(K);continue}case"text":{let X=K,j=this.renderer.text(X);while(Z+1<J.length&&J[Z+1].type==="text")X=J[++Z],j+=`
`+this.renderer.text(X);if(Q)q+=this.renderer.paragraph({type:"paragraph",raw:j,text:j,tokens:[{type:"text",raw:j,text:j,escaped:!0}]});else q+=j;continue}default:{let X='Token with "'+K.type+'" type was not found.';if(this.options.silent)return console.error(X),"";else throw new Error(X)}}}return q}parseInline(J,Q=this.renderer){let q="";for(let Z=0;Z<J.length;Z++){let $=J[Z];if(this.options.extensions?.renderers?.[$.type]){let X=this.options.extensions.renderers[$.type].call({parser:this},$);if(X!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes($.type)){q+=X||"";continue}}let K=$;switch(K.type){case"escape":{q+=Q.text(K);break}case"html":{q+=Q.html(K);break}case"link":{q+=Q.link(K);break}case"image":{q+=Q.image(K);break}case"strong":{q+=Q.strong(K);break}case"em":{q+=Q.em(K);break}case"codespan":{q+=Q.codespan(K);break}case"br":{q+=Q.br(K);break}case"del":{q+=Q.del(K);break}case"text":{q+=Q.text(K);break}default:{let X='Token with "'+K.type+'" type was not found.';if(this.options.silent)return console.error(X),"";else throw new Error(X)}}}return q}}class IJ{options;block;constructor(J){this.options=J||QJ}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(J){return J}postprocess(J){return J}processAllTokens(J){return J}provideLexer(){return this.block?m.lex:m.lexInline}provideParser(){return this.block?T.parse:T.parseInline}}class I0{defaults=BQ();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=T;Renderer=MJ;TextRenderer=TJ;Lexer=m;Tokenizer=DJ;Hooks=IJ;constructor(...J){this.use(...J)}walkTokens(J,Q){let q=[];for(let Z of J)switch(q=q.concat(Q.call(this,Z)),Z.type){case"table":{let $=Z;for(let K of $.header)q=q.concat(this.walkTokens(K.tokens,Q));for(let K of $.rows)for(let X of K)q=q.concat(this.walkTokens(X.tokens,Q));break}case"list":{let $=Z;q=q.concat(this.walkTokens($.items,Q));break}default:{let $=Z;if(this.defaults.extensions?.childTokens?.[$.type])this.defaults.extensions.childTokens[$.type].forEach((K)=>{let X=$[K].flat(1/0);q=q.concat(this.walkTokens(X,Q))});else if($.tokens)q=q.concat(this.walkTokens($.tokens,Q))}}return q}use(...J){let Q=this.defaults.extensions||{renderers:{},childTokens:{}};return J.forEach((q)=>{let Z={...q};if(Z.async=this.defaults.async||Z.async||!1,q.extensions)q.extensions.forEach(($)=>{if(!$.name)throw new Error("extension name required");if("renderer"in $){let K=Q.renderers[$.name];if(K)Q.renderers[$.name]=function(...X){let j=$.renderer.apply(this,X);if(j===!1)j=K.apply(this,X);return j};else Q.renderers[$.name]=$.renderer}if("tokenizer"in $){if(!$.level||$.level!=="block"&&$.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let K=Q[$.level];if(K)K.unshift($.tokenizer);else Q[$.level]=[$.tokenizer];if($.start){if($.level==="block")if(Q.startBlock)Q.startBlock.push($.start);else Q.startBlock=[$.start];else if($.level==="inline")if(Q.startInline)Q.startInline.push($.start);else Q.startInline=[$.start]}}if("childTokens"in $&&$.childTokens)Q.childTokens[$.name]=$.childTokens}),Z.extensions=Q;if(q.renderer){let $=this.defaults.renderer||new MJ(this.defaults);for(let K in q.renderer){if(!(K in $))throw new Error(`renderer '${K}' does not exist`);if(["options","parser"].includes(K))continue;let X=K,j=q.renderer[X],B=$[X];$[X]=(...z)=>{let U=j.apply($,z);if(U===!1)U=B.apply($,z);return U||""}}Z.renderer=$}if(q.tokenizer){let $=this.defaults.tokenizer||new DJ(this.defaults);for(let K in q.tokenizer){if(!(K in $))throw new Error(`tokenizer '${K}' does not exist`);if(["options","rules","lexer"].includes(K))continue;let X=K,j=q.tokenizer[X],B=$[X];$[X]=(...z)=>{let U=j.apply($,z);if(U===!1)U=B.apply($,z);return U}}Z.tokenizer=$}if(q.hooks){let $=this.defaults.hooks||new IJ;for(let K in q.hooks){if(!(K in $))throw new Error(`hook '${K}' does not exist`);if(["options","block"].includes(K))continue;let X=K,j=q.hooks[X],B=$[X];if(IJ.passThroughHooks.has(K))$[X]=(z)=>{if(this.defaults.async)return Promise.resolve(j.call($,z)).then((C)=>{return B.call($,C)});let U=j.call($,z);return B.call($,U)};else $[X]=(...z)=>{let U=j.apply($,z);if(U===!1)U=B.apply($,z);return U}}Z.hooks=$}if(q.walkTokens){let $=this.defaults.walkTokens,K=q.walkTokens;Z.walkTokens=function(X){let j=[];if(j.push(K.call(this,X)),$)j=j.concat($.call(this,X));return j}}this.defaults={...this.defaults,...Z}}),this}setOptions(J){return this.defaults={...this.defaults,...J},this}lexer(J,Q){return m.lex(J,Q??this.defaults)}parser(J,Q){return T.parse(J,Q??this.defaults)}parseMarkdown(J){return(q,Z)=>{let $={...Z},K={...this.defaults,...$},X=this.onError(!!K.silent,!!K.async);if(this.defaults.async===!0&&$.async===!1)return X(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof q==="undefined"||q===null)return X(new Error("marked(): input parameter is undefined or null"));if(typeof q!=="string")return X(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(q)+", string expected"));if(K.hooks)K.hooks.options=K,K.hooks.block=J;let j=K.hooks?K.hooks.provideLexer():J?m.lex:m.lexInline,B=K.hooks?K.hooks.provideParser():J?T.parse:T.parseInline;if(K.async)return Promise.resolve(K.hooks?K.hooks.preprocess(q):q).then((z)=>j(z,K)).then((z)=>K.hooks?K.hooks.processAllTokens(z):z).then((z)=>K.walkTokens?Promise.all(this.walkTokens(z,K.walkTokens)).then(()=>z):z).then((z)=>B(z,K)).then((z)=>K.hooks?K.hooks.postprocess(z):z).catch(X);try{if(K.hooks)q=K.hooks.preprocess(q);let z=j(q,K);if(K.hooks)z=K.hooks.processAllTokens(z);if(K.walkTokens)this.walkTokens(z,K.walkTokens);let U=B(z,K);if(K.hooks)U=K.hooks.postprocess(U);return U}catch(z){return X(z)}}}onError(J,Q){return(q)=>{if(q.message+=`
Please report this to https://github.com/markedjs/marked.`,J){let Z="<p>An error occurred:</p><pre>"+i(q.message+"",!0)+"</pre>";if(Q)return Promise.resolve(Z);return Z}if(Q)return Promise.reject(q);throw q}}}var JJ=new I0;function v(J,Q){return JJ.parse(J,Q)}v.options=v.setOptions=function(J){return JJ.setOptions(J),v.defaults=JJ.defaults,B0(v.defaults),v};v.getDefaults=BQ;v.defaults=QJ;v.use=function(...J){return JJ.use(...J),v.defaults=JJ.defaults,B0(v.defaults),v};v.walkTokens=function(J,Q){return JJ.walkTokens(J,Q)};v.parseInline=JJ.parseInline;v.Parser=T;v.parser=T.parse;v.Renderer=MJ;v.TextRenderer=TJ;v.Lexer=m;v.lexer=m.lex;v.Tokenizer=DJ;v.Hooks=IJ;v.parse=v;var{options:o1,setOptions:n1,use:r1,walkTokens:t1,parseInline:e1}=v;var J4=T.parse,Q4=m.lex;document.addEventListener("DOMContentLoaded",()=>{document.addEventListener("click",(Q)=>{let q=Q.target;if(q&&q.id==="regenerate_answer"){Q.preventDefault();let Z=document.querySelectorAll('div[data-role="user"]'),$=Z[Z.length-1]?.textContent?.trim()||"";O0($),f0($)}if(q&&q.id==="prompt__submit"){Q.preventDefault();let Z=P0(),$=document.querySelector("textarea");if($)pJ($);vQ(Z)}if(q&&q.dataset.role==="example"){Q.preventDefault();let Z=q.textContent?.trim()||"";vQ(Z)}});let J=document.querySelector("textarea");if(J)J.addEventListener("input",()=>pJ(J)),pJ(J);M0()});var D0=function(J){if(J.key==="Enter"){J.preventDefault();let Q=P0(),q=document.querySelector("textarea");if(q)pJ(q);vQ(Q)}};function l1(){let J=document.getElementById("prompt__input");if(J)J.removeEventListener("keydown",D0)}function M0(){let J=document.getElementById("prompt__input");if(J)J.addEventListener("keydown",D0)}function vQ(J){if(J!=="")O0(J),f0(J)}function c1(){let J=document.querySelectorAll("a");for(let Q of J)Q.target="_blank"}function R0(){setTimeout(()=>{window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},5)}function pJ(J){J.style.height="auto",J.style.height=`${Math.min(J.scrollHeight,250)}px`}function P0(){let J=document.getElementById("prompt__input");if(J){let{value:Q}=J;return J.value="",Q.trim()}return"Bonjour !"}async function s1(J){document.querySelector('[data-role="system__loading"]')?.remove();let q=document.querySelector("main > div:last-child");if(!q)return;q.classList.add("prose");let Z=J.replace(/<br\/>/g,`

`).replace(/\n{3,}/g,`

`),$=K0.sanitize(Z);q.innerHTML=await v.parse($),c1(),R0()}function O0(J){let Q=document.querySelector("main");if(!Q)return;let q=document.createElement("div");q.setAttribute("data-role","user"),q.classList.add("user"),q.textContent=J;let Z=document.createElement("div");Z.setAttribute("data-role","system");let $=document.createElement("div");$.classList.add("thinking"),Z.appendChild($);let K=document.createDocumentFragment();K.appendChild(q),K.appendChild(Z),Q.appendChild(K),R0()}async function f0(J){for(let Q of document.querySelectorAll("button"))Q.disabled=!0;l1();try{let Q=window.location.pathname.substring(3),q=new URLSearchParams(window.location.search),Z=q.get("config")||"",$=q.get("context")||"",K=q.get("data")||"",X=`/ai/${Q}?message=${encodeURIComponent(J)}&config=${encodeURIComponent(Z)}&context=${encodeURIComponent($)}&data=${encodeURIComponent(K)}`,j=await fetch(X,{method:"GET"});if(!j.body)throw new Error("Response body is null");let B=j.body.getReader(),z=new TextDecoder,U="";while(!0){let{done:C,value:H}=await B.read();if(C){let F=document.getElementById("disclaimer");if(F){let R=document.createElement("div");R.setAttribute("data-role","disclaimer"),R.textContent=F.value;let s=document.querySelector("main");if(s)s.appendChild(R)}break}if(z.decode(H).includes("pierre_error"))U="<p class='pierre_error'>Une erreur s'est produite chez le fournisseur de modèle de langage. <span id='regenerate_answer'>Cliquer pour regénérer une réponse</span>. Si le problème persiste, patienter quelques minutes.</p>";else U+=`${z.decode(H)}`;s1(U)}}catch(Q){console.error(Q)}finally{for(let Q of document.querySelectorAll("button"))Q.disabled=!1;M0()}}
