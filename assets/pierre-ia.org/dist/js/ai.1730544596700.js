function x(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var D=x();function JJ(J){D=J}var KJ=/[&<>"']/,MJ=new RegExp(KJ.source,"g"),QJ=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,EJ=new RegExp(QJ.source,"g"),HJ={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},s=(J)=>HJ[J];function $(J,K){if(K){if(KJ.test(J))return J.replace(MJ,s)}else if(QJ.test(J))return J.replace(EJ,s);return J}var BJ=/(^|[^\[])\^/g;function W(J,K){let Q=typeof J==="string"?J:J.source;K=K||"";let V={replace:(X,Y)=>{let A=typeof Y==="string"?Y:Y.source;return A=A.replace(BJ,"$1"),Q=Q.replace(X,A),V},getRegex:()=>{return new RegExp(Q,K)}};return V}function n(J){try{J=encodeURI(J).replace(/%25/g,"%")}catch{return null}return J}var y={exec:()=>null};function r(J,K){let Q=J.replace(/\|/g,(Y,A,Z)=>{let G=!1,q=A;while(--q>=0&&Z[q]==="\\")G=!G;if(G)return"|";else return" |"}),V=Q.split(/ \|/),X=0;if(!V[0].trim())V.shift();if(V.length>0&&!V[V.length-1].trim())V.pop();if(K)if(V.length>K)V.splice(K);else while(V.length<K)V.push("");for(;X<V.length;X++)V[X]=V[X].trim().replace(/\\\|/g,"|");return V}function C(J,K,Q){let V=J.length;if(V===0)return"";let X=0;while(X<V){let Y=J.charAt(V-X-1);if(Y===K&&!Q)X++;else if(Y!==K&&Q)X++;else break}return J.slice(0,V-X)}function zJ(J,K){if(J.indexOf(K[1])===-1)return-1;let Q=0;for(let V=0;V<J.length;V++)if(J[V]==="\\")V++;else if(J[V]===K[0])Q++;else if(J[V]===K[1]){if(Q--,Q<0)return V}return-1}function t(J,K,Q,V){let X=K.href,Y=K.title?$(K.title):null,A=J[1].replace(/\\([\[\]])/g,"$1");if(J[0].charAt(0)!=="!"){V.state.inLink=!0;let Z={type:"link",raw:Q,href:X,title:Y,text:A,tokens:V.inlineTokens(A)};return V.state.inLink=!1,Z}return{type:"image",raw:Q,href:X,title:Y,text:$(A)}}function DJ(J,K){let Q=J.match(/^(\s+)(?:```)/);if(Q===null)return K;let V=Q[1];return K.split("\n").map((X)=>{let Y=X.match(/^\s+/);if(Y===null)return X;let[A]=Y;if(A.length>=V.length)return X.slice(V.length);return X}).join("\n")}class S{options;rules;lexer;constructor(J){this.options=J||D}space(J){let K=this.rules.block.newline.exec(J);if(K&&K[0].length>0)return{type:"space",raw:K[0]}}code(J){let K=this.rules.block.code.exec(J);if(K){let Q=K[0].replace(/^(?: {1,4}| {0,3}\t)/gm,"");return{type:"code",raw:K[0],codeBlockStyle:"indented",text:!this.options.pedantic?C(Q,"\n"):Q}}}fences(J){let K=this.rules.block.fences.exec(J);if(K){let Q=K[0],V=DJ(Q,K[3]||"");return{type:"code",raw:Q,lang:K[2]?K[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):K[2],text:V}}}heading(J){let K=this.rules.block.heading.exec(J);if(K){let Q=K[2].trim();if(/#$/.test(Q)){let V=C(Q,"#");if(this.options.pedantic)Q=V.trim();else if(!V||/ $/.test(V))Q=V.trim()}return{type:"heading",raw:K[0],depth:K[1].length,text:Q,tokens:this.lexer.inline(Q)}}}hr(J){let K=this.rules.block.hr.exec(J);if(K)return{type:"hr",raw:C(K[0],"\n")}}blockquote(J){let K=this.rules.block.blockquote.exec(J);if(K){let Q=C(K[0],"\n").split("\n"),V="",X="",Y=[];while(Q.length>0){let A=!1,Z=[],G;for(G=0;G<Q.length;G++)if(/^ {0,3}>/.test(Q[G]))Z.push(Q[G]),A=!0;else if(!A)Z.push(Q[G]);else break;Q=Q.slice(G);let q=Z.join("\n"),O=q.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,"\n    $1").replace(/^ {0,3}>[ \t]?/gm,"");V=V?`${V}\n${q}`:q,X=X?`${X}\n${O}`:O;let U=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(O,Y,!0),this.lexer.state.top=U,Q.length===0)break;let N=Y[Y.length-1];if(N?.type==="code")break;else if(N?.type==="blockquote"){let j=N,M=j.raw+"\n"+Q.join("\n"),B=this.blockquote(M);Y[Y.length-1]=B,V=V.substring(0,V.length-j.raw.length)+B.raw,X=X.substring(0,X.length-j.text.length)+B.text;break}else if(N?.type==="list"){let j=N,M=j.raw+"\n"+Q.join("\n"),B=this.list(M);Y[Y.length-1]=B,V=V.substring(0,V.length-N.raw.length)+B.raw,X=X.substring(0,X.length-j.raw.length)+B.raw,Q=M.substring(Y[Y.length-1].raw.length).split("\n");continue}}return{type:"blockquote",raw:V,tokens:Y,text:X}}}list(J){let K=this.rules.block.list.exec(J);if(K){let Q=K[1].trim(),V=Q.length>1,X={type:"list",raw:"",ordered:V,start:V?+Q.slice(0,-1):"",loose:!1,items:[]};if(Q=V?`\\d{1,9}\\${Q.slice(-1)}`:`\\${Q}`,this.options.pedantic)Q=V?Q:"[*+-]";let Y=new RegExp(`^( {0,3}${Q})((?:[\t ][^\\n]*)?(?:\\n|\$))`),A=!1;while(J){let Z=!1,G="",q="";if(!(K=Y.exec(J)))break;if(this.rules.block.hr.test(J))break;G=K[0],J=J.substring(G.length);let O=K[2].split("\n",1)[0].replace(/^\t+/,(g)=>" ".repeat(3*g.length)),U=J.split("\n",1)[0],N=!O.trim(),j=0;if(this.options.pedantic)j=2,q=O.trimStart();else if(N)j=K[1].length+1;else j=K[2].search(/[^ ]/),j=j>4?1:j,q=O.slice(j),j+=K[1].length;if(N&&/^[ \t]*$/.test(U))G+=U+"\n",J=J.substring(U.length+1),Z=!0;if(!Z){let g=new RegExp(`^ {0,${Math.min(3,j-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|\$))`),a=new RegExp(`^ {0,${Math.min(3,j-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|\$)`),c=new RegExp(`^ {0,${Math.min(3,j-1)}}(?:\`\`\`|~~~)`),o=new RegExp(`^ {0,${Math.min(3,j-1)}}#`),$J=new RegExp(`^ {0,${Math.min(3,j-1)}}<[a-z].*>`,"i");while(J){let u=J.split("\n",1)[0],I;if(U=u,this.options.pedantic)U=U.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  "),I=U;else I=U.replace(/\t/g,"    ");if(c.test(U))break;if(o.test(U))break;if($J.test(U))break;if(g.test(U))break;if(a.test(U))break;if(I.search(/[^ ]/)>=j||!U.trim())q+="\n"+I.slice(j);else{if(N)break;if(O.replace(/\t/g,"    ").search(/[^ ]/)>=4)break;if(c.test(O))break;if(o.test(O))break;if(a.test(O))break;q+="\n"+U}if(!N&&!U.trim())N=!0;G+=u+"\n",J=J.substring(u.length+1),O=I.slice(j)}}if(!X.loose){if(A)X.loose=!0;else if(/\n[ \t]*\n[ \t]*$/.test(G))A=!0}let M=null,B;if(this.options.gfm){if(M=/^\[[ xX]\] /.exec(q),M)B=M[0]!=="[ ] ",q=q.replace(/^\[[ xX]\] +/,"")}X.items.push({type:"list_item",raw:G,task:!!M,checked:B,loose:!1,text:q,tokens:[]}),X.raw+=G}X.items[X.items.length-1].raw=X.items[X.items.length-1].raw.trimEnd(),X.items[X.items.length-1].text=X.items[X.items.length-1].text.trimEnd(),X.raw=X.raw.trimEnd();for(let Z=0;Z<X.items.length;Z++)if(this.lexer.state.top=!1,X.items[Z].tokens=this.lexer.blockTokens(X.items[Z].text,[]),!X.loose){let G=X.items[Z].tokens.filter((O)=>O.type==="space"),q=G.length>0&&G.some((O)=>/\n.*\n/.test(O.raw));X.loose=q}if(X.loose)for(let Z=0;Z<X.items.length;Z++)X.items[Z].loose=!0;return X}}html(J){let K=this.rules.block.html.exec(J);if(K)return{type:"html",block:!0,raw:K[0],pre:K[1]==="pre"||K[1]==="script"||K[1]==="style",text:K[0]}}def(J){let K=this.rules.block.def.exec(J);if(K){let Q=K[1].toLowerCase().replace(/\s+/g," "),V=K[2]?K[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",X=K[3]?K[3].substring(1,K[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):K[3];return{type:"def",tag:Q,raw:K[0],href:V,title:X}}}table(J){let K=this.rules.block.table.exec(J);if(!K)return;if(!/[:|]/.test(K[2]))return;let Q=r(K[1]),V=K[2].replace(/^\||\| *$/g,"").split("|"),X=K[3]&&K[3].trim()?K[3].replace(/\n[ \t]*$/,"").split("\n"):[],Y={type:"table",raw:K[0],header:[],align:[],rows:[]};if(Q.length!==V.length)return;for(let A of V)if(/^ *-+: *$/.test(A))Y.align.push("right");else if(/^ *:-+: *$/.test(A))Y.align.push("center");else if(/^ *:-+ *$/.test(A))Y.align.push("left");else Y.align.push(null);for(let A=0;A<Q.length;A++)Y.header.push({text:Q[A],tokens:this.lexer.inline(Q[A]),header:!0,align:Y.align[A]});for(let A of X)Y.rows.push(r(A,Y.header.length).map((Z,G)=>{return{text:Z,tokens:this.lexer.inline(Z),header:!1,align:Y.align[G]}}));return Y}lheading(J){let K=this.rules.block.lheading.exec(J);if(K)return{type:"heading",raw:K[0],depth:K[2].charAt(0)==="="?1:2,text:K[1],tokens:this.lexer.inline(K[1])}}paragraph(J){let K=this.rules.block.paragraph.exec(J);if(K){let Q=K[1].charAt(K[1].length-1)==="\n"?K[1].slice(0,-1):K[1];return{type:"paragraph",raw:K[0],text:Q,tokens:this.lexer.inline(Q)}}}text(J){let K=this.rules.block.text.exec(J);if(K)return{type:"text",raw:K[0],text:K[0],tokens:this.lexer.inline(K[0])}}escape(J){let K=this.rules.inline.escape.exec(J);if(K)return{type:"escape",raw:K[0],text:$(K[1])}}tag(J){let K=this.rules.inline.tag.exec(J);if(K){if(!this.lexer.state.inLink&&/^<a /i.test(K[0]))this.lexer.state.inLink=!0;else if(this.lexer.state.inLink&&/^<\/a>/i.test(K[0]))this.lexer.state.inLink=!1;if(!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(K[0]))this.lexer.state.inRawBlock=!0;else if(this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(K[0]))this.lexer.state.inRawBlock=!1;return{type:"html",raw:K[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:K[0]}}}link(J){let K=this.rules.inline.link.exec(J);if(K){let Q=K[2].trim();if(!this.options.pedantic&&/^</.test(Q)){if(!/>$/.test(Q))return;let Y=C(Q.slice(0,-1),"\\");if((Q.length-Y.length)%2===0)return}else{let Y=zJ(K[2],"()");if(Y>-1){let Z=(K[0].indexOf("!")===0?5:4)+K[1].length+Y;K[2]=K[2].substring(0,Y),K[0]=K[0].substring(0,Z).trim(),K[3]=""}}let V=K[2],X="";if(this.options.pedantic){let Y=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(V);if(Y)V=Y[1],X=Y[3]}else X=K[3]?K[3].slice(1,-1):"";if(V=V.trim(),/^</.test(V))if(this.options.pedantic&&!/>$/.test(Q))V=V.slice(1);else V=V.slice(1,-1);return t(K,{href:V?V.replace(this.rules.inline.anyPunctuation,"$1"):V,title:X?X.replace(this.rules.inline.anyPunctuation,"$1"):X},K[0],this.lexer)}}reflink(J,K){let Q;if((Q=this.rules.inline.reflink.exec(J))||(Q=this.rules.inline.nolink.exec(J))){let V=(Q[2]||Q[1]).replace(/\s+/g," "),X=K[V.toLowerCase()];if(!X){let Y=Q[0].charAt(0);return{type:"text",raw:Y,text:Y}}return t(Q,X,Q[0],this.lexer)}}emStrong(J,K,Q=""){let V=this.rules.inline.emStrongLDelim.exec(J);if(!V)return;if(V[3]&&Q.match(/[\p{L}\p{N}]/u))return;if(!(V[1]||V[2])||!Q||this.rules.inline.punctuation.exec(Q)){let Y=[...V[0]].length-1,A,Z,G=Y,q=0,O=V[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;O.lastIndex=0,K=K.slice(-1*J.length+Y);while((V=O.exec(K))!=null){if(A=V[1]||V[2]||V[3]||V[4]||V[5]||V[6],!A)continue;if(Z=[...A].length,V[3]||V[4]){G+=Z;continue}else if(V[5]||V[6]){if(Y%3&&!((Y+Z)%3)){q+=Z;continue}}if(G-=Z,G>0)continue;Z=Math.min(Z,Z+G+q);let U=[...V[0]][0].length,N=J.slice(0,Y+V.index+U+Z);if(Math.min(Y,Z)%2){let M=N.slice(1,-1);return{type:"em",raw:N,text:M,tokens:this.lexer.inlineTokens(M)}}let j=N.slice(2,-2);return{type:"strong",raw:N,text:j,tokens:this.lexer.inlineTokens(j)}}}}codespan(J){let K=this.rules.inline.code.exec(J);if(K){let Q=K[2].replace(/\n/g," "),V=/[^ ]/.test(Q),X=/^ /.test(Q)&&/ $/.test(Q);if(V&&X)Q=Q.substring(1,Q.length-1);return Q=$(Q,!0),{type:"codespan",raw:K[0],text:Q}}}br(J){let K=this.rules.inline.br.exec(J);if(K)return{type:"br",raw:K[0]}}del(J){let K=this.rules.inline.del.exec(J);if(K)return{type:"del",raw:K[0],text:K[2],tokens:this.lexer.inlineTokens(K[2])}}autolink(J){let K=this.rules.inline.autolink.exec(J);if(K){let Q,V;if(K[2]==="@")Q=$(K[1]),V="mailto:"+Q;else Q=$(K[1]),V=Q;return{type:"link",raw:K[0],text:Q,href:V,tokens:[{type:"text",raw:Q,text:Q}]}}}url(J){let K;if(K=this.rules.inline.url.exec(J)){let Q,V;if(K[2]==="@")Q=$(K[0]),V="mailto:"+Q;else{let X;do X=K[0],K[0]=this.rules.inline._backpedal.exec(K[0])?.[0]??"";while(X!==K[0]);if(Q=$(K[0]),K[1]==="www.")V="http://"+K[0];else V=K[0]}return{type:"link",raw:K[0],text:Q,href:V,tokens:[{type:"text",raw:Q,text:Q}]}}}inlineText(J){let K=this.rules.inline.text.exec(J);if(K){let Q;if(this.lexer.state.inRawBlock)Q=K[0];else Q=$(K[0]);return{type:"text",raw:K[0],text:Q}}}}var IJ=/^(?:[ \t]*(?:\n|$))+/,CJ=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,RJ=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,v=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,yJ=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,VJ=/(?:[*+-]|\d{1,9}[.)])/,XJ=W(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,VJ).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),m=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,PJ=/^[^\n]+/,d=/(?!\s*\])(?:\\.|[^\[\]\\])+/,SJ=W(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",d).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),wJ=W(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,VJ).getRegex(),_="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",p=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,vJ=W("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",p).replace("tag",_).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),YJ=W(m).replace("hr",v).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_).getRegex(),fJ=W(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",YJ).getRegex(),l={blockquote:fJ,code:CJ,def:SJ,fences:RJ,heading:yJ,hr:v,html:vJ,lheading:XJ,list:wJ,newline:IJ,paragraph:YJ,table:y,text:PJ},e=W("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",v).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_).getRegex(),LJ={...l,table:e,paragraph:W(m).replace("hr",v).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",e).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_).getRegex()},bJ={...l,html:W('^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|\'[^\']*\'|\\s[^\'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))').replace("comment",p).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:y,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:W(m).replace("hr",v).replace("heading"," *#{1,6} *[^\n]").replace("lheading",XJ).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},AJ=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,_J=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,ZJ=/^( {2,}|\\)\n(?!\s*$)/,TJ=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,f="\\p{P}\\p{S}",gJ=W(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,f).getRegex(),uJ=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,hJ=W(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,f).getRegex(),xJ=W("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,f).getRegex(),mJ=W("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,f).getRegex(),dJ=W(/\\([punct])/,"gu").replace(/punct/g,f).getRegex(),pJ=W(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),lJ=W(p).replace("(?:-->|$)","-->").getRegex(),iJ=W("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",lJ).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),b=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,kJ=W(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",b).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),qJ=W(/^!?\[(label)\]\[(ref)\]/).replace("label",b).replace("ref",d).getRegex(),GJ=W(/^!?\[(ref)\](?:\[\])?/).replace("ref",d).getRegex(),aJ=W("reflink|nolink(?!\\()","g").replace("reflink",qJ).replace("nolink",GJ).getRegex(),i={_backpedal:y,anyPunctuation:dJ,autolink:pJ,blockSkip:uJ,br:ZJ,code:_J,del:y,emStrongLDelim:hJ,emStrongRDelimAst:xJ,emStrongRDelimUnd:mJ,escape:AJ,link:kJ,nolink:GJ,punctuation:gJ,reflink:qJ,reflinkSearch:aJ,tag:iJ,text:TJ,url:y},cJ={...i,link:W(/^!?\[(label)\]\((.*?)\)/).replace("label",b).getRegex(),reflink:W(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",b).getRegex()},h={...i,escape:W(AJ).replace("])","~|])").getRegex(),url:W(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},oJ={...h,br:W(ZJ).replace("{2,}","*").getRegex(),text:W(h.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},L={normal:l,gfm:LJ,pedantic:bJ},R={normal:i,gfm:h,breaks:oJ,pedantic:cJ};class E{tokens;options;state;tokenizer;inlineQueue;constructor(J){this.tokens=[],this.tokens.links=Object.create(null),this.options=J||D,this.options.tokenizer=this.options.tokenizer||new S,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let K={block:L.normal,inline:R.normal};if(this.options.pedantic)K.block=L.pedantic,K.inline=R.pedantic;else if(this.options.gfm)if(K.block=L.gfm,this.options.breaks)K.inline=R.breaks;else K.inline=R.gfm;this.tokenizer.rules=K}static get rules(){return{block:L,inline:R}}static lex(J,K){return new E(K).lex(J)}static lexInline(J,K){return new E(K).inlineTokens(J)}lex(J){J=J.replace(/\r\n|\r/g,"\n"),this.blockTokens(J,this.tokens);for(let K=0;K<this.inlineQueue.length;K++){let Q=this.inlineQueue[K];this.inlineTokens(Q.src,Q.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(J,K=[],Q=!1){if(this.options.pedantic)J=J.replace(/\t/g,"    ").replace(/^ +$/gm,"");let V,X,Y;while(J){if(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((A)=>{if(V=A.call({lexer:this},J,K))return J=J.substring(V.raw.length),K.push(V),!0;return!1}))continue;if(V=this.tokenizer.space(J)){if(J=J.substring(V.raw.length),V.raw.length===1&&K.length>0)K[K.length-1].raw+="\n";else K.push(V);continue}if(V=this.tokenizer.code(J)){if(J=J.substring(V.raw.length),X=K[K.length-1],X&&(X.type==="paragraph"||X.type==="text"))X.raw+="\n"+V.raw,X.text+="\n"+V.text,this.inlineQueue[this.inlineQueue.length-1].src=X.text;else K.push(V);continue}if(V=this.tokenizer.fences(J)){J=J.substring(V.raw.length),K.push(V);continue}if(V=this.tokenizer.heading(J)){J=J.substring(V.raw.length),K.push(V);continue}if(V=this.tokenizer.hr(J)){J=J.substring(V.raw.length),K.push(V);continue}if(V=this.tokenizer.blockquote(J)){J=J.substring(V.raw.length),K.push(V);continue}if(V=this.tokenizer.list(J)){J=J.substring(V.raw.length),K.push(V);continue}if(V=this.tokenizer.html(J)){J=J.substring(V.raw.length),K.push(V);continue}if(V=this.tokenizer.def(J)){if(J=J.substring(V.raw.length),X=K[K.length-1],X&&(X.type==="paragraph"||X.type==="text"))X.raw+="\n"+V.raw,X.text+="\n"+V.raw,this.inlineQueue[this.inlineQueue.length-1].src=X.text;else if(!this.tokens.links[V.tag])this.tokens.links[V.tag]={href:V.href,title:V.title};continue}if(V=this.tokenizer.table(J)){J=J.substring(V.raw.length),K.push(V);continue}if(V=this.tokenizer.lheading(J)){J=J.substring(V.raw.length),K.push(V);continue}if(Y=J,this.options.extensions&&this.options.extensions.startBlock){let A=1/0,Z=J.slice(1),G;if(this.options.extensions.startBlock.forEach((q)=>{if(G=q.call({lexer:this},Z),typeof G==="number"&&G>=0)A=Math.min(A,G)}),A<1/0&&A>=0)Y=J.substring(0,A+1)}if(this.state.top&&(V=this.tokenizer.paragraph(Y))){if(X=K[K.length-1],Q&&X?.type==="paragraph")X.raw+="\n"+V.raw,X.text+="\n"+V.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=X.text;else K.push(V);Q=Y.length!==J.length,J=J.substring(V.raw.length);continue}if(V=this.tokenizer.text(J)){if(J=J.substring(V.raw.length),X=K[K.length-1],X&&X.type==="text")X.raw+="\n"+V.raw,X.text+="\n"+V.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=X.text;else K.push(V);continue}if(J){let A="Infinite loop on byte: "+J.charCodeAt(0);if(this.options.silent){console.error(A);break}else throw new Error(A)}}return this.state.top=!0,K}inline(J,K=[]){return this.inlineQueue.push({src:J,tokens:K}),K}inlineTokens(J,K=[]){let Q,V,X,Y=J,A,Z,G;if(this.tokens.links){let q=Object.keys(this.tokens.links);if(q.length>0){while((A=this.tokenizer.rules.inline.reflinkSearch.exec(Y))!=null)if(q.includes(A[0].slice(A[0].lastIndexOf("[")+1,-1)))Y=Y.slice(0,A.index)+"["+"a".repeat(A[0].length-2)+"]"+Y.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex)}}while((A=this.tokenizer.rules.inline.blockSkip.exec(Y))!=null)Y=Y.slice(0,A.index)+"["+"a".repeat(A[0].length-2)+"]"+Y.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);while((A=this.tokenizer.rules.inline.anyPunctuation.exec(Y))!=null)Y=Y.slice(0,A.index)+"++"+Y.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);while(J){if(!Z)G="";if(Z=!1,this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((q)=>{if(Q=q.call({lexer:this},J,K))return J=J.substring(Q.raw.length),K.push(Q),!0;return!1}))continue;if(Q=this.tokenizer.escape(J)){J=J.substring(Q.raw.length),K.push(Q);continue}if(Q=this.tokenizer.tag(J)){if(J=J.substring(Q.raw.length),V=K[K.length-1],V&&Q.type==="text"&&V.type==="text")V.raw+=Q.raw,V.text+=Q.text;else K.push(Q);continue}if(Q=this.tokenizer.link(J)){J=J.substring(Q.raw.length),K.push(Q);continue}if(Q=this.tokenizer.reflink(J,this.tokens.links)){if(J=J.substring(Q.raw.length),V=K[K.length-1],V&&Q.type==="text"&&V.type==="text")V.raw+=Q.raw,V.text+=Q.text;else K.push(Q);continue}if(Q=this.tokenizer.emStrong(J,Y,G)){J=J.substring(Q.raw.length),K.push(Q);continue}if(Q=this.tokenizer.codespan(J)){J=J.substring(Q.raw.length),K.push(Q);continue}if(Q=this.tokenizer.br(J)){J=J.substring(Q.raw.length),K.push(Q);continue}if(Q=this.tokenizer.del(J)){J=J.substring(Q.raw.length),K.push(Q);continue}if(Q=this.tokenizer.autolink(J)){J=J.substring(Q.raw.length),K.push(Q);continue}if(!this.state.inLink&&(Q=this.tokenizer.url(J))){J=J.substring(Q.raw.length),K.push(Q);continue}if(X=J,this.options.extensions&&this.options.extensions.startInline){let q=1/0,O=J.slice(1),U;if(this.options.extensions.startInline.forEach((N)=>{if(U=N.call({lexer:this},O),typeof U==="number"&&U>=0)q=Math.min(q,U)}),q<1/0&&q>=0)X=J.substring(0,q+1)}if(Q=this.tokenizer.inlineText(X)){if(J=J.substring(Q.raw.length),Q.raw.slice(-1)!=="_")G=Q.raw.slice(-1);if(Z=!0,V=K[K.length-1],V&&V.type==="text")V.raw+=Q.raw,V.text+=Q.text;else K.push(Q);continue}if(J){let q="Infinite loop on byte: "+J.charCodeAt(0);if(this.options.silent){console.error(q);break}else throw new Error(q)}}return K}}class w{options;parser;constructor(J){this.options=J||D}space(J){return""}code({text:J,lang:K,escaped:Q}){let V=(K||"").match(/^\S*/)?.[0],X=J.replace(/\n$/,"")+"\n";if(!V)return"<pre><code>"+(Q?X:$(X,!0))+"</code></pre>\n";return'<pre><code class="language-'+$(V)+'">'+(Q?X:$(X,!0))+"</code></pre>\n"}blockquote({tokens:J}){return`<blockquote>\n${this.parser.parse(J)}</blockquote>\n`}html({text:J}){return J}heading({tokens:J,depth:K}){return`<h${K}>${this.parser.parseInline(J)}</h${K}>\n`}hr(J){return"<hr>\n"}list(J){let{ordered:K,start:Q}=J,V="";for(let A=0;A<J.items.length;A++){let Z=J.items[A];V+=this.listitem(Z)}let X=K?"ol":"ul",Y=K&&Q!==1?' start="'+Q+'"':"";return"<"+X+Y+">\n"+V+"</"+X+">\n"}listitem(J){let K="";if(J.task){let Q=this.checkbox({checked:!!J.checked});if(J.loose)if(J.tokens.length>0&&J.tokens[0].type==="paragraph"){if(J.tokens[0].text=Q+" "+J.tokens[0].text,J.tokens[0].tokens&&J.tokens[0].tokens.length>0&&J.tokens[0].tokens[0].type==="text")J.tokens[0].tokens[0].text=Q+" "+J.tokens[0].tokens[0].text}else J.tokens.unshift({type:"text",raw:Q+" ",text:Q+" "});else K+=Q+" "}return K+=this.parser.parse(J.tokens,!!J.loose),`<li>${K}</li>\n`}checkbox({checked:J}){return"<input "+(J?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:J}){return`<p>${this.parser.parseInline(J)}</p>\n`}table(J){let K="",Q="";for(let X=0;X<J.header.length;X++)Q+=this.tablecell(J.header[X]);K+=this.tablerow({text:Q});let V="";for(let X=0;X<J.rows.length;X++){let Y=J.rows[X];Q="";for(let A=0;A<Y.length;A++)Q+=this.tablecell(Y[A]);V+=this.tablerow({text:Q})}if(V)V=`<tbody>${V}</tbody>`;return"<table>\n<thead>\n"+K+"</thead>\n"+V+"</table>\n"}tablerow({text:J}){return`<tr>\n${J}</tr>\n`}tablecell(J){let K=this.parser.parseInline(J.tokens),Q=J.header?"th":"td";return(J.align?`<${Q} align="${J.align}">`:`<${Q}>`)+K+`</${Q}>\n`}strong({tokens:J}){return`<strong>${this.parser.parseInline(J)}</strong>`}em({tokens:J}){return`<em>${this.parser.parseInline(J)}</em>`}codespan({text:J}){return`<code>${J}</code>`}br(J){return"<br>"}del({tokens:J}){return`<del>${this.parser.parseInline(J)}</del>`}link({href:J,title:K,tokens:Q}){let V=this.parser.parseInline(Q),X=n(J);if(X===null)return V;J=X;let Y='<a href="'+J+'"';if(K)Y+=' title="'+K+'"';return Y+=">"+V+"</a>",Y}image({href:J,title:K,text:Q}){let V=n(J);if(V===null)return Q;J=V;let X=`<img src="${J}" alt="${Q}"`;if(K)X+=` title="${K}"`;return X+=">",X}text(J){return"tokens"in J&&J.tokens?this.parser.parseInline(J.tokens):J.text}}class T{strong({text:J}){return J}em({text:J}){return J}codespan({text:J}){return J}del({text:J}){return J}html({text:J}){return J}text({text:J}){return J}link({text:J}){return""+J}image({text:J}){return""+J}br(){return""}}class H{options;renderer;textRenderer;constructor(J){this.options=J||D,this.options.renderer=this.options.renderer||new w,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new T}static parse(J,K){return new H(K).parse(J)}static parseInline(J,K){return new H(K).parseInline(J)}parse(J,K=!0){let Q="";for(let V=0;V<J.length;V++){let X=J[V];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[X.type]){let A=X,Z=this.options.extensions.renderers[A.type].call({parser:this},A);if(Z!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(A.type)){Q+=Z||"";continue}}let Y=X;switch(Y.type){case"space":{Q+=this.renderer.space(Y);continue}case"hr":{Q+=this.renderer.hr(Y);continue}case"heading":{Q+=this.renderer.heading(Y);continue}case"code":{Q+=this.renderer.code(Y);continue}case"table":{Q+=this.renderer.table(Y);continue}case"blockquote":{Q+=this.renderer.blockquote(Y);continue}case"list":{Q+=this.renderer.list(Y);continue}case"html":{Q+=this.renderer.html(Y);continue}case"paragraph":{Q+=this.renderer.paragraph(Y);continue}case"text":{let A=Y,Z=this.renderer.text(A);while(V+1<J.length&&J[V+1].type==="text")A=J[++V],Z+="\n"+this.renderer.text(A);if(K)Q+=this.renderer.paragraph({type:"paragraph",raw:Z,text:Z,tokens:[{type:"text",raw:Z,text:Z}]});else Q+=Z;continue}default:{let A='Token with "'+Y.type+'" type was not found.';if(this.options.silent)return console.error(A),"";else throw new Error(A)}}}return Q}parseInline(J,K){K=K||this.renderer;let Q="";for(let V=0;V<J.length;V++){let X=J[V];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[X.type]){let A=this.options.extensions.renderers[X.type].call({parser:this},X);if(A!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(X.type)){Q+=A||"";continue}}let Y=X;switch(Y.type){case"escape":{Q+=K.text(Y);break}case"html":{Q+=K.html(Y);break}case"link":{Q+=K.link(Y);break}case"image":{Q+=K.image(Y);break}case"strong":{Q+=K.strong(Y);break}case"em":{Q+=K.em(Y);break}case"codespan":{Q+=K.codespan(Y);break}case"br":{Q+=K.br(Y);break}case"del":{Q+=K.del(Y);break}case"text":{Q+=K.text(Y);break}default:{let A='Token with "'+Y.type+'" type was not found.';if(this.options.silent)return console.error(A),"";else throw new Error(A)}}}return Q}}class P{options;block;constructor(J){this.options=J||D}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(J){return J}postprocess(J){return J}processAllTokens(J){return J}provideLexer(){return this.block?E.lex:E.lexInline}provideParser(){return this.block?H.parse:H.parseInline}}class OJ{defaults=x();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=H;Renderer=w;TextRenderer=T;Lexer=E;Tokenizer=S;Hooks=P;constructor(...J){this.use(...J)}walkTokens(J,K){let Q=[];for(let V of J)switch(Q=Q.concat(K.call(this,V)),V.type){case"table":{let X=V;for(let Y of X.header)Q=Q.concat(this.walkTokens(Y.tokens,K));for(let Y of X.rows)for(let A of Y)Q=Q.concat(this.walkTokens(A.tokens,K));break}case"list":{let X=V;Q=Q.concat(this.walkTokens(X.items,K));break}default:{let X=V;if(this.defaults.extensions?.childTokens?.[X.type])this.defaults.extensions.childTokens[X.type].forEach((Y)=>{let A=X[Y].flat(1/0);Q=Q.concat(this.walkTokens(A,K))});else if(X.tokens)Q=Q.concat(this.walkTokens(X.tokens,K))}}return Q}use(...J){let K=this.defaults.extensions||{renderers:{},childTokens:{}};return J.forEach((Q)=>{let V={...Q};if(V.async=this.defaults.async||V.async||!1,Q.extensions)Q.extensions.forEach((X)=>{if(!X.name)throw new Error("extension name required");if("renderer"in X){let Y=K.renderers[X.name];if(Y)K.renderers[X.name]=function(...A){let Z=X.renderer.apply(this,A);if(Z===!1)Z=Y.apply(this,A);return Z};else K.renderers[X.name]=X.renderer}if("tokenizer"in X){if(!X.level||X.level!=="block"&&X.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let Y=K[X.level];if(Y)Y.unshift(X.tokenizer);else K[X.level]=[X.tokenizer];if(X.start){if(X.level==="block")if(K.startBlock)K.startBlock.push(X.start);else K.startBlock=[X.start];else if(X.level==="inline")if(K.startInline)K.startInline.push(X.start);else K.startInline=[X.start]}}if("childTokens"in X&&X.childTokens)K.childTokens[X.name]=X.childTokens}),V.extensions=K;if(Q.renderer){let X=this.defaults.renderer||new w(this.defaults);for(let Y in Q.renderer){if(!(Y in X))throw new Error(`renderer '${Y}' does not exist`);if(["options","parser"].includes(Y))continue;let A=Y,Z=Q.renderer[A],G=X[A];X[A]=(...q)=>{let O=Z.apply(X,q);if(O===!1)O=G.apply(X,q);return O||""}}V.renderer=X}if(Q.tokenizer){let X=this.defaults.tokenizer||new S(this.defaults);for(let Y in Q.tokenizer){if(!(Y in X))throw new Error(`tokenizer '${Y}' does not exist`);if(["options","rules","lexer"].includes(Y))continue;let A=Y,Z=Q.tokenizer[A],G=X[A];X[A]=(...q)=>{let O=Z.apply(X,q);if(O===!1)O=G.apply(X,q);return O}}V.tokenizer=X}if(Q.hooks){let X=this.defaults.hooks||new P;for(let Y in Q.hooks){if(!(Y in X))throw new Error(`hook '${Y}' does not exist`);if(["options","block"].includes(Y))continue;let A=Y,Z=Q.hooks[A],G=X[A];if(P.passThroughHooks.has(Y))X[A]=(q)=>{if(this.defaults.async)return Promise.resolve(Z.call(X,q)).then((U)=>{return G.call(X,U)});let O=Z.call(X,q);return G.call(X,O)};else X[A]=(...q)=>{let O=Z.apply(X,q);if(O===!1)O=G.apply(X,q);return O}}V.hooks=X}if(Q.walkTokens){let X=this.defaults.walkTokens,Y=Q.walkTokens;V.walkTokens=function(A){let Z=[];if(Z.push(Y.call(this,A)),X)Z=Z.concat(X.call(this,A));return Z}}this.defaults={...this.defaults,...V}}),this}setOptions(J){return this.defaults={...this.defaults,...J},this}lexer(J,K){return E.lex(J,K??this.defaults)}parser(J,K){return H.parse(J,K??this.defaults)}parseMarkdown(J){return(Q,V)=>{let X={...V},Y={...this.defaults,...X},A=this.onError(!!Y.silent,!!Y.async);if(this.defaults.async===!0&&X.async===!1)return A(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof Q==="undefined"||Q===null)return A(new Error("marked(): input parameter is undefined or null"));if(typeof Q!=="string")return A(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(Q)+", string expected"));if(Y.hooks)Y.hooks.options=Y,Y.hooks.block=J;let Z=Y.hooks?Y.hooks.provideLexer():J?E.lex:E.lexInline,G=Y.hooks?Y.hooks.provideParser():J?H.parse:H.parseInline;if(Y.async)return Promise.resolve(Y.hooks?Y.hooks.preprocess(Q):Q).then((q)=>Z(q,Y)).then((q)=>Y.hooks?Y.hooks.processAllTokens(q):q).then((q)=>Y.walkTokens?Promise.all(this.walkTokens(q,Y.walkTokens)).then(()=>q):q).then((q)=>G(q,Y)).then((q)=>Y.hooks?Y.hooks.postprocess(q):q).catch(A);try{if(Y.hooks)Q=Y.hooks.preprocess(Q);let q=Z(Q,Y);if(Y.hooks)q=Y.hooks.processAllTokens(q);if(Y.walkTokens)this.walkTokens(q,Y.walkTokens);let O=G(q,Y);if(Y.hooks)O=Y.hooks.postprocess(O);return O}catch(q){return A(q)}}}onError(J,K){return(Q)=>{if(Q.message+="\nPlease report this to https://github.com/markedjs/marked.",J){let V="<p>An error occurred:</p><pre>"+$(Q.message+"",!0)+"</pre>";if(K)return Promise.resolve(V);return V}if(K)return Promise.reject(Q);throw Q}}}var z=new OJ;function F(J,K){return z.parse(J,K)}F.options=F.setOptions=function(J){return z.setOptions(J),F.defaults=z.defaults,JJ(F.defaults),F};F.getDefaults=x;F.defaults=D;F.use=function(...J){return z.use(...J),F.defaults=z.defaults,JJ(F.defaults),F};F.walkTokens=function(J,K){return z.walkTokens(J,K)};F.parseInline=z.parseInline;F.Parser=H;F.parser=H.parse;F.Renderer=w;F.TextRenderer=T;F.Lexer=E;F.lexer=E.lex;F.Tokenizer=S;F.Hooks=P;F.parse=F;var{options:JK,setOptions:KK,use:QK,walkTokens:VK,parseInline:XK}=F;var YK=H.parse,AK=E.lex;var sJ=document.querySelectorAll("button");for(let J of sJ)J.addEventListener("click",(K)=>{let V=K.target.innerText;k(V)});var FJ=document.getElementById("prompt__input");if(FJ)FJ.addEventListener("keydown",(J)=>{if(J.key==="Enter"){J.preventDefault();let K=NJ();k(K)}});var WJ=document.getElementById("prompt__submit");if(WJ)WJ.addEventListener("click",(J)=>{J.preventDefault();let K=NJ();k(K)});function k(J){if(J!=="")tJ(J),eJ(J)}function nJ(){let J=document.querySelector('[data-role="system__logo"]');if(!J)return null;return J.cloneNode(!0)}function rJ(){let J=document.querySelectorAll("a:not(#footprint__link)");for(let K of J)K.target="_blank"}function jJ(){let J=document.querySelector("main");if(J)J.scrollTop=J.scrollHeight}function NJ(){let J=document.getElementById("prompt__input");if(J){let{value:K}=J;return J.value="",K}return"Bonjour !"}function UJ(J){document.querySelector('[data-role="system__loading"]')?.remove();let Q=document.querySelector("main > div:last-child");if(!Q)return;Q.classList.add("prose");let V=J.replace(/<br\/>/g,"\n\n").replace(/\n{3,}/g,"\n\n");Q.innerHTML=F.parse(V),rJ(),jJ()}function tJ(J){let K=document.querySelector("main");if(!K)return;let Q=document.createElement("div");Q.setAttribute("data-role","user"),Q.classList.add("user"),Q.textContent=J;let V=document.createElement("div");V.setAttribute("data-role","system");let X=document.createElement("div");X.classList.add("thinking"),V.appendChild(X);let Y=nJ(),A=document.createDocumentFragment();A.appendChild(Q),A.appendChild(Y),A.appendChild(V),K.appendChild(A),jJ()}function eJ(J){let K=document.getElementById("prompt__submit");K.disabled=!0;let Q=document.getElementsByTagName("button");for(let q of Q)q.disabled=!0;let V=window.location.pathname.substring(3),X=new URLSearchParams(window.location.search).get("config"),Y=new URLSearchParams(window.location.search).get("context"),A=`/ai/${V}?message=${encodeURIComponent(J)}&config=${encodeURIComponent(X||"")}&context=${encodeURIComponent(Y||"")}`,Z=new EventSource(A),G="";Z.onmessage=(q)=>{if(q.data!=="pierre_event_stream_closed")G+=q.data,UJ(G);else{Z.close(),K.disabled=!1;for(let O of Q)O.disabled=!1}},Z.onerror=(q)=>{if(console.error("An error occurred with the EventSource:",q),Z.readyState===EventSource.CLOSED)console.error("Connection closed due to incomplete chunked encoding."),G+=" **/ Erreur-r\xE9seau : v\xE9rifier votre connexion et rafraichissez la page.** ",UJ(G),Z.close()}}
