function m(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var I=m();function KJ(J){I=J}var P={exec:()=>null};function F(J,K=""){let Q=typeof J==="string"?J:J.source,V={replace:(X,Y)=>{let A=typeof Y==="string"?Y:Y.source;return A=A.replace(j.caret,"$1"),Q=Q.replace(X,A),V},getRegex:()=>{return new RegExp(Q,K)}};return V}var j={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:(J)=>new RegExp(`^( {0,3}${J})((?:[\t ][^\\n]*)?(?:\\n|\$))`),nextBulletRegex:(J)=>new RegExp(`^ {0,${Math.min(3,J-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|\$))`),hrRegex:(J)=>new RegExp(`^ {0,${Math.min(3,J-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|\$)`),fencesBeginRegex:(J)=>new RegExp(`^ {0,${Math.min(3,J-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:(J)=>new RegExp(`^ {0,${Math.min(3,J-1)}}#`),htmlBeginRegex:(J)=>new RegExp(`^ {0,${Math.min(3,J-1)}}<(?:[a-z].*>|!--)`,"i")},jJ=/^(?:[ \t]*(?:\n|$))+/,EJ=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,MJ=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,f=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,HJ=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,QJ=/(?:[*+-]|\d{1,9}[.)])/,VJ=F(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,QJ).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),d=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,BJ=/^[^\n]+/,p=/(?!\s*\])(?:\\.|[^\[\]\\])+/,zJ=F(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",p).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),DJ=F(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,QJ).getRegex(),_="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",l=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,IJ=F("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",l).replace("tag",_).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),XJ=F(d).replace("hr",f).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_).getRegex(),RJ=F(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",XJ).getRegex(),i={blockquote:RJ,code:EJ,def:zJ,fences:MJ,heading:HJ,hr:f,html:IJ,lheading:VJ,list:DJ,newline:jJ,paragraph:XJ,table:P,text:BJ},n=F("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",f).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_).getRegex(),CJ={...i,table:n,paragraph:F(d).replace("hr",f).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",n).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_).getRegex()},yJ={...i,html:F('^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|\'[^\']*\'|\\s[^\'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))').replace("comment",l).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:P,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:F(d).replace("hr",f).replace("heading"," *#{1,6} *[^\n]").replace("lheading",VJ).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},YJ=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,PJ=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,AJ=/^( {2,}|\\)\n(?!\s*$)/,SJ=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,L="\\p{P}\\p{S}",wJ=F(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,L).getRegex(),vJ=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,fJ=F(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,L).getRegex(),LJ=F("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,L).getRegex(),bJ=F("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,L).getRegex(),TJ=F(/\\([punct])/,"gu").replace(/punct/g,L).getRegex(),_J=F(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),gJ=F(l).replace("(?:-->|$)","-->").getRegex(),uJ=F("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",gJ).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),T=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,hJ=F(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",T).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),ZJ=F(/^!?\[(label)\]\[(ref)\]/).replace("label",T).replace("ref",p).getRegex(),$J=F(/^!?\[(ref)\](?:\[\])?/).replace("ref",p).getRegex(),xJ=F("reflink|nolink(?!\\()","g").replace("reflink",ZJ).replace("nolink",$J).getRegex(),k={_backpedal:P,anyPunctuation:TJ,autolink:_J,blockSkip:vJ,br:AJ,code:PJ,del:P,emStrongLDelim:fJ,emStrongRDelimAst:LJ,emStrongRDelimUnd:bJ,escape:YJ,link:hJ,nolink:$J,punctuation:wJ,reflink:ZJ,reflinkSearch:xJ,tag:uJ,text:SJ,url:P},mJ={...k,link:F(/^!?\[(label)\]\((.*?)\)/).replace("label",T).getRegex(),reflink:F(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",T).getRegex()},x={...k,escape:F(YJ).replace("])","~|])").getRegex(),url:F(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},dJ={...x,br:F(AJ).replace("{2,}","*").getRegex(),text:F(x.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},b={normal:i,gfm:CJ,pedantic:yJ},C={normal:k,gfm:x,breaks:dJ,pedantic:mJ},pJ={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},r=(J)=>pJ[J];function z(J,K){if(K){if(j.escapeTest.test(J))return J.replace(j.escapeReplace,r)}else if(j.escapeTestNoEncode.test(J))return J.replace(j.escapeReplaceNoEncode,r);return J}function t(J){try{J=encodeURI(J).replace(j.percentDecode,"%")}catch{return null}return J}function e(J,K){let Q=J.replace(j.findPipe,(Y,A,Z)=>{let q=!1,$=A;while(--$>=0&&Z[$]==="\\")q=!q;if(q)return"|";else return" |"}),V=Q.split(j.splitPipe),X=0;if(!V[0].trim())V.shift();if(V.length>0&&!V[V.length-1].trim())V.pop();if(K)if(V.length>K)V.splice(K);else while(V.length<K)V.push("");for(;X<V.length;X++)V[X]=V[X].trim().replace(j.slashPipe,"|");return V}function y(J,K,Q){let V=J.length;if(V===0)return"";let X=0;while(X<V){let Y=J.charAt(V-X-1);if(Y===K&&!Q)X++;else if(Y!==K&&Q)X++;else break}return J.slice(0,V-X)}function lJ(J,K){if(J.indexOf(K[1])===-1)return-1;let Q=0;for(let V=0;V<J.length;V++)if(J[V]==="\\")V++;else if(J[V]===K[0])Q++;else if(J[V]===K[1]){if(Q--,Q<0)return V}return-1}function JJ(J,K,Q,V,X){let Y=K.href,A=K.title||null,Z=J[1].replace(X.other.outputLinkReplace,"$1");if(J[0].charAt(0)!=="!"){V.state.inLink=!0;let q={type:"link",raw:Q,href:Y,title:A,text:Z,tokens:V.inlineTokens(Z)};return V.state.inLink=!1,q}return{type:"image",raw:Q,href:Y,title:A,text:Z}}function iJ(J,K,Q){let V=J.match(Q.other.indentCodeCompensation);if(V===null)return K;let X=V[1];return K.split("\n").map((Y)=>{let A=Y.match(Q.other.beginningSpace);if(A===null)return Y;let[Z]=A;if(Z.length>=X.length)return Y.slice(X.length);return Y}).join("\n")}class w{options;rules;lexer;constructor(J){this.options=J||I}space(J){let K=this.rules.block.newline.exec(J);if(K&&K[0].length>0)return{type:"space",raw:K[0]}}code(J){let K=this.rules.block.code.exec(J);if(K){let Q=K[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:K[0],codeBlockStyle:"indented",text:!this.options.pedantic?y(Q,"\n"):Q}}}fences(J){let K=this.rules.block.fences.exec(J);if(K){let Q=K[0],V=iJ(Q,K[3]||"",this.rules);return{type:"code",raw:Q,lang:K[2]?K[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):K[2],text:V}}}heading(J){let K=this.rules.block.heading.exec(J);if(K){let Q=K[2].trim();if(this.rules.other.endingHash.test(Q)){let V=y(Q,"#");if(this.options.pedantic)Q=V.trim();else if(!V||this.rules.other.endingSpaceChar.test(V))Q=V.trim()}return{type:"heading",raw:K[0],depth:K[1].length,text:Q,tokens:this.lexer.inline(Q)}}}hr(J){let K=this.rules.block.hr.exec(J);if(K)return{type:"hr",raw:y(K[0],"\n")}}blockquote(J){let K=this.rules.block.blockquote.exec(J);if(K){let Q=y(K[0],"\n").split("\n"),V="",X="",Y=[];while(Q.length>0){let A=!1,Z=[],q;for(q=0;q<Q.length;q++)if(this.rules.other.blockquoteStart.test(Q[q]))Z.push(Q[q]),A=!0;else if(!A)Z.push(Q[q]);else break;Q=Q.slice(q);let $=Z.join("\n"),G=$.replace(this.rules.other.blockquoteSetextReplace,"\n    $1").replace(this.rules.other.blockquoteSetextReplace2,"");V=V?`${V}\n${$}`:$,X=X?`${X}\n${G}`:G;let W=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(G,Y,!0),this.lexer.state.top=W,Q.length===0)break;let N=Y[Y.length-1];if(N?.type==="code")break;else if(N?.type==="blockquote"){let U=N,E=U.raw+"\n"+Q.join("\n"),B=this.blockquote(E);Y[Y.length-1]=B,V=V.substring(0,V.length-U.raw.length)+B.raw,X=X.substring(0,X.length-U.text.length)+B.text;break}else if(N?.type==="list"){let U=N,E=U.raw+"\n"+Q.join("\n"),B=this.list(E);Y[Y.length-1]=B,V=V.substring(0,V.length-N.raw.length)+B.raw,X=X.substring(0,X.length-U.raw.length)+B.raw,Q=E.substring(Y[Y.length-1].raw.length).split("\n");continue}}return{type:"blockquote",raw:V,tokens:Y,text:X}}}list(J){let K=this.rules.block.list.exec(J);if(K){let Q=K[1].trim(),V=Q.length>1,X={type:"list",raw:"",ordered:V,start:V?+Q.slice(0,-1):"",loose:!1,items:[]};if(Q=V?`\\d{1,9}\\${Q.slice(-1)}`:`\\${Q}`,this.options.pedantic)Q=V?Q:"[*+-]";let Y=this.rules.other.listItemRegex(Q),A=!1;while(J){let Z=!1,q="",$="";if(!(K=Y.exec(J)))break;if(this.rules.block.hr.test(J))break;q=K[0],J=J.substring(q.length);let G=K[2].split("\n",1)[0].replace(this.rules.other.listReplaceTabs,(u)=>" ".repeat(3*u.length)),W=J.split("\n",1)[0],N=!G.trim(),U=0;if(this.options.pedantic)U=2,$=G.trimStart();else if(N)U=K[1].length+1;else U=K[2].search(this.rules.other.nonSpaceChar),U=U>4?1:U,$=G.slice(U),U+=K[1].length;if(N&&this.rules.other.blankLine.test(W))q+=W+"\n",J=J.substring(W.length+1),Z=!0;if(!Z){let u=this.rules.other.nextBulletRegex(U),c=this.rules.other.hrRegex(U),o=this.rules.other.fencesBeginRegex(U),s=this.rules.other.headingBeginRegex(U),NJ=this.rules.other.htmlBeginRegex(U);while(J){let h=J.split("\n",1)[0],R;if(W=h,this.options.pedantic)W=W.replace(this.rules.other.listReplaceNesting,"  "),R=W;else R=W.replace(this.rules.other.tabCharGlobal,"    ");if(o.test(W))break;if(s.test(W))break;if(NJ.test(W))break;if(u.test(W))break;if(c.test(W))break;if(R.search(this.rules.other.nonSpaceChar)>=U||!W.trim())$+="\n"+R.slice(U);else{if(N)break;if(G.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4)break;if(o.test(G))break;if(s.test(G))break;if(c.test(G))break;$+="\n"+W}if(!N&&!W.trim())N=!0;q+=h+"\n",J=J.substring(h.length+1),G=R.slice(U)}}if(!X.loose){if(A)X.loose=!0;else if(this.rules.other.doubleBlankLine.test(q))A=!0}let E=null,B;if(this.options.gfm){if(E=this.rules.other.listIsTask.exec($),E)B=E[0]!=="[ ] ",$=$.replace(this.rules.other.listReplaceTask,"")}X.items.push({type:"list_item",raw:q,task:!!E,checked:B,loose:!1,text:$,tokens:[]}),X.raw+=q}X.items[X.items.length-1].raw=X.items[X.items.length-1].raw.trimEnd(),X.items[X.items.length-1].text=X.items[X.items.length-1].text.trimEnd(),X.raw=X.raw.trimEnd();for(let Z=0;Z<X.items.length;Z++)if(this.lexer.state.top=!1,X.items[Z].tokens=this.lexer.blockTokens(X.items[Z].text,[]),!X.loose){let q=X.items[Z].tokens.filter((G)=>G.type==="space"),$=q.length>0&&q.some((G)=>this.rules.other.anyLine.test(G.raw));X.loose=$}if(X.loose)for(let Z=0;Z<X.items.length;Z++)X.items[Z].loose=!0;return X}}html(J){let K=this.rules.block.html.exec(J);if(K)return{type:"html",block:!0,raw:K[0],pre:K[1]==="pre"||K[1]==="script"||K[1]==="style",text:K[0]}}def(J){let K=this.rules.block.def.exec(J);if(K){let Q=K[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),V=K[2]?K[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",X=K[3]?K[3].substring(1,K[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):K[3];return{type:"def",tag:Q,raw:K[0],href:V,title:X}}}table(J){let K=this.rules.block.table.exec(J);if(!K)return;if(!this.rules.other.tableDelimiter.test(K[2]))return;let Q=e(K[1]),V=K[2].replace(this.rules.other.tableAlignChars,"").split("|"),X=K[3]&&K[3].trim()?K[3].replace(this.rules.other.tableRowBlankLine,"").split("\n"):[],Y={type:"table",raw:K[0],header:[],align:[],rows:[]};if(Q.length!==V.length)return;for(let A of V)if(this.rules.other.tableAlignRight.test(A))Y.align.push("right");else if(this.rules.other.tableAlignCenter.test(A))Y.align.push("center");else if(this.rules.other.tableAlignLeft.test(A))Y.align.push("left");else Y.align.push(null);for(let A=0;A<Q.length;A++)Y.header.push({text:Q[A],tokens:this.lexer.inline(Q[A]),header:!0,align:Y.align[A]});for(let A of X)Y.rows.push(e(A,Y.header.length).map((Z,q)=>{return{text:Z,tokens:this.lexer.inline(Z),header:!1,align:Y.align[q]}}));return Y}lheading(J){let K=this.rules.block.lheading.exec(J);if(K)return{type:"heading",raw:K[0],depth:K[2].charAt(0)==="="?1:2,text:K[1],tokens:this.lexer.inline(K[1])}}paragraph(J){let K=this.rules.block.paragraph.exec(J);if(K){let Q=K[1].charAt(K[1].length-1)==="\n"?K[1].slice(0,-1):K[1];return{type:"paragraph",raw:K[0],text:Q,tokens:this.lexer.inline(Q)}}}text(J){let K=this.rules.block.text.exec(J);if(K)return{type:"text",raw:K[0],text:K[0],tokens:this.lexer.inline(K[0])}}escape(J){let K=this.rules.inline.escape.exec(J);if(K)return{type:"escape",raw:K[0],text:K[1]}}tag(J){let K=this.rules.inline.tag.exec(J);if(K){if(!this.lexer.state.inLink&&this.rules.other.startATag.test(K[0]))this.lexer.state.inLink=!0;else if(this.lexer.state.inLink&&this.rules.other.endATag.test(K[0]))this.lexer.state.inLink=!1;if(!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(K[0]))this.lexer.state.inRawBlock=!0;else if(this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(K[0]))this.lexer.state.inRawBlock=!1;return{type:"html",raw:K[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:K[0]}}}link(J){let K=this.rules.inline.link.exec(J);if(K){let Q=K[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(Q)){if(!this.rules.other.endAngleBracket.test(Q))return;let Y=y(Q.slice(0,-1),"\\");if((Q.length-Y.length)%2===0)return}else{let Y=lJ(K[2],"()");if(Y>-1){let Z=(K[0].indexOf("!")===0?5:4)+K[1].length+Y;K[2]=K[2].substring(0,Y),K[0]=K[0].substring(0,Z).trim(),K[3]=""}}let V=K[2],X="";if(this.options.pedantic){let Y=this.rules.other.pedanticHrefTitle.exec(V);if(Y)V=Y[1],X=Y[3]}else X=K[3]?K[3].slice(1,-1):"";if(V=V.trim(),this.rules.other.startAngleBracket.test(V))if(this.options.pedantic&&!this.rules.other.endAngleBracket.test(Q))V=V.slice(1);else V=V.slice(1,-1);return JJ(K,{href:V?V.replace(this.rules.inline.anyPunctuation,"$1"):V,title:X?X.replace(this.rules.inline.anyPunctuation,"$1"):X},K[0],this.lexer,this.rules)}}reflink(J,K){let Q;if((Q=this.rules.inline.reflink.exec(J))||(Q=this.rules.inline.nolink.exec(J))){let V=(Q[2]||Q[1]).replace(this.rules.other.multipleSpaceGlobal," "),X=K[V.toLowerCase()];if(!X){let Y=Q[0].charAt(0);return{type:"text",raw:Y,text:Y}}return JJ(Q,X,Q[0],this.lexer,this.rules)}}emStrong(J,K,Q=""){let V=this.rules.inline.emStrongLDelim.exec(J);if(!V)return;if(V[3]&&Q.match(this.rules.other.unicodeAlphaNumeric))return;if(!(V[1]||V[2])||!Q||this.rules.inline.punctuation.exec(Q)){let Y=[...V[0]].length-1,A,Z,q=Y,$=0,G=V[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;G.lastIndex=0,K=K.slice(-1*J.length+Y);while((V=G.exec(K))!=null){if(A=V[1]||V[2]||V[3]||V[4]||V[5]||V[6],!A)continue;if(Z=[...A].length,V[3]||V[4]){q+=Z;continue}else if(V[5]||V[6]){if(Y%3&&!((Y+Z)%3)){$+=Z;continue}}if(q-=Z,q>0)continue;Z=Math.min(Z,Z+q+$);let W=[...V[0]][0].length,N=J.slice(0,Y+V.index+W+Z);if(Math.min(Y,Z)%2){let E=N.slice(1,-1);return{type:"em",raw:N,text:E,tokens:this.lexer.inlineTokens(E)}}let U=N.slice(2,-2);return{type:"strong",raw:N,text:U,tokens:this.lexer.inlineTokens(U)}}}}codespan(J){let K=this.rules.inline.code.exec(J);if(K){let Q=K[2].replace(this.rules.other.newLineCharGlobal," "),V=this.rules.other.nonSpaceChar.test(Q),X=this.rules.other.startingSpaceChar.test(Q)&&this.rules.other.endingSpaceChar.test(Q);if(V&&X)Q=Q.substring(1,Q.length-1);return{type:"codespan",raw:K[0],text:Q}}}br(J){let K=this.rules.inline.br.exec(J);if(K)return{type:"br",raw:K[0]}}del(J){let K=this.rules.inline.del.exec(J);if(K)return{type:"del",raw:K[0],text:K[2],tokens:this.lexer.inlineTokens(K[2])}}autolink(J){let K=this.rules.inline.autolink.exec(J);if(K){let Q,V;if(K[2]==="@")Q=K[1],V="mailto:"+Q;else Q=K[1],V=Q;return{type:"link",raw:K[0],text:Q,href:V,tokens:[{type:"text",raw:Q,text:Q}]}}}url(J){let K;if(K=this.rules.inline.url.exec(J)){let Q,V;if(K[2]==="@")Q=K[0],V="mailto:"+Q;else{let X;do X=K[0],K[0]=this.rules.inline._backpedal.exec(K[0])?.[0]??"";while(X!==K[0]);if(Q=K[0],K[1]==="www.")V="http://"+K[0];else V=K[0]}return{type:"link",raw:K[0],text:Q,href:V,tokens:[{type:"text",raw:Q,text:Q}]}}}inlineText(J){let K=this.rules.inline.text.exec(J);if(K){let Q=this.lexer.state.inRawBlock;return{type:"text",raw:K[0],text:K[0],escaped:Q}}}}class M{tokens;options;state;tokenizer;inlineQueue;constructor(J){this.tokens=[],this.tokens.links=Object.create(null),this.options=J||I,this.options.tokenizer=this.options.tokenizer||new w,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let K={other:j,block:b.normal,inline:C.normal};if(this.options.pedantic)K.block=b.pedantic,K.inline=C.pedantic;else if(this.options.gfm)if(K.block=b.gfm,this.options.breaks)K.inline=C.breaks;else K.inline=C.gfm;this.tokenizer.rules=K}static get rules(){return{block:b,inline:C}}static lex(J,K){return new M(K).lex(J)}static lexInline(J,K){return new M(K).inlineTokens(J)}lex(J){J=J.replace(j.carriageReturn,"\n"),this.blockTokens(J,this.tokens);for(let K=0;K<this.inlineQueue.length;K++){let Q=this.inlineQueue[K];this.inlineTokens(Q.src,Q.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(J,K=[],Q=!1){if(this.options.pedantic)J=J.replace(j.tabCharGlobal,"    ").replace(j.spaceLine,"");let V,X,Y;while(J){if(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((A)=>{if(V=A.call({lexer:this},J,K))return J=J.substring(V.raw.length),K.push(V),!0;return!1}))continue;if(V=this.tokenizer.space(J)){if(J=J.substring(V.raw.length),V.raw.length===1&&K.length>0)K[K.length-1].raw+="\n";else K.push(V);continue}if(V=this.tokenizer.code(J)){if(J=J.substring(V.raw.length),X=K[K.length-1],X&&(X.type==="paragraph"||X.type==="text"))X.raw+="\n"+V.raw,X.text+="\n"+V.text,this.inlineQueue[this.inlineQueue.length-1].src=X.text;else K.push(V);continue}if(V=this.tokenizer.fences(J)){J=J.substring(V.raw.length),K.push(V);continue}if(V=this.tokenizer.heading(J)){J=J.substring(V.raw.length),K.push(V);continue}if(V=this.tokenizer.hr(J)){J=J.substring(V.raw.length),K.push(V);continue}if(V=this.tokenizer.blockquote(J)){J=J.substring(V.raw.length),K.push(V);continue}if(V=this.tokenizer.list(J)){J=J.substring(V.raw.length),K.push(V);continue}if(V=this.tokenizer.html(J)){J=J.substring(V.raw.length),K.push(V);continue}if(V=this.tokenizer.def(J)){if(J=J.substring(V.raw.length),X=K[K.length-1],X&&(X.type==="paragraph"||X.type==="text"))X.raw+="\n"+V.raw,X.text+="\n"+V.raw,this.inlineQueue[this.inlineQueue.length-1].src=X.text;else if(!this.tokens.links[V.tag])this.tokens.links[V.tag]={href:V.href,title:V.title};continue}if(V=this.tokenizer.table(J)){J=J.substring(V.raw.length),K.push(V);continue}if(V=this.tokenizer.lheading(J)){J=J.substring(V.raw.length),K.push(V);continue}if(Y=J,this.options.extensions&&this.options.extensions.startBlock){let A=1/0,Z=J.slice(1),q;if(this.options.extensions.startBlock.forEach(($)=>{if(q=$.call({lexer:this},Z),typeof q==="number"&&q>=0)A=Math.min(A,q)}),A<1/0&&A>=0)Y=J.substring(0,A+1)}if(this.state.top&&(V=this.tokenizer.paragraph(Y))){if(X=K[K.length-1],Q&&X?.type==="paragraph")X.raw+="\n"+V.raw,X.text+="\n"+V.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=X.text;else K.push(V);Q=Y.length!==J.length,J=J.substring(V.raw.length);continue}if(V=this.tokenizer.text(J)){if(J=J.substring(V.raw.length),X=K[K.length-1],X&&X.type==="text")X.raw+="\n"+V.raw,X.text+="\n"+V.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=X.text;else K.push(V);continue}if(J){let A="Infinite loop on byte: "+J.charCodeAt(0);if(this.options.silent){console.error(A);break}else throw new Error(A)}}return this.state.top=!0,K}inline(J,K=[]){return this.inlineQueue.push({src:J,tokens:K}),K}inlineTokens(J,K=[]){let Q,V,X,Y=J,A,Z,q;if(this.tokens.links){let $=Object.keys(this.tokens.links);if($.length>0){while((A=this.tokenizer.rules.inline.reflinkSearch.exec(Y))!=null)if($.includes(A[0].slice(A[0].lastIndexOf("[")+1,-1)))Y=Y.slice(0,A.index)+"["+"a".repeat(A[0].length-2)+"]"+Y.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex)}}while((A=this.tokenizer.rules.inline.blockSkip.exec(Y))!=null)Y=Y.slice(0,A.index)+"["+"a".repeat(A[0].length-2)+"]"+Y.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);while((A=this.tokenizer.rules.inline.anyPunctuation.exec(Y))!=null)Y=Y.slice(0,A.index)+"++"+Y.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);while(J){if(!Z)q="";if(Z=!1,this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(($)=>{if(Q=$.call({lexer:this},J,K))return J=J.substring(Q.raw.length),K.push(Q),!0;return!1}))continue;if(Q=this.tokenizer.escape(J)){J=J.substring(Q.raw.length),K.push(Q);continue}if(Q=this.tokenizer.tag(J)){J=J.substring(Q.raw.length),V=K[K.length-1],K.push(Q);continue}if(Q=this.tokenizer.link(J)){J=J.substring(Q.raw.length),K.push(Q);continue}if(Q=this.tokenizer.reflink(J,this.tokens.links)){if(J=J.substring(Q.raw.length),V=K[K.length-1],V&&Q.type==="text"&&V.type==="text")V.raw+=Q.raw,V.text+=Q.text;else K.push(Q);continue}if(Q=this.tokenizer.emStrong(J,Y,q)){J=J.substring(Q.raw.length),K.push(Q);continue}if(Q=this.tokenizer.codespan(J)){J=J.substring(Q.raw.length),K.push(Q);continue}if(Q=this.tokenizer.br(J)){J=J.substring(Q.raw.length),K.push(Q);continue}if(Q=this.tokenizer.del(J)){J=J.substring(Q.raw.length),K.push(Q);continue}if(Q=this.tokenizer.autolink(J)){J=J.substring(Q.raw.length),K.push(Q);continue}if(!this.state.inLink&&(Q=this.tokenizer.url(J))){J=J.substring(Q.raw.length),K.push(Q);continue}if(X=J,this.options.extensions&&this.options.extensions.startInline){let $=1/0,G=J.slice(1),W;if(this.options.extensions.startInline.forEach((N)=>{if(W=N.call({lexer:this},G),typeof W==="number"&&W>=0)$=Math.min($,W)}),$<1/0&&$>=0)X=J.substring(0,$+1)}if(Q=this.tokenizer.inlineText(X)){if(J=J.substring(Q.raw.length),Q.raw.slice(-1)!=="_")q=Q.raw.slice(-1);if(Z=!0,V=K[K.length-1],V&&V.type==="text")V.raw+=Q.raw,V.text+=Q.text;else K.push(Q);continue}if(J){let $="Infinite loop on byte: "+J.charCodeAt(0);if(this.options.silent){console.error($);break}else throw new Error($)}}return K}}class v{options;parser;constructor(J){this.options=J||I}space(J){return""}code({text:J,lang:K,escaped:Q}){let V=(K||"").match(j.notSpaceStart)?.[0],X=J.replace(j.endingNewline,"")+"\n";if(!V)return"<pre><code>"+(Q?X:z(X,!0))+"</code></pre>\n";return'<pre><code class="language-'+z(V)+'">'+(Q?X:z(X,!0))+"</code></pre>\n"}blockquote({tokens:J}){return`<blockquote>\n${this.parser.parse(J)}</blockquote>\n`}html({text:J}){return J}heading({tokens:J,depth:K}){return`<h${K}>${this.parser.parseInline(J)}</h${K}>\n`}hr(J){return"<hr>\n"}list(J){let{ordered:K,start:Q}=J,V="";for(let A=0;A<J.items.length;A++){let Z=J.items[A];V+=this.listitem(Z)}let X=K?"ol":"ul",Y=K&&Q!==1?' start="'+Q+'"':"";return"<"+X+Y+">\n"+V+"</"+X+">\n"}listitem(J){let K="";if(J.task){let Q=this.checkbox({checked:!!J.checked});if(J.loose)if(J.tokens.length>0&&J.tokens[0].type==="paragraph"){if(J.tokens[0].text=Q+" "+J.tokens[0].text,J.tokens[0].tokens&&J.tokens[0].tokens.length>0&&J.tokens[0].tokens[0].type==="text")J.tokens[0].tokens[0].text=Q+" "+z(J.tokens[0].tokens[0].text),J.tokens[0].tokens[0].escaped=!0}else J.tokens.unshift({type:"text",raw:Q+" ",text:Q+" ",escaped:!0});else K+=Q+" "}return K+=this.parser.parse(J.tokens,!!J.loose),`<li>${K}</li>\n`}checkbox({checked:J}){return"<input "+(J?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:J}){return`<p>${this.parser.parseInline(J)}</p>\n`}table(J){let K="",Q="";for(let X=0;X<J.header.length;X++)Q+=this.tablecell(J.header[X]);K+=this.tablerow({text:Q});let V="";for(let X=0;X<J.rows.length;X++){let Y=J.rows[X];Q="";for(let A=0;A<Y.length;A++)Q+=this.tablecell(Y[A]);V+=this.tablerow({text:Q})}if(V)V=`<tbody>${V}</tbody>`;return"<table>\n<thead>\n"+K+"</thead>\n"+V+"</table>\n"}tablerow({text:J}){return`<tr>\n${J}</tr>\n`}tablecell(J){let K=this.parser.parseInline(J.tokens),Q=J.header?"th":"td";return(J.align?`<${Q} align="${J.align}">`:`<${Q}>`)+K+`</${Q}>\n`}strong({tokens:J}){return`<strong>${this.parser.parseInline(J)}</strong>`}em({tokens:J}){return`<em>${this.parser.parseInline(J)}</em>`}codespan({text:J}){return`<code>${z(J,!0)}</code>`}br(J){return"<br>"}del({tokens:J}){return`<del>${this.parser.parseInline(J)}</del>`}link({href:J,title:K,tokens:Q}){let V=this.parser.parseInline(Q),X=t(J);if(X===null)return V;J=X;let Y='<a href="'+J+'"';if(K)Y+=' title="'+z(K)+'"';return Y+=">"+V+"</a>",Y}image({href:J,title:K,text:Q}){let V=t(J);if(V===null)return z(Q);J=V;let X=`<img src="${J}" alt="${Q}"`;if(K)X+=` title="${z(K)}"`;return X+=">",X}text(J){return"tokens"in J&&J.tokens?this.parser.parseInline(J.tokens):("escaped"in J)&&J.escaped?J.text:z(J.text)}}class g{strong({text:J}){return J}em({text:J}){return J}codespan({text:J}){return J}del({text:J}){return J}html({text:J}){return J}text({text:J}){return J}link({text:J}){return""+J}image({text:J}){return""+J}br(){return""}}class H{options;renderer;textRenderer;constructor(J){this.options=J||I,this.options.renderer=this.options.renderer||new v,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new g}static parse(J,K){return new H(K).parse(J)}static parseInline(J,K){return new H(K).parseInline(J)}parse(J,K=!0){let Q="";for(let V=0;V<J.length;V++){let X=J[V];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[X.type]){let A=X,Z=this.options.extensions.renderers[A.type].call({parser:this},A);if(Z!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(A.type)){Q+=Z||"";continue}}let Y=X;switch(Y.type){case"space":{Q+=this.renderer.space(Y);continue}case"hr":{Q+=this.renderer.hr(Y);continue}case"heading":{Q+=this.renderer.heading(Y);continue}case"code":{Q+=this.renderer.code(Y);continue}case"table":{Q+=this.renderer.table(Y);continue}case"blockquote":{Q+=this.renderer.blockquote(Y);continue}case"list":{Q+=this.renderer.list(Y);continue}case"html":{Q+=this.renderer.html(Y);continue}case"paragraph":{Q+=this.renderer.paragraph(Y);continue}case"text":{let A=Y,Z=this.renderer.text(A);while(V+1<J.length&&J[V+1].type==="text")A=J[++V],Z+="\n"+this.renderer.text(A);if(K)Q+=this.renderer.paragraph({type:"paragraph",raw:Z,text:Z,tokens:[{type:"text",raw:Z,text:Z,escaped:!0}]});else Q+=Z;continue}default:{let A='Token with "'+Y.type+'" type was not found.';if(this.options.silent)return console.error(A),"";else throw new Error(A)}}}return Q}parseInline(J,K){K=K||this.renderer;let Q="";for(let V=0;V<J.length;V++){let X=J[V];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[X.type]){let A=this.options.extensions.renderers[X.type].call({parser:this},X);if(A!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(X.type)){Q+=A||"";continue}}let Y=X;switch(Y.type){case"escape":{Q+=K.text(Y);break}case"html":{Q+=K.html(Y);break}case"link":{Q+=K.link(Y);break}case"image":{Q+=K.image(Y);break}case"strong":{Q+=K.strong(Y);break}case"em":{Q+=K.em(Y);break}case"codespan":{Q+=K.codespan(Y);break}case"br":{Q+=K.br(Y);break}case"del":{Q+=K.del(Y);break}case"text":{Q+=K.text(Y);break}default:{let A='Token with "'+Y.type+'" type was not found.';if(this.options.silent)return console.error(A),"";else throw new Error(A)}}}return Q}}class S{options;block;constructor(J){this.options=J||I}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(J){return J}postprocess(J){return J}processAllTokens(J){return J}provideLexer(){return this.block?M.lex:M.lexInline}provideParser(){return this.block?H.parse:H.parseInline}}class qJ{defaults=m();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=H;Renderer=v;TextRenderer=g;Lexer=M;Tokenizer=w;Hooks=S;constructor(...J){this.use(...J)}walkTokens(J,K){let Q=[];for(let V of J)switch(Q=Q.concat(K.call(this,V)),V.type){case"table":{let X=V;for(let Y of X.header)Q=Q.concat(this.walkTokens(Y.tokens,K));for(let Y of X.rows)for(let A of Y)Q=Q.concat(this.walkTokens(A.tokens,K));break}case"list":{let X=V;Q=Q.concat(this.walkTokens(X.items,K));break}default:{let X=V;if(this.defaults.extensions?.childTokens?.[X.type])this.defaults.extensions.childTokens[X.type].forEach((Y)=>{let A=X[Y].flat(1/0);Q=Q.concat(this.walkTokens(A,K))});else if(X.tokens)Q=Q.concat(this.walkTokens(X.tokens,K))}}return Q}use(...J){let K=this.defaults.extensions||{renderers:{},childTokens:{}};return J.forEach((Q)=>{let V={...Q};if(V.async=this.defaults.async||V.async||!1,Q.extensions)Q.extensions.forEach((X)=>{if(!X.name)throw new Error("extension name required");if("renderer"in X){let Y=K.renderers[X.name];if(Y)K.renderers[X.name]=function(...A){let Z=X.renderer.apply(this,A);if(Z===!1)Z=Y.apply(this,A);return Z};else K.renderers[X.name]=X.renderer}if("tokenizer"in X){if(!X.level||X.level!=="block"&&X.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let Y=K[X.level];if(Y)Y.unshift(X.tokenizer);else K[X.level]=[X.tokenizer];if(X.start){if(X.level==="block")if(K.startBlock)K.startBlock.push(X.start);else K.startBlock=[X.start];else if(X.level==="inline")if(K.startInline)K.startInline.push(X.start);else K.startInline=[X.start]}}if("childTokens"in X&&X.childTokens)K.childTokens[X.name]=X.childTokens}),V.extensions=K;if(Q.renderer){let X=this.defaults.renderer||new v(this.defaults);for(let Y in Q.renderer){if(!(Y in X))throw new Error(`renderer '${Y}' does not exist`);if(["options","parser"].includes(Y))continue;let A=Y,Z=Q.renderer[A],q=X[A];X[A]=(...$)=>{let G=Z.apply(X,$);if(G===!1)G=q.apply(X,$);return G||""}}V.renderer=X}if(Q.tokenizer){let X=this.defaults.tokenizer||new w(this.defaults);for(let Y in Q.tokenizer){if(!(Y in X))throw new Error(`tokenizer '${Y}' does not exist`);if(["options","rules","lexer"].includes(Y))continue;let A=Y,Z=Q.tokenizer[A],q=X[A];X[A]=(...$)=>{let G=Z.apply(X,$);if(G===!1)G=q.apply(X,$);return G}}V.tokenizer=X}if(Q.hooks){let X=this.defaults.hooks||new S;for(let Y in Q.hooks){if(!(Y in X))throw new Error(`hook '${Y}' does not exist`);if(["options","block"].includes(Y))continue;let A=Y,Z=Q.hooks[A],q=X[A];if(S.passThroughHooks.has(Y))X[A]=($)=>{if(this.defaults.async)return Promise.resolve(Z.call(X,$)).then((W)=>{return q.call(X,W)});let G=Z.call(X,$);return q.call(X,G)};else X[A]=(...$)=>{let G=Z.apply(X,$);if(G===!1)G=q.apply(X,$);return G}}V.hooks=X}if(Q.walkTokens){let X=this.defaults.walkTokens,Y=Q.walkTokens;V.walkTokens=function(A){let Z=[];if(Z.push(Y.call(this,A)),X)Z=Z.concat(X.call(this,A));return Z}}this.defaults={...this.defaults,...V}}),this}setOptions(J){return this.defaults={...this.defaults,...J},this}lexer(J,K){return M.lex(J,K??this.defaults)}parser(J,K){return H.parse(J,K??this.defaults)}parseMarkdown(J){return(Q,V)=>{let X={...V},Y={...this.defaults,...X},A=this.onError(!!Y.silent,!!Y.async);if(this.defaults.async===!0&&X.async===!1)return A(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof Q==="undefined"||Q===null)return A(new Error("marked(): input parameter is undefined or null"));if(typeof Q!=="string")return A(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(Q)+", string expected"));if(Y.hooks)Y.hooks.options=Y,Y.hooks.block=J;let Z=Y.hooks?Y.hooks.provideLexer():J?M.lex:M.lexInline,q=Y.hooks?Y.hooks.provideParser():J?H.parse:H.parseInline;if(Y.async)return Promise.resolve(Y.hooks?Y.hooks.preprocess(Q):Q).then(($)=>Z($,Y)).then(($)=>Y.hooks?Y.hooks.processAllTokens($):$).then(($)=>Y.walkTokens?Promise.all(this.walkTokens($,Y.walkTokens)).then(()=>$):$).then(($)=>q($,Y)).then(($)=>Y.hooks?Y.hooks.postprocess($):$).catch(A);try{if(Y.hooks)Q=Y.hooks.preprocess(Q);let $=Z(Q,Y);if(Y.hooks)$=Y.hooks.processAllTokens($);if(Y.walkTokens)this.walkTokens($,Y.walkTokens);let G=q($,Y);if(Y.hooks)G=Y.hooks.postprocess(G);return G}catch($){return A($)}}}onError(J,K){return(Q)=>{if(Q.message+="\nPlease report this to https://github.com/markedjs/marked.",J){let V="<p>An error occurred:</p><pre>"+z(Q.message+"",!0)+"</pre>";if(K)return Promise.resolve(V);return V}if(K)return Promise.reject(Q);throw Q}}}var D=new qJ;function O(J,K){return D.parse(J,K)}O.options=O.setOptions=function(J){return D.setOptions(J),O.defaults=D.defaults,KJ(O.defaults),O};O.getDefaults=m;O.defaults=I;O.use=function(...J){return D.use(...J),O.defaults=D.defaults,KJ(O.defaults),O};O.walkTokens=function(J,K){return D.walkTokens(J,K)};O.parseInline=D.parseInline;O.Parser=H;O.parser=H.parse;O.Renderer=v;O.TextRenderer=g;O.Lexer=M;O.lexer=M.lex;O.Tokenizer=w;O.Hooks=S;O.parse=O;var{options:nJ,setOptions:rJ,use:tJ,walkTokens:eJ,parseInline:JK}=O;var KK=H.parse,QK=M.lex;var kJ=document.querySelectorAll("button");for(let J of kJ)J.addEventListener("click",(K)=>{let V=K.target.innerText;a(V)});var GJ=document.getElementById("prompt__input");if(GJ)GJ.addEventListener("keydown",(J)=>{if(J.key==="Enter"){J.preventDefault();let K=UJ();a(K)}});var OJ=document.getElementById("prompt__submit");if(OJ)OJ.addEventListener("click",(J)=>{J.preventDefault();let K=UJ();a(K)});function a(J){if(J!=="")oJ(J),sJ(J)}function aJ(){let J=document.querySelector('[data-role="system__logo"]');if(!J)return null;return J.cloneNode(!0)}function cJ(){let J=document.querySelectorAll("a:not(#footprint__link)");for(let K of J)K.target="_blank"}function WJ(){let J=document.querySelector("main");if(J)J.scrollTop=J.scrollHeight}function UJ(){let J=document.getElementById("prompt__input");if(J){let{value:K}=J;return J.value="",K}return"Bonjour !"}function FJ(J){document.querySelector('[data-role="system__loading"]')?.remove();let Q=document.querySelector("main > div:last-child");if(!Q)return;Q.classList.add("prose");let V=J.replace(/<br\/>/g,"\n\n").replace(/\n{3,}/g,"\n\n");Q.innerHTML=O.parse(V),cJ(),WJ()}function oJ(J){let K=document.querySelector("main");if(!K)return;let Q=document.createElement("div");Q.setAttribute("data-role","user"),Q.classList.add("user"),Q.textContent=J;let V=document.createElement("div");V.setAttribute("data-role","system");let X=document.createElement("div");X.classList.add("thinking"),V.appendChild(X);let Y=aJ(),A=document.createDocumentFragment();A.appendChild(Q),A.appendChild(Y),A.appendChild(V),K.appendChild(A),WJ()}function sJ(J){let K=document.getElementById("prompt__submit");K.disabled=!0;let Q=document.getElementsByTagName("button");for(let $ of Q)$.disabled=!0;let V=window.location.pathname.substring(3),X=new URLSearchParams(window.location.search).get("config"),Y=new URLSearchParams(window.location.search).get("context"),A=`/ai/${V}?message=${encodeURIComponent(J)}&config=${encodeURIComponent(X||"")}&context=${encodeURIComponent(Y||"")}`,Z=new EventSource(A),q="";Z.onmessage=($)=>{if($.data!=="pierre_event_stream_closed")q+=$.data,FJ(q);else{Z.close(),K.disabled=!1;for(let G of Q)G.disabled=!1}},Z.onerror=($)=>{if(console.error("An error occurred with the EventSource:",$),Z.readyState===EventSource.CLOSED)console.error("Connection closed due to incomplete chunked encoding."),q+=" **/ Erreur-r\xE9seau : v\xE9rifier votre connexion et rafraichissez la page.** ",FJ(q),Z.close()}}
