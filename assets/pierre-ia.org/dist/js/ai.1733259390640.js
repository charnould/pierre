function m(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var I=m();function XJ(J){I=J}var P={exec:()=>null};function O(J,K=""){let Q=typeof J==="string"?J:J.source,X={replace:(V,Y)=>{let A=typeof Y==="string"?Y:Y.source;return A=A.replace(E.caret,"$1"),Q=Q.replace(V,A),X},getRegex:()=>{return new RegExp(Q,K)}};return X}var E={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:(J)=>new RegExp(`^( {0,3}${J})((?:[\t ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:(J)=>new RegExp(`^ {0,${Math.min(3,J-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),hrRegex:(J)=>new RegExp(`^ {0,${Math.min(3,J-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:(J)=>new RegExp(`^ {0,${Math.min(3,J-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:(J)=>new RegExp(`^ {0,${Math.min(3,J-1)}}#`),htmlBeginRegex:(J)=>new RegExp(`^ {0,${Math.min(3,J-1)}}<(?:[a-z].*>|!--)`,"i")},HJ=/^(?:[ \t]*(?:\n|$))+/,BJ=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,zJ=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,f=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,DJ=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,YJ=/(?:[*+-]|\d{1,9}[.)])/,VJ=O(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,YJ).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),d=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,IJ=/^[^\n]+/,p=/(?!\s*\])(?:\\.|[^\[\]\\])+/,RJ=O(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",p).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),CJ=O(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,YJ).getRegex(),T="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",l=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,yJ=O("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",l).replace("tag",T).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),AJ=O(d).replace("hr",f).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",T).getRegex(),PJ=O(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",AJ).getRegex(),i={blockquote:PJ,code:BJ,def:RJ,fences:zJ,heading:DJ,hr:f,html:yJ,lheading:VJ,list:CJ,newline:HJ,paragraph:AJ,table:P,text:IJ},t=O("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",f).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",T).getRegex(),SJ={...i,table:t,paragraph:O(d).replace("hr",f).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",t).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",T).getRegex()},wJ={...i,html:O(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",l).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:P,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:O(d).replace("hr",f).replace("heading",` *#{1,6} *[^
]`).replace("lheading",VJ).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},ZJ=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,vJ=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,$J=/^( {2,}|\\)\n(?!\s*$)/,fJ=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,_=/[\p{P}\p{S}]/u,k=/[\s\p{P}\p{S}]/u,qJ=/[^\s\p{P}\p{S}]/u,LJ=O(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,k).getRegex(),bJ=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,TJ=O(/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,"u").replace(/punct/g,_).getRegex(),_J=O("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)","gu").replace(/notPunctSpace/g,qJ).replace(/punctSpace/g,k).replace(/punct/g,_).getRegex(),gJ=O("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,qJ).replace(/punctSpace/g,k).replace(/punct/g,_).getRegex(),uJ=O(/\\(punct)/,"gu").replace(/punct/g,_).getRegex(),hJ=O(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),xJ=O(l).replace("(?:-->|$)","-->").getRegex(),mJ=O("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",xJ).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),b=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,dJ=O(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",b).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),GJ=O(/^!?\[(label)\]\[(ref)\]/).replace("label",b).replace("ref",p).getRegex(),FJ=O(/^!?\[(ref)\](?:\[\])?/).replace("ref",p).getRegex(),pJ=O("reflink|nolink(?!\\()","g").replace("reflink",GJ).replace("nolink",FJ).getRegex(),a={_backpedal:P,anyPunctuation:uJ,autolink:hJ,blockSkip:bJ,br:$J,code:vJ,del:P,emStrongLDelim:TJ,emStrongRDelimAst:_J,emStrongRDelimUnd:gJ,escape:ZJ,link:dJ,nolink:FJ,punctuation:LJ,reflink:GJ,reflinkSearch:pJ,tag:mJ,text:fJ,url:P},lJ={...a,link:O(/^!?\[(label)\]\((.*?)\)/).replace("label",b).getRegex(),reflink:O(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",b).getRegex()},x={...a,escape:O(ZJ).replace("])","~|])").getRegex(),url:O(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},iJ={...x,br:O($J).replace("{2,}","*").getRegex(),text:O(x.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},L={normal:i,gfm:SJ,pedantic:wJ},C={normal:a,gfm:x,breaks:iJ,pedantic:lJ},kJ={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},e=(J)=>kJ[J];function z(J,K){if(K){if(E.escapeTest.test(J))return J.replace(E.escapeReplace,e)}else if(E.escapeTestNoEncode.test(J))return J.replace(E.escapeReplaceNoEncode,e);return J}function JJ(J){try{J=encodeURI(J).replace(E.percentDecode,"%")}catch{return null}return J}function KJ(J,K){let Q=J.replace(E.findPipe,(Y,A,Z)=>{let $=!1,q=A;while(--q>=0&&Z[q]==="\\")$=!$;if($)return"|";else return" |"}),X=Q.split(E.splitPipe),V=0;if(!X[0].trim())X.shift();if(X.length>0&&!X.at(-1)?.trim())X.pop();if(K)if(X.length>K)X.splice(K);else while(X.length<K)X.push("");for(;V<X.length;V++)X[V]=X[V].trim().replace(E.slashPipe,"|");return X}function y(J,K,Q){let X=J.length;if(X===0)return"";let V=0;while(V<X){let Y=J.charAt(X-V-1);if(Y===K&&!Q)V++;else if(Y!==K&&Q)V++;else break}return J.slice(0,X-V)}function aJ(J,K){if(J.indexOf(K[1])===-1)return-1;let Q=0;for(let X=0;X<J.length;X++)if(J[X]==="\\")X++;else if(J[X]===K[0])Q++;else if(J[X]===K[1]){if(Q--,Q<0)return X}return-1}function QJ(J,K,Q,X,V){let Y=K.href,A=K.title||null,Z=J[1].replace(V.other.outputLinkReplace,"$1");if(J[0].charAt(0)!=="!"){X.state.inLink=!0;let $={type:"link",raw:Q,href:Y,title:A,text:Z,tokens:X.inlineTokens(Z)};return X.state.inLink=!1,$}return{type:"image",raw:Q,href:Y,title:A,text:Z}}function cJ(J,K,Q){let X=J.match(Q.other.indentCodeCompensation);if(X===null)return K;let V=X[1];return K.split(`
`).map((Y)=>{let A=Y.match(Q.other.beginningSpace);if(A===null)return Y;let[Z]=A;if(Z.length>=V.length)return Y.slice(V.length);return Y}).join(`
`)}class w{options;rules;lexer;constructor(J){this.options=J||I}space(J){let K=this.rules.block.newline.exec(J);if(K&&K[0].length>0)return{type:"space",raw:K[0]}}code(J){let K=this.rules.block.code.exec(J);if(K){let Q=K[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:K[0],codeBlockStyle:"indented",text:!this.options.pedantic?y(Q,`
`):Q}}}fences(J){let K=this.rules.block.fences.exec(J);if(K){let Q=K[0],X=cJ(Q,K[3]||"",this.rules);return{type:"code",raw:Q,lang:K[2]?K[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):K[2],text:X}}}heading(J){let K=this.rules.block.heading.exec(J);if(K){let Q=K[2].trim();if(this.rules.other.endingHash.test(Q)){let X=y(Q,"#");if(this.options.pedantic)Q=X.trim();else if(!X||this.rules.other.endingSpaceChar.test(X))Q=X.trim()}return{type:"heading",raw:K[0],depth:K[1].length,text:Q,tokens:this.lexer.inline(Q)}}}hr(J){let K=this.rules.block.hr.exec(J);if(K)return{type:"hr",raw:y(K[0],`
`)}}blockquote(J){let K=this.rules.block.blockquote.exec(J);if(K){let Q=y(K[0],`
`).split(`
`),X="",V="",Y=[];while(Q.length>0){let A=!1,Z=[],$;for($=0;$<Q.length;$++)if(this.rules.other.blockquoteStart.test(Q[$]))Z.push(Q[$]),A=!0;else if(!A)Z.push(Q[$]);else break;Q=Q.slice($);let q=Z.join(`
`),G=q.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");X=X?`${X}
${q}`:q,V=V?`${V}
${G}`:G;let U=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(G,Y,!0),this.lexer.state.top=U,Q.length===0)break;let F=Y.at(-1);if(F?.type==="code")break;else if(F?.type==="blockquote"){let j=F,N=j.raw+`
`+Q.join(`
`),M=this.blockquote(N);Y[Y.length-1]=M,X=X.substring(0,X.length-j.raw.length)+M.raw,V=V.substring(0,V.length-j.text.length)+M.text;break}else if(F?.type==="list"){let j=F,N=j.raw+`
`+Q.join(`
`),M=this.list(N);Y[Y.length-1]=M,X=X.substring(0,X.length-F.raw.length)+M.raw,V=V.substring(0,V.length-j.raw.length)+M.raw,Q=N.substring(Y.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:X,tokens:Y,text:V}}}list(J){let K=this.rules.block.list.exec(J);if(K){let Q=K[1].trim(),X=Q.length>1,V={type:"list",raw:"",ordered:X,start:X?+Q.slice(0,-1):"",loose:!1,items:[]};if(Q=X?`\\d{1,9}\\${Q.slice(-1)}`:`\\${Q}`,this.options.pedantic)Q=X?Q:"[*+-]";let Y=this.rules.other.listItemRegex(Q),A=!1;while(J){let $=!1,q="",G="";if(!(K=Y.exec(J)))break;if(this.rules.block.hr.test(J))break;q=K[0],J=J.substring(q.length);let U=K[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,(u)=>" ".repeat(3*u.length)),F=J.split(`
`,1)[0],j=!U.trim(),N=0;if(this.options.pedantic)N=2,G=U.trimStart();else if(j)N=K[1].length+1;else N=K[2].search(this.rules.other.nonSpaceChar),N=N>4?1:N,G=U.slice(N),N+=K[1].length;if(j&&this.rules.other.blankLine.test(F))q+=F+`
`,J=J.substring(F.length+1),$=!0;if(!$){let u=this.rules.other.nextBulletRegex(N),s=this.rules.other.hrRegex(N),n=this.rules.other.fencesBeginRegex(N),r=this.rules.other.headingBeginRegex(N),MJ=this.rules.other.htmlBeginRegex(N);while(J){let h=J.split(`
`,1)[0],R;if(F=h,this.options.pedantic)F=F.replace(this.rules.other.listReplaceNesting,"  "),R=F;else R=F.replace(this.rules.other.tabCharGlobal,"    ");if(n.test(F))break;if(r.test(F))break;if(MJ.test(F))break;if(u.test(F))break;if(s.test(F))break;if(R.search(this.rules.other.nonSpaceChar)>=N||!F.trim())G+=`
`+R.slice(N);else{if(j)break;if(U.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4)break;if(n.test(U))break;if(r.test(U))break;if(s.test(U))break;G+=`
`+F}if(!j&&!F.trim())j=!0;q+=h+`
`,J=J.substring(h.length+1),U=R.slice(N)}}if(!V.loose){if(A)V.loose=!0;else if(this.rules.other.doubleBlankLine.test(q))A=!0}let M=null,o;if(this.options.gfm){if(M=this.rules.other.listIsTask.exec(G),M)o=M[0]!=="[ ] ",G=G.replace(this.rules.other.listReplaceTask,"")}V.items.push({type:"list_item",raw:q,task:!!M,checked:o,loose:!1,text:G,tokens:[]}),V.raw+=q}let Z=V.items.at(-1);if(Z)Z.raw=Z.raw.trimEnd(),Z.text=Z.text.trimEnd();V.raw=V.raw.trimEnd();for(let $=0;$<V.items.length;$++)if(this.lexer.state.top=!1,V.items[$].tokens=this.lexer.blockTokens(V.items[$].text,[]),!V.loose){let q=V.items[$].tokens.filter((U)=>U.type==="space"),G=q.length>0&&q.some((U)=>this.rules.other.anyLine.test(U.raw));V.loose=G}if(V.loose)for(let $=0;$<V.items.length;$++)V.items[$].loose=!0;return V}}html(J){let K=this.rules.block.html.exec(J);if(K)return{type:"html",block:!0,raw:K[0],pre:K[1]==="pre"||K[1]==="script"||K[1]==="style",text:K[0]}}def(J){let K=this.rules.block.def.exec(J);if(K){let Q=K[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),X=K[2]?K[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",V=K[3]?K[3].substring(1,K[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):K[3];return{type:"def",tag:Q,raw:K[0],href:X,title:V}}}table(J){let K=this.rules.block.table.exec(J);if(!K)return;if(!this.rules.other.tableDelimiter.test(K[2]))return;let Q=KJ(K[1]),X=K[2].replace(this.rules.other.tableAlignChars,"").split("|"),V=K[3]?.trim()?K[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],Y={type:"table",raw:K[0],header:[],align:[],rows:[]};if(Q.length!==X.length)return;for(let A of X)if(this.rules.other.tableAlignRight.test(A))Y.align.push("right");else if(this.rules.other.tableAlignCenter.test(A))Y.align.push("center");else if(this.rules.other.tableAlignLeft.test(A))Y.align.push("left");else Y.align.push(null);for(let A=0;A<Q.length;A++)Y.header.push({text:Q[A],tokens:this.lexer.inline(Q[A]),header:!0,align:Y.align[A]});for(let A of V)Y.rows.push(KJ(A,Y.header.length).map((Z,$)=>{return{text:Z,tokens:this.lexer.inline(Z),header:!1,align:Y.align[$]}}));return Y}lheading(J){let K=this.rules.block.lheading.exec(J);if(K)return{type:"heading",raw:K[0],depth:K[2].charAt(0)==="="?1:2,text:K[1],tokens:this.lexer.inline(K[1])}}paragraph(J){let K=this.rules.block.paragraph.exec(J);if(K){let Q=K[1].charAt(K[1].length-1)===`
`?K[1].slice(0,-1):K[1];return{type:"paragraph",raw:K[0],text:Q,tokens:this.lexer.inline(Q)}}}text(J){let K=this.rules.block.text.exec(J);if(K)return{type:"text",raw:K[0],text:K[0],tokens:this.lexer.inline(K[0])}}escape(J){let K=this.rules.inline.escape.exec(J);if(K)return{type:"escape",raw:K[0],text:K[1]}}tag(J){let K=this.rules.inline.tag.exec(J);if(K){if(!this.lexer.state.inLink&&this.rules.other.startATag.test(K[0]))this.lexer.state.inLink=!0;else if(this.lexer.state.inLink&&this.rules.other.endATag.test(K[0]))this.lexer.state.inLink=!1;if(!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(K[0]))this.lexer.state.inRawBlock=!0;else if(this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(K[0]))this.lexer.state.inRawBlock=!1;return{type:"html",raw:K[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:K[0]}}}link(J){let K=this.rules.inline.link.exec(J);if(K){let Q=K[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(Q)){if(!this.rules.other.endAngleBracket.test(Q))return;let Y=y(Q.slice(0,-1),"\\");if((Q.length-Y.length)%2===0)return}else{let Y=aJ(K[2],"()");if(Y>-1){let Z=(K[0].indexOf("!")===0?5:4)+K[1].length+Y;K[2]=K[2].substring(0,Y),K[0]=K[0].substring(0,Z).trim(),K[3]=""}}let X=K[2],V="";if(this.options.pedantic){let Y=this.rules.other.pedanticHrefTitle.exec(X);if(Y)X=Y[1],V=Y[3]}else V=K[3]?K[3].slice(1,-1):"";if(X=X.trim(),this.rules.other.startAngleBracket.test(X))if(this.options.pedantic&&!this.rules.other.endAngleBracket.test(Q))X=X.slice(1);else X=X.slice(1,-1);return QJ(K,{href:X?X.replace(this.rules.inline.anyPunctuation,"$1"):X,title:V?V.replace(this.rules.inline.anyPunctuation,"$1"):V},K[0],this.lexer,this.rules)}}reflink(J,K){let Q;if((Q=this.rules.inline.reflink.exec(J))||(Q=this.rules.inline.nolink.exec(J))){let X=(Q[2]||Q[1]).replace(this.rules.other.multipleSpaceGlobal," "),V=K[X.toLowerCase()];if(!V){let Y=Q[0].charAt(0);return{type:"text",raw:Y,text:Y}}return QJ(Q,V,Q[0],this.lexer,this.rules)}}emStrong(J,K,Q=""){let X=this.rules.inline.emStrongLDelim.exec(J);if(!X)return;if(X[3]&&Q.match(this.rules.other.unicodeAlphaNumeric))return;if(!(X[1]||X[2])||!Q||this.rules.inline.punctuation.exec(Q)){let Y=[...X[0]].length-1,A,Z,$=Y,q=0,G=X[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;G.lastIndex=0,K=K.slice(-1*J.length+Y);while((X=G.exec(K))!=null){if(A=X[1]||X[2]||X[3]||X[4]||X[5]||X[6],!A)continue;if(Z=[...A].length,X[3]||X[4]){$+=Z;continue}else if(X[5]||X[6]){if(Y%3&&!((Y+Z)%3)){q+=Z;continue}}if($-=Z,$>0)continue;Z=Math.min(Z,Z+$+q);let U=[...X[0]][0].length,F=J.slice(0,Y+X.index+U+Z);if(Math.min(Y,Z)%2){let N=F.slice(1,-1);return{type:"em",raw:F,text:N,tokens:this.lexer.inlineTokens(N)}}let j=F.slice(2,-2);return{type:"strong",raw:F,text:j,tokens:this.lexer.inlineTokens(j)}}}}codespan(J){let K=this.rules.inline.code.exec(J);if(K){let Q=K[2].replace(this.rules.other.newLineCharGlobal," "),X=this.rules.other.nonSpaceChar.test(Q),V=this.rules.other.startingSpaceChar.test(Q)&&this.rules.other.endingSpaceChar.test(Q);if(X&&V)Q=Q.substring(1,Q.length-1);return{type:"codespan",raw:K[0],text:Q}}}br(J){let K=this.rules.inline.br.exec(J);if(K)return{type:"br",raw:K[0]}}del(J){let K=this.rules.inline.del.exec(J);if(K)return{type:"del",raw:K[0],text:K[2],tokens:this.lexer.inlineTokens(K[2])}}autolink(J){let K=this.rules.inline.autolink.exec(J);if(K){let Q,X;if(K[2]==="@")Q=K[1],X="mailto:"+Q;else Q=K[1],X=Q;return{type:"link",raw:K[0],text:Q,href:X,tokens:[{type:"text",raw:Q,text:Q}]}}}url(J){let K;if(K=this.rules.inline.url.exec(J)){let Q,X;if(K[2]==="@")Q=K[0],X="mailto:"+Q;else{let V;do V=K[0],K[0]=this.rules.inline._backpedal.exec(K[0])?.[0]??"";while(V!==K[0]);if(Q=K[0],K[1]==="www.")X="http://"+K[0];else X=K[0]}return{type:"link",raw:K[0],text:Q,href:X,tokens:[{type:"text",raw:Q,text:Q}]}}}inlineText(J){let K=this.rules.inline.text.exec(J);if(K){let Q=this.lexer.state.inRawBlock;return{type:"text",raw:K[0],text:K[0],escaped:Q}}}}class H{tokens;options;state;tokenizer;inlineQueue;constructor(J){this.tokens=[],this.tokens.links=Object.create(null),this.options=J||I,this.options.tokenizer=this.options.tokenizer||new w,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let K={other:E,block:L.normal,inline:C.normal};if(this.options.pedantic)K.block=L.pedantic,K.inline=C.pedantic;else if(this.options.gfm)if(K.block=L.gfm,this.options.breaks)K.inline=C.breaks;else K.inline=C.gfm;this.tokenizer.rules=K}static get rules(){return{block:L,inline:C}}static lex(J,K){return new H(K).lex(J)}static lexInline(J,K){return new H(K).inlineTokens(J)}lex(J){J=J.replace(E.carriageReturn,`
`),this.blockTokens(J,this.tokens);for(let K=0;K<this.inlineQueue.length;K++){let Q=this.inlineQueue[K];this.inlineTokens(Q.src,Q.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(J,K=[],Q=!1){if(this.options.pedantic)J=J.replace(E.tabCharGlobal,"    ").replace(E.spaceLine,"");while(J){let X;if(this.options.extensions?.block?.some((Y)=>{if(X=Y.call({lexer:this},J,K))return J=J.substring(X.raw.length),K.push(X),!0;return!1}))continue;if(X=this.tokenizer.space(J)){J=J.substring(X.raw.length);let Y=K.at(-1);if(X.raw.length===1&&Y!==void 0)Y.raw+=`
`;else K.push(X);continue}if(X=this.tokenizer.code(J)){J=J.substring(X.raw.length);let Y=K.at(-1);if(Y?.type==="paragraph"||Y?.type==="text")Y.raw+=`
`+X.raw,Y.text+=`
`+X.text,this.inlineQueue.at(-1).src=Y.text;else K.push(X);continue}if(X=this.tokenizer.fences(J)){J=J.substring(X.raw.length),K.push(X);continue}if(X=this.tokenizer.heading(J)){J=J.substring(X.raw.length),K.push(X);continue}if(X=this.tokenizer.hr(J)){J=J.substring(X.raw.length),K.push(X);continue}if(X=this.tokenizer.blockquote(J)){J=J.substring(X.raw.length),K.push(X);continue}if(X=this.tokenizer.list(J)){J=J.substring(X.raw.length),K.push(X);continue}if(X=this.tokenizer.html(J)){J=J.substring(X.raw.length),K.push(X);continue}if(X=this.tokenizer.def(J)){J=J.substring(X.raw.length);let Y=K.at(-1);if(Y?.type==="paragraph"||Y?.type==="text")Y.raw+=`
`+X.raw,Y.text+=`
`+X.raw,this.inlineQueue.at(-1).src=Y.text;else if(!this.tokens.links[X.tag])this.tokens.links[X.tag]={href:X.href,title:X.title};continue}if(X=this.tokenizer.table(J)){J=J.substring(X.raw.length),K.push(X);continue}if(X=this.tokenizer.lheading(J)){J=J.substring(X.raw.length),K.push(X);continue}let V=J;if(this.options.extensions?.startBlock){let Y=1/0,A=J.slice(1),Z;if(this.options.extensions.startBlock.forEach(($)=>{if(Z=$.call({lexer:this},A),typeof Z==="number"&&Z>=0)Y=Math.min(Y,Z)}),Y<1/0&&Y>=0)V=J.substring(0,Y+1)}if(this.state.top&&(X=this.tokenizer.paragraph(V))){let Y=K.at(-1);if(Q&&Y?.type==="paragraph")Y.raw+=`
`+X.raw,Y.text+=`
`+X.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=Y.text;else K.push(X);Q=V.length!==J.length,J=J.substring(X.raw.length);continue}if(X=this.tokenizer.text(J)){J=J.substring(X.raw.length);let Y=K.at(-1);if(Y?.type==="text")Y.raw+=`
`+X.raw,Y.text+=`
`+X.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=Y.text;else K.push(X);continue}if(J){let Y="Infinite loop on byte: "+J.charCodeAt(0);if(this.options.silent){console.error(Y);break}else throw new Error(Y)}}return this.state.top=!0,K}inline(J,K=[]){return this.inlineQueue.push({src:J,tokens:K}),K}inlineTokens(J,K=[]){let Q=J,X=null;if(this.tokens.links){let A=Object.keys(this.tokens.links);if(A.length>0){while((X=this.tokenizer.rules.inline.reflinkSearch.exec(Q))!=null)if(A.includes(X[0].slice(X[0].lastIndexOf("[")+1,-1)))Q=Q.slice(0,X.index)+"["+"a".repeat(X[0].length-2)+"]"+Q.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex)}}while((X=this.tokenizer.rules.inline.blockSkip.exec(Q))!=null)Q=Q.slice(0,X.index)+"["+"a".repeat(X[0].length-2)+"]"+Q.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);while((X=this.tokenizer.rules.inline.anyPunctuation.exec(Q))!=null)Q=Q.slice(0,X.index)+"++"+Q.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let V=!1,Y="";while(J){if(!V)Y="";V=!1;let A;if(this.options.extensions?.inline?.some(($)=>{if(A=$.call({lexer:this},J,K))return J=J.substring(A.raw.length),K.push(A),!0;return!1}))continue;if(A=this.tokenizer.escape(J)){J=J.substring(A.raw.length),K.push(A);continue}if(A=this.tokenizer.tag(J)){J=J.substring(A.raw.length),K.push(A);continue}if(A=this.tokenizer.link(J)){J=J.substring(A.raw.length),K.push(A);continue}if(A=this.tokenizer.reflink(J,this.tokens.links)){J=J.substring(A.raw.length);let $=K.at(-1);if(A.type==="text"&&$?.type==="text")$.raw+=A.raw,$.text+=A.text;else K.push(A);continue}if(A=this.tokenizer.emStrong(J,Q,Y)){J=J.substring(A.raw.length),K.push(A);continue}if(A=this.tokenizer.codespan(J)){J=J.substring(A.raw.length),K.push(A);continue}if(A=this.tokenizer.br(J)){J=J.substring(A.raw.length),K.push(A);continue}if(A=this.tokenizer.del(J)){J=J.substring(A.raw.length),K.push(A);continue}if(A=this.tokenizer.autolink(J)){J=J.substring(A.raw.length),K.push(A);continue}if(!this.state.inLink&&(A=this.tokenizer.url(J))){J=J.substring(A.raw.length),K.push(A);continue}let Z=J;if(this.options.extensions?.startInline){let $=1/0,q=J.slice(1),G;if(this.options.extensions.startInline.forEach((U)=>{if(G=U.call({lexer:this},q),typeof G==="number"&&G>=0)$=Math.min($,G)}),$<1/0&&$>=0)Z=J.substring(0,$+1)}if(A=this.tokenizer.inlineText(Z)){if(J=J.substring(A.raw.length),A.raw.slice(-1)!=="_")Y=A.raw.slice(-1);V=!0;let $=K.at(-1);if($?.type==="text")$.raw+=A.raw,$.text+=A.text;else K.push(A);continue}if(J){let $="Infinite loop on byte: "+J.charCodeAt(0);if(this.options.silent){console.error($);break}else throw new Error($)}}return K}}class v{options;parser;constructor(J){this.options=J||I}space(J){return""}code({text:J,lang:K,escaped:Q}){let X=(K||"").match(E.notSpaceStart)?.[0],V=J.replace(E.endingNewline,"")+`
`;if(!X)return"<pre><code>"+(Q?V:z(V,!0))+`</code></pre>
`;return'<pre><code class="language-'+z(X)+'">'+(Q?V:z(V,!0))+`</code></pre>
`}blockquote({tokens:J}){return`<blockquote>
${this.parser.parse(J)}</blockquote>
`}html({text:J}){return J}heading({tokens:J,depth:K}){return`<h${K}>${this.parser.parseInline(J)}</h${K}>
`}hr(J){return`<hr>
`}list(J){let{ordered:K,start:Q}=J,X="";for(let A=0;A<J.items.length;A++){let Z=J.items[A];X+=this.listitem(Z)}let V=K?"ol":"ul",Y=K&&Q!==1?' start="'+Q+'"':"";return"<"+V+Y+`>
`+X+"</"+V+`>
`}listitem(J){let K="";if(J.task){let Q=this.checkbox({checked:!!J.checked});if(J.loose)if(J.tokens[0]?.type==="paragraph"){if(J.tokens[0].text=Q+" "+J.tokens[0].text,J.tokens[0].tokens&&J.tokens[0].tokens.length>0&&J.tokens[0].tokens[0].type==="text")J.tokens[0].tokens[0].text=Q+" "+z(J.tokens[0].tokens[0].text),J.tokens[0].tokens[0].escaped=!0}else J.tokens.unshift({type:"text",raw:Q+" ",text:Q+" ",escaped:!0});else K+=Q+" "}return K+=this.parser.parse(J.tokens,!!J.loose),`<li>${K}</li>
`}checkbox({checked:J}){return"<input "+(J?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:J}){return`<p>${this.parser.parseInline(J)}</p>
`}table(J){let K="",Q="";for(let V=0;V<J.header.length;V++)Q+=this.tablecell(J.header[V]);K+=this.tablerow({text:Q});let X="";for(let V=0;V<J.rows.length;V++){let Y=J.rows[V];Q="";for(let A=0;A<Y.length;A++)Q+=this.tablecell(Y[A]);X+=this.tablerow({text:Q})}if(X)X=`<tbody>${X}</tbody>`;return`<table>
<thead>
`+K+`</thead>
`+X+`</table>
`}tablerow({text:J}){return`<tr>
${J}</tr>
`}tablecell(J){let K=this.parser.parseInline(J.tokens),Q=J.header?"th":"td";return(J.align?`<${Q} align="${J.align}">`:`<${Q}>`)+K+`</${Q}>
`}strong({tokens:J}){return`<strong>${this.parser.parseInline(J)}</strong>`}em({tokens:J}){return`<em>${this.parser.parseInline(J)}</em>`}codespan({text:J}){return`<code>${z(J,!0)}</code>`}br(J){return"<br>"}del({tokens:J}){return`<del>${this.parser.parseInline(J)}</del>`}link({href:J,title:K,tokens:Q}){let X=this.parser.parseInline(Q),V=JJ(J);if(V===null)return X;J=V;let Y='<a href="'+J+'"';if(K)Y+=' title="'+z(K)+'"';return Y+=">"+X+"</a>",Y}image({href:J,title:K,text:Q}){let X=JJ(J);if(X===null)return z(Q);J=X;let V=`<img src="${J}" alt="${Q}"`;if(K)V+=` title="${z(K)}"`;return V+=">",V}text(J){return"tokens"in J&&J.tokens?this.parser.parseInline(J.tokens):("escaped"in J)&&J.escaped?J.text:z(J.text)}}class g{strong({text:J}){return J}em({text:J}){return J}codespan({text:J}){return J}del({text:J}){return J}html({text:J}){return J}text({text:J}){return J}link({text:J}){return""+J}image({text:J}){return""+J}br(){return""}}class B{options;renderer;textRenderer;constructor(J){this.options=J||I,this.options.renderer=this.options.renderer||new v,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new g}static parse(J,K){return new B(K).parse(J)}static parseInline(J,K){return new B(K).parseInline(J)}parse(J,K=!0){let Q="";for(let X=0;X<J.length;X++){let V=J[X];if(this.options.extensions?.renderers?.[V.type]){let A=V,Z=this.options.extensions.renderers[A.type].call({parser:this},A);if(Z!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(A.type)){Q+=Z||"";continue}}let Y=V;switch(Y.type){case"space":{Q+=this.renderer.space(Y);continue}case"hr":{Q+=this.renderer.hr(Y);continue}case"heading":{Q+=this.renderer.heading(Y);continue}case"code":{Q+=this.renderer.code(Y);continue}case"table":{Q+=this.renderer.table(Y);continue}case"blockquote":{Q+=this.renderer.blockquote(Y);continue}case"list":{Q+=this.renderer.list(Y);continue}case"html":{Q+=this.renderer.html(Y);continue}case"paragraph":{Q+=this.renderer.paragraph(Y);continue}case"text":{let A=Y,Z=this.renderer.text(A);while(X+1<J.length&&J[X+1].type==="text")A=J[++X],Z+=`
`+this.renderer.text(A);if(K)Q+=this.renderer.paragraph({type:"paragraph",raw:Z,text:Z,tokens:[{type:"text",raw:Z,text:Z,escaped:!0}]});else Q+=Z;continue}default:{let A='Token with "'+Y.type+'" type was not found.';if(this.options.silent)return console.error(A),"";else throw new Error(A)}}}return Q}parseInline(J,K=this.renderer){let Q="";for(let X=0;X<J.length;X++){let V=J[X];if(this.options.extensions?.renderers?.[V.type]){let A=this.options.extensions.renderers[V.type].call({parser:this},V);if(A!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(V.type)){Q+=A||"";continue}}let Y=V;switch(Y.type){case"escape":{Q+=K.text(Y);break}case"html":{Q+=K.html(Y);break}case"link":{Q+=K.link(Y);break}case"image":{Q+=K.image(Y);break}case"strong":{Q+=K.strong(Y);break}case"em":{Q+=K.em(Y);break}case"codespan":{Q+=K.codespan(Y);break}case"br":{Q+=K.br(Y);break}case"del":{Q+=K.del(Y);break}case"text":{Q+=K.text(Y);break}default:{let A='Token with "'+Y.type+'" type was not found.';if(this.options.silent)return console.error(A),"";else throw new Error(A)}}}return Q}}class S{options;block;constructor(J){this.options=J||I}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(J){return J}postprocess(J){return J}processAllTokens(J){return J}provideLexer(){return this.block?H.lex:H.lexInline}provideParser(){return this.block?B.parse:B.parseInline}}class WJ{defaults=m();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=B;Renderer=v;TextRenderer=g;Lexer=H;Tokenizer=w;Hooks=S;constructor(...J){this.use(...J)}walkTokens(J,K){let Q=[];for(let X of J)switch(Q=Q.concat(K.call(this,X)),X.type){case"table":{let V=X;for(let Y of V.header)Q=Q.concat(this.walkTokens(Y.tokens,K));for(let Y of V.rows)for(let A of Y)Q=Q.concat(this.walkTokens(A.tokens,K));break}case"list":{let V=X;Q=Q.concat(this.walkTokens(V.items,K));break}default:{let V=X;if(this.defaults.extensions?.childTokens?.[V.type])this.defaults.extensions.childTokens[V.type].forEach((Y)=>{let A=V[Y].flat(1/0);Q=Q.concat(this.walkTokens(A,K))});else if(V.tokens)Q=Q.concat(this.walkTokens(V.tokens,K))}}return Q}use(...J){let K=this.defaults.extensions||{renderers:{},childTokens:{}};return J.forEach((Q)=>{let X={...Q};if(X.async=this.defaults.async||X.async||!1,Q.extensions)Q.extensions.forEach((V)=>{if(!V.name)throw new Error("extension name required");if("renderer"in V){let Y=K.renderers[V.name];if(Y)K.renderers[V.name]=function(...A){let Z=V.renderer.apply(this,A);if(Z===!1)Z=Y.apply(this,A);return Z};else K.renderers[V.name]=V.renderer}if("tokenizer"in V){if(!V.level||V.level!=="block"&&V.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let Y=K[V.level];if(Y)Y.unshift(V.tokenizer);else K[V.level]=[V.tokenizer];if(V.start){if(V.level==="block")if(K.startBlock)K.startBlock.push(V.start);else K.startBlock=[V.start];else if(V.level==="inline")if(K.startInline)K.startInline.push(V.start);else K.startInline=[V.start]}}if("childTokens"in V&&V.childTokens)K.childTokens[V.name]=V.childTokens}),X.extensions=K;if(Q.renderer){let V=this.defaults.renderer||new v(this.defaults);for(let Y in Q.renderer){if(!(Y in V))throw new Error(`renderer '${Y}' does not exist`);if(["options","parser"].includes(Y))continue;let A=Y,Z=Q.renderer[A],$=V[A];V[A]=(...q)=>{let G=Z.apply(V,q);if(G===!1)G=$.apply(V,q);return G||""}}X.renderer=V}if(Q.tokenizer){let V=this.defaults.tokenizer||new w(this.defaults);for(let Y in Q.tokenizer){if(!(Y in V))throw new Error(`tokenizer '${Y}' does not exist`);if(["options","rules","lexer"].includes(Y))continue;let A=Y,Z=Q.tokenizer[A],$=V[A];V[A]=(...q)=>{let G=Z.apply(V,q);if(G===!1)G=$.apply(V,q);return G}}X.tokenizer=V}if(Q.hooks){let V=this.defaults.hooks||new S;for(let Y in Q.hooks){if(!(Y in V))throw new Error(`hook '${Y}' does not exist`);if(["options","block"].includes(Y))continue;let A=Y,Z=Q.hooks[A],$=V[A];if(S.passThroughHooks.has(Y))V[A]=(q)=>{if(this.defaults.async)return Promise.resolve(Z.call(V,q)).then((U)=>{return $.call(V,U)});let G=Z.call(V,q);return $.call(V,G)};else V[A]=(...q)=>{let G=Z.apply(V,q);if(G===!1)G=$.apply(V,q);return G}}X.hooks=V}if(Q.walkTokens){let V=this.defaults.walkTokens,Y=Q.walkTokens;X.walkTokens=function(A){let Z=[];if(Z.push(Y.call(this,A)),V)Z=Z.concat(V.call(this,A));return Z}}this.defaults={...this.defaults,...X}}),this}setOptions(J){return this.defaults={...this.defaults,...J},this}lexer(J,K){return H.lex(J,K??this.defaults)}parser(J,K){return B.parse(J,K??this.defaults)}parseMarkdown(J){return(Q,X)=>{let V={...X},Y={...this.defaults,...V},A=this.onError(!!Y.silent,!!Y.async);if(this.defaults.async===!0&&V.async===!1)return A(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof Q==="undefined"||Q===null)return A(new Error("marked(): input parameter is undefined or null"));if(typeof Q!=="string")return A(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(Q)+", string expected"));if(Y.hooks)Y.hooks.options=Y,Y.hooks.block=J;let Z=Y.hooks?Y.hooks.provideLexer():J?H.lex:H.lexInline,$=Y.hooks?Y.hooks.provideParser():J?B.parse:B.parseInline;if(Y.async)return Promise.resolve(Y.hooks?Y.hooks.preprocess(Q):Q).then((q)=>Z(q,Y)).then((q)=>Y.hooks?Y.hooks.processAllTokens(q):q).then((q)=>Y.walkTokens?Promise.all(this.walkTokens(q,Y.walkTokens)).then(()=>q):q).then((q)=>$(q,Y)).then((q)=>Y.hooks?Y.hooks.postprocess(q):q).catch(A);try{if(Y.hooks)Q=Y.hooks.preprocess(Q);let q=Z(Q,Y);if(Y.hooks)q=Y.hooks.processAllTokens(q);if(Y.walkTokens)this.walkTokens(q,Y.walkTokens);let G=$(q,Y);if(Y.hooks)G=Y.hooks.postprocess(G);return G}catch(q){return A(q)}}}onError(J,K){return(Q)=>{if(Q.message+=`
Please report this to https://github.com/markedjs/marked.`,J){let X="<p>An error occurred:</p><pre>"+z(Q.message+"",!0)+"</pre>";if(K)return Promise.resolve(X);return X}if(K)return Promise.reject(Q);throw Q}}}var D=new WJ;function W(J,K){return D.parse(J,K)}W.options=W.setOptions=function(J){return D.setOptions(J),W.defaults=D.defaults,XJ(W.defaults),W};W.getDefaults=m;W.defaults=I;W.use=function(...J){return D.use(...J),W.defaults=D.defaults,XJ(W.defaults),W};W.walkTokens=function(J,K){return D.walkTokens(J,K)};W.parseInline=D.parseInline;W.Parser=B;W.parser=B.parse;W.Renderer=v;W.TextRenderer=g;W.Lexer=H;W.lexer=H.lex;W.Tokenizer=w;W.Hooks=S;W.parse=W;var{options:eJ,setOptions:JK,use:KK,walkTokens:QK,parseInline:XK}=W;var YK=B.parse,VK=H.lex;var oJ=document.querySelectorAll("button");for(let J of oJ)J.addEventListener("click",(K)=>{let X=K.target.innerText;c(X)});var OJ=document.getElementById("prompt__input");if(OJ)OJ.addEventListener("keydown",(J)=>{if(J.key==="Enter"){J.preventDefault();let K=EJ();c(K)}});var UJ=document.getElementById("prompt__submit");if(UJ)UJ.addEventListener("click",(J)=>{J.preventDefault();let K=EJ();c(K)});function c(J){if(J!=="")rJ(J),tJ(J)}function sJ(){let J=document.querySelector('[data-role="system__logo"]');if(!J)return null;return J.cloneNode(!0)}function nJ(){let J=document.querySelectorAll("a:not(#footprint__link)");for(let K of J)K.target="_blank"}function jJ(){let J=document.querySelector("main");if(J)J.scrollTop=J.scrollHeight}function EJ(){let J=document.getElementById("prompt__input");if(J){let{value:K}=J;return J.value="",K}return"Bonjour !"}function NJ(J){document.querySelector('[data-role="system__loading"]')?.remove();let Q=document.querySelector("main > div:last-child");if(!Q)return;Q.classList.add("prose");let X=J.replace(/<br\/>/g,`

`).replace(/\n{3,}/g,`

`);Q.innerHTML=W.parse(X),nJ(),jJ()}function rJ(J){let K=document.querySelector("main");if(!K)return;let Q=document.createElement("div");Q.setAttribute("data-role","user"),Q.classList.add("user"),Q.textContent=J;let X=document.createElement("div");X.setAttribute("data-role","system");let V=document.createElement("div");V.classList.add("thinking"),X.appendChild(V);let Y=sJ(),A=document.createDocumentFragment();A.appendChild(Q),A.appendChild(Y),A.appendChild(X),K.appendChild(A),jJ()}function tJ(J){let K=document.getElementById("prompt__submit");K.disabled=!0;let Q=document.getElementsByTagName("button");for(let q of Q)q.disabled=!0;let X=window.location.pathname.substring(3),V=new URLSearchParams(window.location.search).get("config"),Y=new URLSearchParams(window.location.search).get("context"),A=`/ai/${X}?message=${encodeURIComponent(J)}&config=${encodeURIComponent(V||"")}&context=${encodeURIComponent(Y||"")}`,Z=new EventSource(A),$="";Z.onmessage=(q)=>{if(q.data!=="pierre_event_stream_closed")$+=q.data,NJ($);else{Z.close(),K.disabled=!1;for(let U of Q)U.disabled=!1;let G=document.getElementById("disclaimer");if(G){let U=G.value,F=document.createElement("div");F.setAttribute("data-role","disclaimer"),F.textContent=U;let j=document.querySelector("main");if(j)j.appendChild(F)}}},Z.onerror=(q)=>{if(console.error("An error occurred with the EventSource:",q),Z.readyState===EventSource.CLOSED)console.error("Connection closed due to incomplete chunked encoding."),$+=" **/ Erreur-réseau : vérifier votre connexion et rafraichissez la page.** ",NJ($),Z.close()}}
