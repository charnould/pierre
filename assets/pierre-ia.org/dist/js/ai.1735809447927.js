function m(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var I=m();function VJ(J){I=J}var P={exec:()=>null};function O(J,K=""){let Q=typeof J==="string"?J:J.source,V={replace:(Y,X)=>{let Z=typeof X==="string"?X:X.source;return Z=Z.replace(M.caret,"$1"),Q=Q.replace(Y,Z),V},getRegex:()=>{return new RegExp(Q,K)}};return V}var M={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:(J)=>new RegExp(`^( {0,3}${J})((?:[\t ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:(J)=>new RegExp(`^ {0,${Math.min(3,J-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),hrRegex:(J)=>new RegExp(`^ {0,${Math.min(3,J-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:(J)=>new RegExp(`^ {0,${Math.min(3,J-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:(J)=>new RegExp(`^ {0,${Math.min(3,J-1)}}#`),htmlBeginRegex:(J)=>new RegExp(`^ {0,${Math.min(3,J-1)}}<(?:[a-z].*>|!--)`,"i")},EJ=/^(?:[ \t]*(?:\n|$))+/,HJ=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,BJ=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,f=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,zJ=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,XJ=/(?:[*+-]|\d{1,9}[.)])/,YJ=O(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,XJ).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),d=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,DJ=/^[^\n]+/,p=/(?!\s*\])(?:\\.|[^\[\]\\])+/,IJ=O(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",p).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),CJ=O(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,XJ).getRegex(),T="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",l=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,yJ=O("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",l).replace("tag",T).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ZJ=O(d).replace("hr",f).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",T).getRegex(),RJ=O(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",ZJ).getRegex(),i={blockquote:RJ,code:HJ,def:IJ,fences:BJ,heading:zJ,hr:f,html:yJ,lheading:YJ,list:CJ,newline:EJ,paragraph:ZJ,table:P,text:DJ},t=O("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",f).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",T).getRegex(),PJ={...i,table:t,paragraph:O(d).replace("hr",f).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",t).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",T).getRegex()},SJ={...i,html:O(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",l).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:P,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:O(d).replace("hr",f).replace("heading",` *#{1,6} *[^
]`).replace("lheading",YJ).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},$J=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,wJ=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,qJ=/^( {2,}|\\)\n(?!\s*$)/,vJ=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,_=/[\p{P}\p{S}]/u,k=/[\s\p{P}\p{S}]/u,AJ=/[^\s\p{P}\p{S}]/u,fJ=O(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,k).getRegex(),LJ=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,bJ=O(/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,"u").replace(/punct/g,_).getRegex(),TJ=O("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)","gu").replace(/notPunctSpace/g,AJ).replace(/punctSpace/g,k).replace(/punct/g,_).getRegex(),_J=O("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,AJ).replace(/punctSpace/g,k).replace(/punct/g,_).getRegex(),gJ=O(/\\(punct)/,"gu").replace(/punct/g,_).getRegex(),uJ=O(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),hJ=O(l).replace("(?:-->|$)","-->").getRegex(),xJ=O("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",hJ).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),b=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,mJ=O(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",b).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),GJ=O(/^!?\[(label)\]\[(ref)\]/).replace("label",b).replace("ref",p).getRegex(),FJ=O(/^!?\[(ref)\](?:\[\])?/).replace("ref",p).getRegex(),dJ=O("reflink|nolink(?!\\()","g").replace("reflink",GJ).replace("nolink",FJ).getRegex(),a={_backpedal:P,anyPunctuation:gJ,autolink:uJ,blockSkip:LJ,br:qJ,code:wJ,del:P,emStrongLDelim:bJ,emStrongRDelimAst:TJ,emStrongRDelimUnd:_J,escape:$J,link:mJ,nolink:FJ,punctuation:fJ,reflink:GJ,reflinkSearch:dJ,tag:xJ,text:vJ,url:P},pJ={...a,link:O(/^!?\[(label)\]\((.*?)\)/).replace("label",b).getRegex(),reflink:O(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",b).getRegex()},x={...a,escape:O($J).replace("])","~|])").getRegex(),url:O(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},lJ={...x,br:O(qJ).replace("{2,}","*").getRegex(),text:O(x.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},L={normal:i,gfm:PJ,pedantic:SJ},y={normal:a,gfm:x,breaks:lJ,pedantic:pJ},iJ={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},e=(J)=>iJ[J];function z(J,K){if(K){if(M.escapeTest.test(J))return J.replace(M.escapeReplace,e)}else if(M.escapeTestNoEncode.test(J))return J.replace(M.escapeReplaceNoEncode,e);return J}function JJ(J){try{J=encodeURI(J).replace(M.percentDecode,"%")}catch{return null}return J}function KJ(J,K){let Q=J.replace(M.findPipe,(X,Z,$)=>{let q=!1,A=Z;while(--A>=0&&$[A]==="\\")q=!q;if(q)return"|";else return" |"}),V=Q.split(M.splitPipe),Y=0;if(!V[0].trim())V.shift();if(V.length>0&&!V.at(-1)?.trim())V.pop();if(K)if(V.length>K)V.splice(K);else while(V.length<K)V.push("");for(;Y<V.length;Y++)V[Y]=V[Y].trim().replace(M.slashPipe,"|");return V}function R(J,K,Q){let V=J.length;if(V===0)return"";let Y=0;while(Y<V){let X=J.charAt(V-Y-1);if(X===K&&!Q)Y++;else if(X!==K&&Q)Y++;else break}return J.slice(0,V-Y)}function kJ(J,K){if(J.indexOf(K[1])===-1)return-1;let Q=0;for(let V=0;V<J.length;V++)if(J[V]==="\\")V++;else if(J[V]===K[0])Q++;else if(J[V]===K[1]){if(Q--,Q<0)return V}return-1}function QJ(J,K,Q,V,Y){let X=K.href,Z=K.title||null,$=J[1].replace(Y.other.outputLinkReplace,"$1");if(J[0].charAt(0)!=="!"){V.state.inLink=!0;let q={type:"link",raw:Q,href:X,title:Z,text:$,tokens:V.inlineTokens($)};return V.state.inLink=!1,q}return{type:"image",raw:Q,href:X,title:Z,text:$}}function aJ(J,K,Q){let V=J.match(Q.other.indentCodeCompensation);if(V===null)return K;let Y=V[1];return K.split(`
`).map((X)=>{let Z=X.match(Q.other.beginningSpace);if(Z===null)return X;let[$]=Z;if($.length>=Y.length)return X.slice(Y.length);return X}).join(`
`)}class w{options;rules;lexer;constructor(J){this.options=J||I}space(J){let K=this.rules.block.newline.exec(J);if(K&&K[0].length>0)return{type:"space",raw:K[0]}}code(J){let K=this.rules.block.code.exec(J);if(K){let Q=K[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:K[0],codeBlockStyle:"indented",text:!this.options.pedantic?R(Q,`
`):Q}}}fences(J){let K=this.rules.block.fences.exec(J);if(K){let Q=K[0],V=aJ(Q,K[3]||"",this.rules);return{type:"code",raw:Q,lang:K[2]?K[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):K[2],text:V}}}heading(J){let K=this.rules.block.heading.exec(J);if(K){let Q=K[2].trim();if(this.rules.other.endingHash.test(Q)){let V=R(Q,"#");if(this.options.pedantic)Q=V.trim();else if(!V||this.rules.other.endingSpaceChar.test(V))Q=V.trim()}return{type:"heading",raw:K[0],depth:K[1].length,text:Q,tokens:this.lexer.inline(Q)}}}hr(J){let K=this.rules.block.hr.exec(J);if(K)return{type:"hr",raw:R(K[0],`
`)}}blockquote(J){let K=this.rules.block.blockquote.exec(J);if(K){let Q=R(K[0],`
`).split(`
`),V="",Y="",X=[];while(Q.length>0){let Z=!1,$=[],q;for(q=0;q<Q.length;q++)if(this.rules.other.blockquoteStart.test(Q[q]))$.push(Q[q]),Z=!0;else if(!Z)$.push(Q[q]);else break;Q=Q.slice(q);let A=$.join(`
`),G=A.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");V=V?`${V}
${A}`:A,Y=Y?`${Y}
${G}`:G;let U=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(G,X,!0),this.lexer.state.top=U,Q.length===0)break;let F=X.at(-1);if(F?.type==="code")break;else if(F?.type==="blockquote"){let j=F,N=j.raw+`
`+Q.join(`
`),E=this.blockquote(N);X[X.length-1]=E,V=V.substring(0,V.length-j.raw.length)+E.raw,Y=Y.substring(0,Y.length-j.text.length)+E.text;break}else if(F?.type==="list"){let j=F,N=j.raw+`
`+Q.join(`
`),E=this.list(N);X[X.length-1]=E,V=V.substring(0,V.length-F.raw.length)+E.raw,Y=Y.substring(0,Y.length-j.raw.length)+E.raw,Q=N.substring(X.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:V,tokens:X,text:Y}}}list(J){let K=this.rules.block.list.exec(J);if(K){let Q=K[1].trim(),V=Q.length>1,Y={type:"list",raw:"",ordered:V,start:V?+Q.slice(0,-1):"",loose:!1,items:[]};if(Q=V?`\\d{1,9}\\${Q.slice(-1)}`:`\\${Q}`,this.options.pedantic)Q=V?Q:"[*+-]";let X=this.rules.other.listItemRegex(Q),Z=!1;while(J){let q=!1,A="",G="";if(!(K=X.exec(J)))break;if(this.rules.block.hr.test(J))break;A=K[0],J=J.substring(A.length);let U=K[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,(u)=>" ".repeat(3*u.length)),F=J.split(`
`,1)[0],j=!U.trim(),N=0;if(this.options.pedantic)N=2,G=U.trimStart();else if(j)N=K[1].length+1;else N=K[2].search(this.rules.other.nonSpaceChar),N=N>4?1:N,G=U.slice(N),N+=K[1].length;if(j&&this.rules.other.blankLine.test(F))A+=F+`
`,J=J.substring(F.length+1),q=!0;if(!q){let u=this.rules.other.nextBulletRegex(N),s=this.rules.other.hrRegex(N),n=this.rules.other.fencesBeginRegex(N),r=this.rules.other.headingBeginRegex(N),MJ=this.rules.other.htmlBeginRegex(N);while(J){let h=J.split(`
`,1)[0],C;if(F=h,this.options.pedantic)F=F.replace(this.rules.other.listReplaceNesting,"  "),C=F;else C=F.replace(this.rules.other.tabCharGlobal,"    ");if(n.test(F))break;if(r.test(F))break;if(MJ.test(F))break;if(u.test(F))break;if(s.test(F))break;if(C.search(this.rules.other.nonSpaceChar)>=N||!F.trim())G+=`
`+C.slice(N);else{if(j)break;if(U.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4)break;if(n.test(U))break;if(r.test(U))break;if(s.test(U))break;G+=`
`+F}if(!j&&!F.trim())j=!0;A+=h+`
`,J=J.substring(h.length+1),U=C.slice(N)}}if(!Y.loose){if(Z)Y.loose=!0;else if(this.rules.other.doubleBlankLine.test(A))Z=!0}let E=null,o;if(this.options.gfm){if(E=this.rules.other.listIsTask.exec(G),E)o=E[0]!=="[ ] ",G=G.replace(this.rules.other.listReplaceTask,"")}Y.items.push({type:"list_item",raw:A,task:!!E,checked:o,loose:!1,text:G,tokens:[]}),Y.raw+=A}let $=Y.items.at(-1);if($)$.raw=$.raw.trimEnd(),$.text=$.text.trimEnd();else return;Y.raw=Y.raw.trimEnd();for(let q=0;q<Y.items.length;q++)if(this.lexer.state.top=!1,Y.items[q].tokens=this.lexer.blockTokens(Y.items[q].text,[]),!Y.loose){let A=Y.items[q].tokens.filter((U)=>U.type==="space"),G=A.length>0&&A.some((U)=>this.rules.other.anyLine.test(U.raw));Y.loose=G}if(Y.loose)for(let q=0;q<Y.items.length;q++)Y.items[q].loose=!0;return Y}}html(J){let K=this.rules.block.html.exec(J);if(K)return{type:"html",block:!0,raw:K[0],pre:K[1]==="pre"||K[1]==="script"||K[1]==="style",text:K[0]}}def(J){let K=this.rules.block.def.exec(J);if(K){let Q=K[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),V=K[2]?K[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",Y=K[3]?K[3].substring(1,K[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):K[3];return{type:"def",tag:Q,raw:K[0],href:V,title:Y}}}table(J){let K=this.rules.block.table.exec(J);if(!K)return;if(!this.rules.other.tableDelimiter.test(K[2]))return;let Q=KJ(K[1]),V=K[2].replace(this.rules.other.tableAlignChars,"").split("|"),Y=K[3]?.trim()?K[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],X={type:"table",raw:K[0],header:[],align:[],rows:[]};if(Q.length!==V.length)return;for(let Z of V)if(this.rules.other.tableAlignRight.test(Z))X.align.push("right");else if(this.rules.other.tableAlignCenter.test(Z))X.align.push("center");else if(this.rules.other.tableAlignLeft.test(Z))X.align.push("left");else X.align.push(null);for(let Z=0;Z<Q.length;Z++)X.header.push({text:Q[Z],tokens:this.lexer.inline(Q[Z]),header:!0,align:X.align[Z]});for(let Z of Y)X.rows.push(KJ(Z,X.header.length).map(($,q)=>{return{text:$,tokens:this.lexer.inline($),header:!1,align:X.align[q]}}));return X}lheading(J){let K=this.rules.block.lheading.exec(J);if(K)return{type:"heading",raw:K[0],depth:K[2].charAt(0)==="="?1:2,text:K[1],tokens:this.lexer.inline(K[1])}}paragraph(J){let K=this.rules.block.paragraph.exec(J);if(K){let Q=K[1].charAt(K[1].length-1)===`
`?K[1].slice(0,-1):K[1];return{type:"paragraph",raw:K[0],text:Q,tokens:this.lexer.inline(Q)}}}text(J){let K=this.rules.block.text.exec(J);if(K)return{type:"text",raw:K[0],text:K[0],tokens:this.lexer.inline(K[0])}}escape(J){let K=this.rules.inline.escape.exec(J);if(K)return{type:"escape",raw:K[0],text:K[1]}}tag(J){let K=this.rules.inline.tag.exec(J);if(K){if(!this.lexer.state.inLink&&this.rules.other.startATag.test(K[0]))this.lexer.state.inLink=!0;else if(this.lexer.state.inLink&&this.rules.other.endATag.test(K[0]))this.lexer.state.inLink=!1;if(!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(K[0]))this.lexer.state.inRawBlock=!0;else if(this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(K[0]))this.lexer.state.inRawBlock=!1;return{type:"html",raw:K[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:K[0]}}}link(J){let K=this.rules.inline.link.exec(J);if(K){let Q=K[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(Q)){if(!this.rules.other.endAngleBracket.test(Q))return;let X=R(Q.slice(0,-1),"\\");if((Q.length-X.length)%2===0)return}else{let X=kJ(K[2],"()");if(X>-1){let $=(K[0].indexOf("!")===0?5:4)+K[1].length+X;K[2]=K[2].substring(0,X),K[0]=K[0].substring(0,$).trim(),K[3]=""}}let V=K[2],Y="";if(this.options.pedantic){let X=this.rules.other.pedanticHrefTitle.exec(V);if(X)V=X[1],Y=X[3]}else Y=K[3]?K[3].slice(1,-1):"";if(V=V.trim(),this.rules.other.startAngleBracket.test(V))if(this.options.pedantic&&!this.rules.other.endAngleBracket.test(Q))V=V.slice(1);else V=V.slice(1,-1);return QJ(K,{href:V?V.replace(this.rules.inline.anyPunctuation,"$1"):V,title:Y?Y.replace(this.rules.inline.anyPunctuation,"$1"):Y},K[0],this.lexer,this.rules)}}reflink(J,K){let Q;if((Q=this.rules.inline.reflink.exec(J))||(Q=this.rules.inline.nolink.exec(J))){let V=(Q[2]||Q[1]).replace(this.rules.other.multipleSpaceGlobal," "),Y=K[V.toLowerCase()];if(!Y){let X=Q[0].charAt(0);return{type:"text",raw:X,text:X}}return QJ(Q,Y,Q[0],this.lexer,this.rules)}}emStrong(J,K,Q=""){let V=this.rules.inline.emStrongLDelim.exec(J);if(!V)return;if(V[3]&&Q.match(this.rules.other.unicodeAlphaNumeric))return;if(!(V[1]||V[2])||!Q||this.rules.inline.punctuation.exec(Q)){let X=[...V[0]].length-1,Z,$,q=X,A=0,G=V[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;G.lastIndex=0,K=K.slice(-1*J.length+X);while((V=G.exec(K))!=null){if(Z=V[1]||V[2]||V[3]||V[4]||V[5]||V[6],!Z)continue;if($=[...Z].length,V[3]||V[4]){q+=$;continue}else if(V[5]||V[6]){if(X%3&&!((X+$)%3)){A+=$;continue}}if(q-=$,q>0)continue;$=Math.min($,$+q+A);let U=[...V[0]][0].length,F=J.slice(0,X+V.index+U+$);if(Math.min(X,$)%2){let N=F.slice(1,-1);return{type:"em",raw:F,text:N,tokens:this.lexer.inlineTokens(N)}}let j=F.slice(2,-2);return{type:"strong",raw:F,text:j,tokens:this.lexer.inlineTokens(j)}}}}codespan(J){let K=this.rules.inline.code.exec(J);if(K){let Q=K[2].replace(this.rules.other.newLineCharGlobal," "),V=this.rules.other.nonSpaceChar.test(Q),Y=this.rules.other.startingSpaceChar.test(Q)&&this.rules.other.endingSpaceChar.test(Q);if(V&&Y)Q=Q.substring(1,Q.length-1);return{type:"codespan",raw:K[0],text:Q}}}br(J){let K=this.rules.inline.br.exec(J);if(K)return{type:"br",raw:K[0]}}del(J){let K=this.rules.inline.del.exec(J);if(K)return{type:"del",raw:K[0],text:K[2],tokens:this.lexer.inlineTokens(K[2])}}autolink(J){let K=this.rules.inline.autolink.exec(J);if(K){let Q,V;if(K[2]==="@")Q=K[1],V="mailto:"+Q;else Q=K[1],V=Q;return{type:"link",raw:K[0],text:Q,href:V,tokens:[{type:"text",raw:Q,text:Q}]}}}url(J){let K;if(K=this.rules.inline.url.exec(J)){let Q,V;if(K[2]==="@")Q=K[0],V="mailto:"+Q;else{let Y;do Y=K[0],K[0]=this.rules.inline._backpedal.exec(K[0])?.[0]??"";while(Y!==K[0]);if(Q=K[0],K[1]==="www.")V="http://"+K[0];else V=K[0]}return{type:"link",raw:K[0],text:Q,href:V,tokens:[{type:"text",raw:Q,text:Q}]}}}inlineText(J){let K=this.rules.inline.text.exec(J);if(K){let Q=this.lexer.state.inRawBlock;return{type:"text",raw:K[0],text:K[0],escaped:Q}}}}class H{tokens;options;state;tokenizer;inlineQueue;constructor(J){this.tokens=[],this.tokens.links=Object.create(null),this.options=J||I,this.options.tokenizer=this.options.tokenizer||new w,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let K={other:M,block:L.normal,inline:y.normal};if(this.options.pedantic)K.block=L.pedantic,K.inline=y.pedantic;else if(this.options.gfm)if(K.block=L.gfm,this.options.breaks)K.inline=y.breaks;else K.inline=y.gfm;this.tokenizer.rules=K}static get rules(){return{block:L,inline:y}}static lex(J,K){return new H(K).lex(J)}static lexInline(J,K){return new H(K).inlineTokens(J)}lex(J){J=J.replace(M.carriageReturn,`
`),this.blockTokens(J,this.tokens);for(let K=0;K<this.inlineQueue.length;K++){let Q=this.inlineQueue[K];this.inlineTokens(Q.src,Q.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(J,K=[],Q=!1){if(this.options.pedantic)J=J.replace(M.tabCharGlobal,"    ").replace(M.spaceLine,"");while(J){let V;if(this.options.extensions?.block?.some((X)=>{if(V=X.call({lexer:this},J,K))return J=J.substring(V.raw.length),K.push(V),!0;return!1}))continue;if(V=this.tokenizer.space(J)){J=J.substring(V.raw.length);let X=K.at(-1);if(V.raw.length===1&&X!==void 0)X.raw+=`
`;else K.push(V);continue}if(V=this.tokenizer.code(J)){J=J.substring(V.raw.length);let X=K.at(-1);if(X?.type==="paragraph"||X?.type==="text")X.raw+=`
`+V.raw,X.text+=`
`+V.text,this.inlineQueue.at(-1).src=X.text;else K.push(V);continue}if(V=this.tokenizer.fences(J)){J=J.substring(V.raw.length),K.push(V);continue}if(V=this.tokenizer.heading(J)){J=J.substring(V.raw.length),K.push(V);continue}if(V=this.tokenizer.hr(J)){J=J.substring(V.raw.length),K.push(V);continue}if(V=this.tokenizer.blockquote(J)){J=J.substring(V.raw.length),K.push(V);continue}if(V=this.tokenizer.list(J)){J=J.substring(V.raw.length),K.push(V);continue}if(V=this.tokenizer.html(J)){J=J.substring(V.raw.length),K.push(V);continue}if(V=this.tokenizer.def(J)){J=J.substring(V.raw.length);let X=K.at(-1);if(X?.type==="paragraph"||X?.type==="text")X.raw+=`
`+V.raw,X.text+=`
`+V.raw,this.inlineQueue.at(-1).src=X.text;else if(!this.tokens.links[V.tag])this.tokens.links[V.tag]={href:V.href,title:V.title};continue}if(V=this.tokenizer.table(J)){J=J.substring(V.raw.length),K.push(V);continue}if(V=this.tokenizer.lheading(J)){J=J.substring(V.raw.length),K.push(V);continue}let Y=J;if(this.options.extensions?.startBlock){let X=1/0,Z=J.slice(1),$;if(this.options.extensions.startBlock.forEach((q)=>{if($=q.call({lexer:this},Z),typeof $==="number"&&$>=0)X=Math.min(X,$)}),X<1/0&&X>=0)Y=J.substring(0,X+1)}if(this.state.top&&(V=this.tokenizer.paragraph(Y))){let X=K.at(-1);if(Q&&X?.type==="paragraph")X.raw+=`
`+V.raw,X.text+=`
`+V.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=X.text;else K.push(V);Q=Y.length!==J.length,J=J.substring(V.raw.length);continue}if(V=this.tokenizer.text(J)){J=J.substring(V.raw.length);let X=K.at(-1);if(X?.type==="text")X.raw+=`
`+V.raw,X.text+=`
`+V.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=X.text;else K.push(V);continue}if(J){let X="Infinite loop on byte: "+J.charCodeAt(0);if(this.options.silent){console.error(X);break}else throw new Error(X)}}return this.state.top=!0,K}inline(J,K=[]){return this.inlineQueue.push({src:J,tokens:K}),K}inlineTokens(J,K=[]){let Q=J,V=null;if(this.tokens.links){let Z=Object.keys(this.tokens.links);if(Z.length>0){while((V=this.tokenizer.rules.inline.reflinkSearch.exec(Q))!=null)if(Z.includes(V[0].slice(V[0].lastIndexOf("[")+1,-1)))Q=Q.slice(0,V.index)+"["+"a".repeat(V[0].length-2)+"]"+Q.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex)}}while((V=this.tokenizer.rules.inline.blockSkip.exec(Q))!=null)Q=Q.slice(0,V.index)+"["+"a".repeat(V[0].length-2)+"]"+Q.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);while((V=this.tokenizer.rules.inline.anyPunctuation.exec(Q))!=null)Q=Q.slice(0,V.index)+"++"+Q.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let Y=!1,X="";while(J){if(!Y)X="";Y=!1;let Z;if(this.options.extensions?.inline?.some((q)=>{if(Z=q.call({lexer:this},J,K))return J=J.substring(Z.raw.length),K.push(Z),!0;return!1}))continue;if(Z=this.tokenizer.escape(J)){J=J.substring(Z.raw.length),K.push(Z);continue}if(Z=this.tokenizer.tag(J)){J=J.substring(Z.raw.length),K.push(Z);continue}if(Z=this.tokenizer.link(J)){J=J.substring(Z.raw.length),K.push(Z);continue}if(Z=this.tokenizer.reflink(J,this.tokens.links)){J=J.substring(Z.raw.length);let q=K.at(-1);if(Z.type==="text"&&q?.type==="text")q.raw+=Z.raw,q.text+=Z.text;else K.push(Z);continue}if(Z=this.tokenizer.emStrong(J,Q,X)){J=J.substring(Z.raw.length),K.push(Z);continue}if(Z=this.tokenizer.codespan(J)){J=J.substring(Z.raw.length),K.push(Z);continue}if(Z=this.tokenizer.br(J)){J=J.substring(Z.raw.length),K.push(Z);continue}if(Z=this.tokenizer.del(J)){J=J.substring(Z.raw.length),K.push(Z);continue}if(Z=this.tokenizer.autolink(J)){J=J.substring(Z.raw.length),K.push(Z);continue}if(!this.state.inLink&&(Z=this.tokenizer.url(J))){J=J.substring(Z.raw.length),K.push(Z);continue}let $=J;if(this.options.extensions?.startInline){let q=1/0,A=J.slice(1),G;if(this.options.extensions.startInline.forEach((U)=>{if(G=U.call({lexer:this},A),typeof G==="number"&&G>=0)q=Math.min(q,G)}),q<1/0&&q>=0)$=J.substring(0,q+1)}if(Z=this.tokenizer.inlineText($)){if(J=J.substring(Z.raw.length),Z.raw.slice(-1)!=="_")X=Z.raw.slice(-1);Y=!0;let q=K.at(-1);if(q?.type==="text")q.raw+=Z.raw,q.text+=Z.text;else K.push(Z);continue}if(J){let q="Infinite loop on byte: "+J.charCodeAt(0);if(this.options.silent){console.error(q);break}else throw new Error(q)}}return K}}class v{options;parser;constructor(J){this.options=J||I}space(J){return""}code({text:J,lang:K,escaped:Q}){let V=(K||"").match(M.notSpaceStart)?.[0],Y=J.replace(M.endingNewline,"")+`
`;if(!V)return"<pre><code>"+(Q?Y:z(Y,!0))+`</code></pre>
`;return'<pre><code class="language-'+z(V)+'">'+(Q?Y:z(Y,!0))+`</code></pre>
`}blockquote({tokens:J}){return`<blockquote>
${this.parser.parse(J)}</blockquote>
`}html({text:J}){return J}heading({tokens:J,depth:K}){return`<h${K}>${this.parser.parseInline(J)}</h${K}>
`}hr(J){return`<hr>
`}list(J){let{ordered:K,start:Q}=J,V="";for(let Z=0;Z<J.items.length;Z++){let $=J.items[Z];V+=this.listitem($)}let Y=K?"ol":"ul",X=K&&Q!==1?' start="'+Q+'"':"";return"<"+Y+X+`>
`+V+"</"+Y+`>
`}listitem(J){let K="";if(J.task){let Q=this.checkbox({checked:!!J.checked});if(J.loose)if(J.tokens[0]?.type==="paragraph"){if(J.tokens[0].text=Q+" "+J.tokens[0].text,J.tokens[0].tokens&&J.tokens[0].tokens.length>0&&J.tokens[0].tokens[0].type==="text")J.tokens[0].tokens[0].text=Q+" "+z(J.tokens[0].tokens[0].text),J.tokens[0].tokens[0].escaped=!0}else J.tokens.unshift({type:"text",raw:Q+" ",text:Q+" ",escaped:!0});else K+=Q+" "}return K+=this.parser.parse(J.tokens,!!J.loose),`<li>${K}</li>
`}checkbox({checked:J}){return"<input "+(J?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:J}){return`<p>${this.parser.parseInline(J)}</p>
`}table(J){let K="",Q="";for(let Y=0;Y<J.header.length;Y++)Q+=this.tablecell(J.header[Y]);K+=this.tablerow({text:Q});let V="";for(let Y=0;Y<J.rows.length;Y++){let X=J.rows[Y];Q="";for(let Z=0;Z<X.length;Z++)Q+=this.tablecell(X[Z]);V+=this.tablerow({text:Q})}if(V)V=`<tbody>${V}</tbody>`;return`<table>
<thead>
`+K+`</thead>
`+V+`</table>
`}tablerow({text:J}){return`<tr>
${J}</tr>
`}tablecell(J){let K=this.parser.parseInline(J.tokens),Q=J.header?"th":"td";return(J.align?`<${Q} align="${J.align}">`:`<${Q}>`)+K+`</${Q}>
`}strong({tokens:J}){return`<strong>${this.parser.parseInline(J)}</strong>`}em({tokens:J}){return`<em>${this.parser.parseInline(J)}</em>`}codespan({text:J}){return`<code>${z(J,!0)}</code>`}br(J){return"<br>"}del({tokens:J}){return`<del>${this.parser.parseInline(J)}</del>`}link({href:J,title:K,tokens:Q}){let V=this.parser.parseInline(Q),Y=JJ(J);if(Y===null)return V;J=Y;let X='<a href="'+J+'"';if(K)X+=' title="'+z(K)+'"';return X+=">"+V+"</a>",X}image({href:J,title:K,text:Q}){let V=JJ(J);if(V===null)return z(Q);J=V;let Y=`<img src="${J}" alt="${Q}"`;if(K)Y+=` title="${z(K)}"`;return Y+=">",Y}text(J){return"tokens"in J&&J.tokens?this.parser.parseInline(J.tokens):("escaped"in J)&&J.escaped?J.text:z(J.text)}}class g{strong({text:J}){return J}em({text:J}){return J}codespan({text:J}){return J}del({text:J}){return J}html({text:J}){return J}text({text:J}){return J}link({text:J}){return""+J}image({text:J}){return""+J}br(){return""}}class B{options;renderer;textRenderer;constructor(J){this.options=J||I,this.options.renderer=this.options.renderer||new v,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new g}static parse(J,K){return new B(K).parse(J)}static parseInline(J,K){return new B(K).parseInline(J)}parse(J,K=!0){let Q="";for(let V=0;V<J.length;V++){let Y=J[V];if(this.options.extensions?.renderers?.[Y.type]){let Z=Y,$=this.options.extensions.renderers[Z.type].call({parser:this},Z);if($!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(Z.type)){Q+=$||"";continue}}let X=Y;switch(X.type){case"space":{Q+=this.renderer.space(X);continue}case"hr":{Q+=this.renderer.hr(X);continue}case"heading":{Q+=this.renderer.heading(X);continue}case"code":{Q+=this.renderer.code(X);continue}case"table":{Q+=this.renderer.table(X);continue}case"blockquote":{Q+=this.renderer.blockquote(X);continue}case"list":{Q+=this.renderer.list(X);continue}case"html":{Q+=this.renderer.html(X);continue}case"paragraph":{Q+=this.renderer.paragraph(X);continue}case"text":{let Z=X,$=this.renderer.text(Z);while(V+1<J.length&&J[V+1].type==="text")Z=J[++V],$+=`
`+this.renderer.text(Z);if(K)Q+=this.renderer.paragraph({type:"paragraph",raw:$,text:$,tokens:[{type:"text",raw:$,text:$,escaped:!0}]});else Q+=$;continue}default:{let Z='Token with "'+X.type+'" type was not found.';if(this.options.silent)return console.error(Z),"";else throw new Error(Z)}}}return Q}parseInline(J,K=this.renderer){let Q="";for(let V=0;V<J.length;V++){let Y=J[V];if(this.options.extensions?.renderers?.[Y.type]){let Z=this.options.extensions.renderers[Y.type].call({parser:this},Y);if(Z!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(Y.type)){Q+=Z||"";continue}}let X=Y;switch(X.type){case"escape":{Q+=K.text(X);break}case"html":{Q+=K.html(X);break}case"link":{Q+=K.link(X);break}case"image":{Q+=K.image(X);break}case"strong":{Q+=K.strong(X);break}case"em":{Q+=K.em(X);break}case"codespan":{Q+=K.codespan(X);break}case"br":{Q+=K.br(X);break}case"del":{Q+=K.del(X);break}case"text":{Q+=K.text(X);break}default:{let Z='Token with "'+X.type+'" type was not found.';if(this.options.silent)return console.error(Z),"";else throw new Error(Z)}}}return Q}}class S{options;block;constructor(J){this.options=J||I}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(J){return J}postprocess(J){return J}processAllTokens(J){return J}provideLexer(){return this.block?H.lex:H.lexInline}provideParser(){return this.block?B.parse:B.parseInline}}class WJ{defaults=m();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=B;Renderer=v;TextRenderer=g;Lexer=H;Tokenizer=w;Hooks=S;constructor(...J){this.use(...J)}walkTokens(J,K){let Q=[];for(let V of J)switch(Q=Q.concat(K.call(this,V)),V.type){case"table":{let Y=V;for(let X of Y.header)Q=Q.concat(this.walkTokens(X.tokens,K));for(let X of Y.rows)for(let Z of X)Q=Q.concat(this.walkTokens(Z.tokens,K));break}case"list":{let Y=V;Q=Q.concat(this.walkTokens(Y.items,K));break}default:{let Y=V;if(this.defaults.extensions?.childTokens?.[Y.type])this.defaults.extensions.childTokens[Y.type].forEach((X)=>{let Z=Y[X].flat(1/0);Q=Q.concat(this.walkTokens(Z,K))});else if(Y.tokens)Q=Q.concat(this.walkTokens(Y.tokens,K))}}return Q}use(...J){let K=this.defaults.extensions||{renderers:{},childTokens:{}};return J.forEach((Q)=>{let V={...Q};if(V.async=this.defaults.async||V.async||!1,Q.extensions)Q.extensions.forEach((Y)=>{if(!Y.name)throw new Error("extension name required");if("renderer"in Y){let X=K.renderers[Y.name];if(X)K.renderers[Y.name]=function(...Z){let $=Y.renderer.apply(this,Z);if($===!1)$=X.apply(this,Z);return $};else K.renderers[Y.name]=Y.renderer}if("tokenizer"in Y){if(!Y.level||Y.level!=="block"&&Y.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let X=K[Y.level];if(X)X.unshift(Y.tokenizer);else K[Y.level]=[Y.tokenizer];if(Y.start){if(Y.level==="block")if(K.startBlock)K.startBlock.push(Y.start);else K.startBlock=[Y.start];else if(Y.level==="inline")if(K.startInline)K.startInline.push(Y.start);else K.startInline=[Y.start]}}if("childTokens"in Y&&Y.childTokens)K.childTokens[Y.name]=Y.childTokens}),V.extensions=K;if(Q.renderer){let Y=this.defaults.renderer||new v(this.defaults);for(let X in Q.renderer){if(!(X in Y))throw new Error(`renderer '${X}' does not exist`);if(["options","parser"].includes(X))continue;let Z=X,$=Q.renderer[Z],q=Y[Z];Y[Z]=(...A)=>{let G=$.apply(Y,A);if(G===!1)G=q.apply(Y,A);return G||""}}V.renderer=Y}if(Q.tokenizer){let Y=this.defaults.tokenizer||new w(this.defaults);for(let X in Q.tokenizer){if(!(X in Y))throw new Error(`tokenizer '${X}' does not exist`);if(["options","rules","lexer"].includes(X))continue;let Z=X,$=Q.tokenizer[Z],q=Y[Z];Y[Z]=(...A)=>{let G=$.apply(Y,A);if(G===!1)G=q.apply(Y,A);return G}}V.tokenizer=Y}if(Q.hooks){let Y=this.defaults.hooks||new S;for(let X in Q.hooks){if(!(X in Y))throw new Error(`hook '${X}' does not exist`);if(["options","block"].includes(X))continue;let Z=X,$=Q.hooks[Z],q=Y[Z];if(S.passThroughHooks.has(X))Y[Z]=(A)=>{if(this.defaults.async)return Promise.resolve($.call(Y,A)).then((U)=>{return q.call(Y,U)});let G=$.call(Y,A);return q.call(Y,G)};else Y[Z]=(...A)=>{let G=$.apply(Y,A);if(G===!1)G=q.apply(Y,A);return G}}V.hooks=Y}if(Q.walkTokens){let Y=this.defaults.walkTokens,X=Q.walkTokens;V.walkTokens=function(Z){let $=[];if($.push(X.call(this,Z)),Y)$=$.concat(Y.call(this,Z));return $}}this.defaults={...this.defaults,...V}}),this}setOptions(J){return this.defaults={...this.defaults,...J},this}lexer(J,K){return H.lex(J,K??this.defaults)}parser(J,K){return B.parse(J,K??this.defaults)}parseMarkdown(J){return(Q,V)=>{let Y={...V},X={...this.defaults,...Y},Z=this.onError(!!X.silent,!!X.async);if(this.defaults.async===!0&&Y.async===!1)return Z(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof Q==="undefined"||Q===null)return Z(new Error("marked(): input parameter is undefined or null"));if(typeof Q!=="string")return Z(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(Q)+", string expected"));if(X.hooks)X.hooks.options=X,X.hooks.block=J;let $=X.hooks?X.hooks.provideLexer():J?H.lex:H.lexInline,q=X.hooks?X.hooks.provideParser():J?B.parse:B.parseInline;if(X.async)return Promise.resolve(X.hooks?X.hooks.preprocess(Q):Q).then((A)=>$(A,X)).then((A)=>X.hooks?X.hooks.processAllTokens(A):A).then((A)=>X.walkTokens?Promise.all(this.walkTokens(A,X.walkTokens)).then(()=>A):A).then((A)=>q(A,X)).then((A)=>X.hooks?X.hooks.postprocess(A):A).catch(Z);try{if(X.hooks)Q=X.hooks.preprocess(Q);let A=$(Q,X);if(X.hooks)A=X.hooks.processAllTokens(A);if(X.walkTokens)this.walkTokens(A,X.walkTokens);let G=q(A,X);if(X.hooks)G=X.hooks.postprocess(G);return G}catch(A){return Z(A)}}}onError(J,K){return(Q)=>{if(Q.message+=`
Please report this to https://github.com/markedjs/marked.`,J){let V="<p>An error occurred:</p><pre>"+z(Q.message+"",!0)+"</pre>";if(K)return Promise.resolve(V);return V}if(K)return Promise.reject(Q);throw Q}}}var D=new WJ;function W(J,K){return D.parse(J,K)}W.options=W.setOptions=function(J){return D.setOptions(J),W.defaults=D.defaults,VJ(W.defaults),W};W.getDefaults=m;W.defaults=I;W.use=function(...J){return D.use(...J),W.defaults=D.defaults,VJ(W.defaults),W};W.walkTokens=function(J,K){return D.walkTokens(J,K)};W.parseInline=D.parseInline;W.Parser=B;W.parser=B.parse;W.Renderer=v;W.TextRenderer=g;W.Lexer=H;W.lexer=H.lex;W.Tokenizer=w;W.Hooks=S;W.parse=W;var{options:eJ,setOptions:JK,use:KK,walkTokens:QK,parseInline:VK}=W;var XK=B.parse,YK=H.lex;var cJ=document.querySelectorAll("button");for(let J of cJ)J.addEventListener("click",(K)=>{let V=K.target.innerText;c(V)});var OJ=document.getElementById("prompt__input");if(OJ)OJ.addEventListener("keydown",(J)=>{if(J.key==="Enter"){J.preventDefault();let K=jJ();c(K)}});var NJ=document.getElementById("prompt__submit");if(NJ)NJ.addEventListener("click",(J)=>{J.preventDefault();let K=jJ();c(K)});function c(J){if(J!=="")rJ(J),tJ(J)}function oJ(){let J=document.querySelector('[data-role="system__logo"]');if(!J)return null;return J.cloneNode(!0)}function sJ(){let J=document.querySelectorAll("a:not(#footprint__link)");for(let K of J)K.target="_blank"}function UJ(){let J=document.querySelector("main");if(J)J.scrollTop=J.scrollHeight}function jJ(){let J=document.getElementById("prompt__input");if(J){let{value:K}=J;return J.value="",K}return"Bonjour !"}function nJ(J){document.querySelector('[data-role="system__loading"]')?.remove();let Q=document.querySelector("main > div:last-child");if(!Q)return;Q.classList.add("prose");let V=J.replace(/<br\/>/g,`

`).replace(/\n{3,}/g,`

`);Q.innerHTML=W.parse(V),sJ(),UJ()}function rJ(J){let K=document.querySelector("main");if(!K)return;let Q=document.createElement("div");Q.setAttribute("data-role","user"),Q.classList.add("user"),Q.textContent=J;let V=document.createElement("div");V.setAttribute("data-role","system");let Y=document.createElement("div");Y.classList.add("thinking"),V.appendChild(Y);let X=oJ(),Z=document.createDocumentFragment();Z.appendChild(Q),Z.appendChild(X),Z.appendChild(V),K.appendChild(Z),UJ()}async function tJ(J){document.getElementById("prompt__submit").disabled=!0;for(let K of document.querySelectorAll("button"))K.disabled=!0;try{let K=window.location.pathname.substring(3),Q=new URLSearchParams(window.location.search),V=Q.get("config")||"",Y=Q.get("context")||"",X=`/ai/${K}?message=${encodeURIComponent(J)}&config=${encodeURIComponent(V)}&context=${encodeURIComponent(Y)}`,$=(await fetch(X,{method:"GET"})).body.getReader(),q=new TextDecoder,A="";while(!0){let{done:G,value:U}=await $.read();if(G){let F=document.getElementById("disclaimer");if(F){let j=document.createElement("div");j.setAttribute("data-role","disclaimer"),j.textContent=F.value;let N=document.querySelector("main");if(N)N.appendChild(j)}break}A+=q.decode(U),nJ(A)}console.log(A)}catch(K){console.error("Error fetching AI response:",K)}finally{document.getElementById("prompt__submit").disabled=!1;for(let K of document.querySelectorAll("button"))K.disabled=!1}}
