/*! @license DOMPurify 3.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.1/LICENSE */var{entries:Q6,setPrototypeOf:s1,isFrozen:T6,getPrototypeOf:i6,getOwnPropertyDescriptor:s6}=Object,{freeze:y,seal:u,create:j1}=Object,{apply:z1,construct:B1}=typeof Reflect<"u"&&Reflect;if(!y)y=function(J){return J};if(!u)u=function(J){return J};if(!z1)z1=function(J,q){for(var K=arguments.length,Q=Array(K>2?K-2:0),Y=2;Y<K;Y++)Q[Y-2]=arguments[Y];return J.apply(q,Q)};if(!B1)B1=function(J){for(var q=arguments.length,K=Array(q>1?q-1:0),Q=1;Q<q;Q++)K[Q-1]=arguments[Q];return new J(...K)};var O0=p(Array.prototype.forEach),a6=p(Array.prototype.lastIndexOf),a1=p(Array.prototype.pop),B0=p(Array.prototype.push),o6=p(Array.prototype.splice),g0=p(String.prototype.toLowerCase),Z1=p(String.prototype.toString),K1=p(String.prototype.match),w0=p(String.prototype.replace),n6=p(String.prototype.indexOf),r6=p(String.prototype.trim),N=p(Object.prototype.hasOwnProperty),g=p(RegExp.prototype.test),W0=t6(TypeError);function p(Z){return function(J){if(J instanceof RegExp)J.lastIndex=0;for(var q=arguments.length,K=Array(q>1?q-1:0),Q=1;Q<q;Q++)K[Q-1]=arguments[Q];return z1(Z,J,K)}}function t6(Z){return function(){for(var J=arguments.length,q=Array(J),K=0;K<J;K++)q[K]=arguments[K];return B1(Z,q)}}function G(Z,J){let q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g0;if(s1)s1(Z,null);let K=J.length;while(K--){let Q=J[K];if(typeof Q==="string"){let Y=q(Q);if(Y!==Q){if(!T6(J))J[K]=Y;Q=Y}}Z[Q]=!0}return Z}function e6(Z){for(let J=0;J<Z.length;J++)if(!N(Z,J))Z[J]=null;return Z}function T(Z){let J=j1(null);for(let[q,K]of Q6(Z))if(N(Z,q))if(Array.isArray(K))J[q]=e6(K);else if(K&&typeof K==="object"&&K.constructor===Object)J[q]=T(K);else J[q]=K;return J}function x0(Z,J){while(Z!==null){let K=s6(Z,J);if(K){if(K.get)return p(K.get);if(typeof K.value==="function")return p(K.value)}Z=i6(Z)}function q(){return null}return q}var o1=y(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),$1=y(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),V1=y(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),J7=y(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Y1=y(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Q7=y(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),n1=y(["#text"]),r1=y(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),X1=y(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),t1=y(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),L0=y(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),q7=u(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Z7=u(/<%[\w\W]*|[\w\W]*%>/gm),K7=u(/\$\{[\w\W]*/gm),$7=u(/^data-[\-\w.\u00B7-\uFFFF]+$/),V7=u(/^aria-[\-\w]+$/),q6=u(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Y7=u(/^(?:\w+script|data):/i),X7=u(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Z6=u(/^html$/i),j7=u(/^[a-z][.\w]*(-[.\w]+)+$/i),e1=Object.freeze({__proto__:null,ARIA_ATTR:V7,ATTR_WHITESPACE:X7,CUSTOM_ELEMENT:j7,DATA_ATTR:$7,DOCTYPE_NAME:Z6,ERB_EXPR:Z7,IS_ALLOWED_URI:q6,IS_SCRIPT_OR_DATA:Y7,MUSTACHE_EXPR:q7,TMPLIT_EXPR:K7}),G0={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},z7=function(){return typeof window>"u"?null:window},B7=function(J,q){if(typeof J!=="object"||typeof J.createPolicy!=="function")return null;let K=null,Q="data-tt-policy-suffix";if(q&&q.hasAttribute(Q))K=q.getAttribute(Q);let Y="dompurify"+(K?"#"+K:"");try{return J.createPolicy(Y,{createHTML(V){return V},createScriptURL(V){return V}})}catch(V){return console.warn("TrustedTypes policy "+Y+" could not be created."),null}},J6=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function K6(){let Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:z7(),J=(x)=>K6(x);if(J.version="3.3.1",J.removed=[],!Z||!Z.document||Z.document.nodeType!==G0.document||!Z.Element)return J.isSupported=!1,J;let{document:q}=Z,K=q,Q=K.currentScript,{DocumentFragment:Y,HTMLTemplateElement:V,Node:z,Element:X,NodeFilter:W,NamedNodeMap:B=Z.NamedNodeMap||Z.MozNamedAttrMap,HTMLFormElement:U,DOMParser:b,trustedTypes:h}=Z,H=X.prototype,S=x0(H,"cloneNode"),h0=x0(H,"remove"),F0=x0(H,"nextSibling"),C0=x0(H,"childNodes"),J0=x0(H,"parentNode");if(typeof V==="function"){let x=q.createElement("template");if(x.content&&x.content.ownerDocument)q=x.content.ownerDocument}let f,l="",{implementation:d0,createNodeIterator:M6,createDocumentFragment:S6,getElementsByTagName:O6}=q,{importNode:L6}=K,L=J6();J.isSupported=typeof Q6==="function"&&typeof J0==="function"&&d0&&d0.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:E0,ERB_EXPR:_0,TMPLIT_EXPR:c0,DATA_ATTR:g6,ARIA_ATTR:y6,IS_SCRIPT_OR_DATA:p6,ATTR_WHITESPACE:C1,CUSTOM_ELEMENT:m6}=e1,{IS_ALLOWED_URI:I1}=e1,D=null,f1=G({},[...o1,...$1,...V1,...Y1,...n1]),R=null,P1=G({},[...r1,...X1,...t1,...L0]),C=Object.seal(j1(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),X0=null,T0=null,Q0=Object.seal(j1(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}})),D1=!0,i0=!0,R1=!1,M1=!0,q0=!1,I0=!0,n=!1,s0=!1,a0=!1,Z0=!1,f0=!1,P0=!1,S1=!0,O1=!1,A6="user-content-",o0=!0,j0=!1,K0={},_=null,n0=G({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),L1=null,g1=G({},["audio","video","img","source","image","track"]),r0=null,y1=G({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),D0="http://www.w3.org/1998/Math/MathML",R0="http://www.w3.org/2000/svg",i="http://www.w3.org/1999/xhtml",$0=i,t0=!1,e0=null,u6=G({},[D0,R0,i],Z1),M0=G({},["mi","mo","mn","ms","mtext"]),S0=G({},["annotation-xml"]),l6=G({},["title","style","font","a","script"]),z0=null,N6=["application/xhtml+xml","text/html"],d6="text/html",P=null,V0=null,E6=q.createElement("form"),p1=function($){return $ instanceof RegExp||$ instanceof Function},J1=function(){let $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(V0&&V0===$)return;if(!$||typeof $!=="object")$={};if($=T($),z0=N6.indexOf($.PARSER_MEDIA_TYPE)===-1?d6:$.PARSER_MEDIA_TYPE,P=z0==="application/xhtml+xml"?Z1:g0,D=N($,"ALLOWED_TAGS")?G({},$.ALLOWED_TAGS,P):f1,R=N($,"ALLOWED_ATTR")?G({},$.ALLOWED_ATTR,P):P1,e0=N($,"ALLOWED_NAMESPACES")?G({},$.ALLOWED_NAMESPACES,Z1):u6,r0=N($,"ADD_URI_SAFE_ATTR")?G(T(y1),$.ADD_URI_SAFE_ATTR,P):y1,L1=N($,"ADD_DATA_URI_TAGS")?G(T(g1),$.ADD_DATA_URI_TAGS,P):g1,_=N($,"FORBID_CONTENTS")?G({},$.FORBID_CONTENTS,P):n0,X0=N($,"FORBID_TAGS")?G({},$.FORBID_TAGS,P):T({}),T0=N($,"FORBID_ATTR")?G({},$.FORBID_ATTR,P):T({}),K0=N($,"USE_PROFILES")?$.USE_PROFILES:!1,D1=$.ALLOW_ARIA_ATTR!==!1,i0=$.ALLOW_DATA_ATTR!==!1,R1=$.ALLOW_UNKNOWN_PROTOCOLS||!1,M1=$.ALLOW_SELF_CLOSE_IN_ATTR!==!1,q0=$.SAFE_FOR_TEMPLATES||!1,I0=$.SAFE_FOR_XML!==!1,n=$.WHOLE_DOCUMENT||!1,Z0=$.RETURN_DOM||!1,f0=$.RETURN_DOM_FRAGMENT||!1,P0=$.RETURN_TRUSTED_TYPE||!1,a0=$.FORCE_BODY||!1,S1=$.SANITIZE_DOM!==!1,O1=$.SANITIZE_NAMED_PROPS||!1,o0=$.KEEP_CONTENT!==!1,j0=$.IN_PLACE||!1,I1=$.ALLOWED_URI_REGEXP||q6,$0=$.NAMESPACE||i,M0=$.MATHML_TEXT_INTEGRATION_POINTS||M0,S0=$.HTML_INTEGRATION_POINTS||S0,C=$.CUSTOM_ELEMENT_HANDLING||{},$.CUSTOM_ELEMENT_HANDLING&&p1($.CUSTOM_ELEMENT_HANDLING.tagNameCheck))C.tagNameCheck=$.CUSTOM_ELEMENT_HANDLING.tagNameCheck;if($.CUSTOM_ELEMENT_HANDLING&&p1($.CUSTOM_ELEMENT_HANDLING.attributeNameCheck))C.attributeNameCheck=$.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;if($.CUSTOM_ELEMENT_HANDLING&&typeof $.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements==="boolean")C.allowCustomizedBuiltInElements=$.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;if(q0)i0=!1;if(f0)Z0=!0;if(K0){if(D=G({},n1),R=[],K0.html===!0)G(D,o1),G(R,r1);if(K0.svg===!0)G(D,$1),G(R,X1),G(R,L0);if(K0.svgFilters===!0)G(D,V1),G(R,X1),G(R,L0);if(K0.mathMl===!0)G(D,Y1),G(R,t1),G(R,L0)}if($.ADD_TAGS)if(typeof $.ADD_TAGS==="function")Q0.tagCheck=$.ADD_TAGS;else{if(D===f1)D=T(D);G(D,$.ADD_TAGS,P)}if($.ADD_ATTR)if(typeof $.ADD_ATTR==="function")Q0.attributeCheck=$.ADD_ATTR;else{if(R===P1)R=T(R);G(R,$.ADD_ATTR,P)}if($.ADD_URI_SAFE_ATTR)G(r0,$.ADD_URI_SAFE_ATTR,P);if($.FORBID_CONTENTS){if(_===n0)_=T(_);G(_,$.FORBID_CONTENTS,P)}if($.ADD_FORBID_CONTENTS){if(_===n0)_=T(_);G(_,$.ADD_FORBID_CONTENTS,P)}if(o0)D["#text"]=!0;if(n)G(D,["html","head","body"]);if(D.table)G(D,["tbody"]),delete X0.tbody;if($.TRUSTED_TYPES_POLICY){if(typeof $.TRUSTED_TYPES_POLICY.createHTML!=="function")throw W0('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof $.TRUSTED_TYPES_POLICY.createScriptURL!=="function")throw W0('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');f=$.TRUSTED_TYPES_POLICY,l=f.createHTML("")}else{if(f===void 0)f=B7(h,Q);if(f!==null&&typeof l==="string")l=f.createHTML("")}if(y)y($);V0=$},m1=G({},[...$1,...V1,...J7]),A1=G({},[...Y1,...Q7]),_6=function($){let j=J0($);if(!j||!j.tagName)j={namespaceURI:$0,tagName:"template"};let w=g0($.tagName),F=g0(j.tagName);if(!e0[$.namespaceURI])return!1;if($.namespaceURI===R0){if(j.namespaceURI===i)return w==="svg";if(j.namespaceURI===D0)return w==="svg"&&(F==="annotation-xml"||M0[F]);return Boolean(m1[w])}if($.namespaceURI===D0){if(j.namespaceURI===i)return w==="math";if(j.namespaceURI===R0)return w==="math"&&S0[F];return Boolean(A1[w])}if($.namespaceURI===i){if(j.namespaceURI===R0&&!S0[F])return!1;if(j.namespaceURI===D0&&!M0[F])return!1;return!A1[w]&&(l6[w]||!m1[w])}if(z0==="application/xhtml+xml"&&e0[$.namespaceURI])return!0;return!1},c=function($){B0(J.removed,{element:$});try{J0($).removeChild($)}catch(j){h0($)}},r=function($,j){try{B0(J.removed,{attribute:j.getAttributeNode($),from:j})}catch(w){B0(J.removed,{attribute:null,from:j})}if(j.removeAttribute($),$==="is")if(Z0||f0)try{c(j)}catch(w){}else try{j.setAttribute($,"")}catch(w){}},u1=function($){let j=null,w=null;if(a0)$="<remove></remove>"+$;else{let I=K1($,/^[\r\n\t ]+/);w=I&&I[0]}if(z0==="application/xhtml+xml"&&$0===i)$='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+$+"</body></html>";let F=f?f.createHTML($):$;if($0===i)try{j=new b().parseFromString(F,z0)}catch(I){}if(!j||!j.documentElement){j=d0.createDocument($0,"template",null);try{j.documentElement.innerHTML=t0?l:F}catch(I){}}let O=j.body||j.documentElement;if($&&w)O.insertBefore(q.createTextNode(w),O.childNodes[0]||null);if($0===i)return O6.call(j,n?"html":"body")[0];return n?j.documentElement:O},l1=function($){return M6.call($.ownerDocument||$,$,W.SHOW_ELEMENT|W.SHOW_COMMENT|W.SHOW_TEXT|W.SHOW_PROCESSING_INSTRUCTION|W.SHOW_CDATA_SECTION,null)},Q1=function($){return $ instanceof U&&(typeof $.nodeName!=="string"||typeof $.textContent!=="string"||typeof $.removeChild!=="function"||!($.attributes instanceof B)||typeof $.removeAttribute!=="function"||typeof $.setAttribute!=="function"||typeof $.namespaceURI!=="string"||typeof $.insertBefore!=="function"||typeof $.hasChildNodes!=="function")},N1=function($){return typeof z==="function"&&$ instanceof z};function s(x,$,j){O0(x,(w)=>{w.call(J,$,j,V0)})}let d1=function($){let j=null;if(s(L.beforeSanitizeElements,$,null),Q1($))return c($),!0;let w=P($.nodeName);if(s(L.uponSanitizeElement,$,{tagName:w,allowedTags:D}),I0&&$.hasChildNodes()&&!N1($.firstElementChild)&&g(/<[/\w!]/g,$.innerHTML)&&g(/<[/\w!]/g,$.textContent))return c($),!0;if($.nodeType===G0.progressingInstruction)return c($),!0;if(I0&&$.nodeType===G0.comment&&g(/<[/\w]/g,$.data))return c($),!0;if(!(Q0.tagCheck instanceof Function&&Q0.tagCheck(w))&&(!D[w]||X0[w])){if(!X0[w]&&_1(w)){if(C.tagNameCheck instanceof RegExp&&g(C.tagNameCheck,w))return!1;if(C.tagNameCheck instanceof Function&&C.tagNameCheck(w))return!1}if(o0&&!_[w]){let F=J0($)||$.parentNode,O=C0($)||$.childNodes;if(O&&F){let I=O.length;for(let A=I-1;A>=0;--A){let a=S(O[A],!0);a.__removalCount=($.__removalCount||0)+1,F.insertBefore(a,F0($))}}}return c($),!0}if($ instanceof X&&!_6($))return c($),!0;if((w==="noscript"||w==="noembed"||w==="noframes")&&g(/<\/no(script|embed|frames)/i,$.innerHTML))return c($),!0;if(q0&&$.nodeType===G0.text){if(j=$.textContent,O0([E0,_0,c0],(F)=>{j=w0(j,F," ")}),$.textContent!==j)B0(J.removed,{element:$.cloneNode()}),$.textContent=j}return s(L.afterSanitizeElements,$,null),!1},E1=function($,j,w){if(S1&&(j==="id"||j==="name")&&((w in q)||(w in E6)))return!1;if(i0&&!T0[j]&&g(g6,j));else if(D1&&g(y6,j));else if(Q0.attributeCheck instanceof Function&&Q0.attributeCheck(j,$));else if(!R[j]||T0[j])if(_1($)&&(C.tagNameCheck instanceof RegExp&&g(C.tagNameCheck,$)||C.tagNameCheck instanceof Function&&C.tagNameCheck($))&&(C.attributeNameCheck instanceof RegExp&&g(C.attributeNameCheck,j)||C.attributeNameCheck instanceof Function&&C.attributeNameCheck(j,$))||j==="is"&&C.allowCustomizedBuiltInElements&&(C.tagNameCheck instanceof RegExp&&g(C.tagNameCheck,w)||C.tagNameCheck instanceof Function&&C.tagNameCheck(w)));else return!1;else if(r0[j]);else if(g(I1,w0(w,C1,"")));else if((j==="src"||j==="xlink:href"||j==="href")&&$!=="script"&&n6(w,"data:")===0&&L1[$]);else if(R1&&!g(p6,w0(w,C1,"")));else if(w)return!1;return!0},_1=function($){return $!=="annotation-xml"&&K1($,m6)},c1=function($){s(L.beforeSanitizeAttributes,$,null);let{attributes:j}=$;if(!j||Q1($))return;let w={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:R,forceKeepAttr:void 0},F=j.length;while(F--){let O=j[F],{name:I,namespaceURI:A,value:a}=O,Y0=P(I),q1=a,M=I==="value"?q1:r6(q1);if(w.attrName=Y0,w.attrValue=M,w.keepAttr=!0,w.forceKeepAttr=void 0,s(L.uponSanitizeAttribute,$,w),M=w.attrValue,O1&&(Y0==="id"||Y0==="name"))r(I,$),M=A6+M;if(I0&&g(/((--!?|])>)|<\/(style|title|textarea)/i,M)){r(I,$);continue}if(Y0==="attributename"&&K1(M,"href")){r(I,$);continue}if(w.forceKeepAttr)continue;if(!w.keepAttr){r(I,$);continue}if(!M1&&g(/\/>/i,M)){r(I,$);continue}if(q0)O0([E0,_0,c0],(i1)=>{M=w0(M,i1," ")});let T1=P($.nodeName);if(!E1(T1,Y0,M)){r(I,$);continue}if(f&&typeof h==="object"&&typeof h.getAttributeType==="function")if(A);else switch(h.getAttributeType(T1,Y0)){case"TrustedHTML":{M=f.createHTML(M);break}case"TrustedScriptURL":{M=f.createScriptURL(M);break}}if(M!==q1)try{if(A)$.setAttributeNS(A,I,M);else $.setAttribute(I,M);if(Q1($))c($);else a1(J.removed)}catch(i1){r(I,$)}}s(L.afterSanitizeAttributes,$,null)},c6=function x($){let j=null,w=l1($);s(L.beforeSanitizeShadowDOM,$,null);while(j=w.nextNode())if(s(L.uponSanitizeShadowNode,j,null),d1(j),c1(j),j.content instanceof Y)x(j.content);s(L.afterSanitizeShadowDOM,$,null)};return J.sanitize=function(x){let $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},j=null,w=null,F=null,O=null;if(t0=!x,t0)x="<!-->";if(typeof x!=="string"&&!N1(x))if(typeof x.toString==="function"){if(x=x.toString(),typeof x!=="string")throw W0("dirty is not a string, aborting")}else throw W0("toString is not a function");if(!J.isSupported)return x;if(!s0)J1($);if(J.removed=[],typeof x==="string")j0=!1;if(j0){if(x.nodeName){let a=P(x.nodeName);if(!D[a]||X0[a])throw W0("root node is forbidden and cannot be sanitized in-place")}}else if(x instanceof z)if(j=u1("<!---->"),w=j.ownerDocument.importNode(x,!0),w.nodeType===G0.element&&w.nodeName==="BODY")j=w;else if(w.nodeName==="HTML")j=w;else j.appendChild(w);else{if(!Z0&&!q0&&!n&&x.indexOf("<")===-1)return f&&P0?f.createHTML(x):x;if(j=u1(x),!j)return Z0?null:P0?l:""}if(j&&a0)c(j.firstChild);let I=l1(j0?x:j);while(F=I.nextNode())if(d1(F),c1(F),F.content instanceof Y)c6(F.content);if(j0)return x;if(Z0){if(f0){O=S6.call(j.ownerDocument);while(j.firstChild)O.appendChild(j.firstChild)}else O=j;if(R.shadowroot||R.shadowrootmode)O=L6.call(K,O,!0);return O}let A=n?j.outerHTML:j.innerHTML;if(n&&D["!doctype"]&&j.ownerDocument&&j.ownerDocument.doctype&&j.ownerDocument.doctype.name&&g(Z6,j.ownerDocument.doctype.name))A="<!DOCTYPE "+j.ownerDocument.doctype.name+`>
`+A;if(q0)O0([E0,_0,c0],(a)=>{A=w0(A,a," ")});return f&&P0?f.createHTML(A):A},J.setConfig=function(){let x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};J1(x),s0=!0},J.clearConfig=function(){V0=null,s0=!1},J.isValidAttribute=function(x,$,j){if(!V0)J1({});let w=P(x),F=P($);return E1(w,F,j)},J.addHook=function(x,$){if(typeof $!=="function")return;B0(L[x],$)},J.removeHook=function(x,$){if($!==void 0){let j=a6(L[x],$);return j===-1?void 0:o6(L[x],j,1)[0]}return a1(L[x])},J.removeHooks=function(x){L[x]=[]},J.removeAllHooks=function(){L=J6()},J}var $6=K6();function W1(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var e=W1();function w6(Z){e=Z}var H0={exec:()=>null};function v(Z,J=""){let q=typeof Z=="string"?Z:Z.source,K={replace:(Q,Y)=>{let V=typeof Y=="string"?Y:Y.source;return V=V.replace(m.caret,"$1"),q=q.replace(Q,V),K},getRegex:()=>new RegExp(q,J)};return K}var w7=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),m={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:(Z)=>new RegExp(`^( {0,3}${Z})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:(Z)=>new RegExp(`^ {0,${Math.min(3,Z-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:(Z)=>new RegExp(`^ {0,${Math.min(3,Z-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:(Z)=>new RegExp(`^ {0,${Math.min(3,Z-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:(Z)=>new RegExp(`^ {0,${Math.min(3,Z-1)}}#`),htmlBeginRegex:(Z)=>new RegExp(`^ {0,${Math.min(3,Z-1)}}<(?:[a-z].*>|!--)`,"i")},W7=/^(?:[ \t]*(?:\n|$))+/,x7=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,G7=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,k0=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,b7=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,x1=/(?:[*+-]|\d{1,9}[.)])/,W6=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,x6=v(W6).replace(/bull/g,x1).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),U7=v(W6).replace(/bull/g,x1).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),G1=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,v7=/^[^\n]+/,b1=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,H7=v(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",b1).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),k7=v(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,x1).getRegex(),u0="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",U1=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,h7=v("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",U1).replace("tag",u0).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),G6=v(G1).replace("hr",k0).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",u0).getRegex(),F7=v(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",G6).getRegex(),v1={blockquote:F7,code:x7,def:H7,fences:G7,heading:b7,hr:k0,html:h7,lheading:x6,list:k7,newline:W7,paragraph:G6,table:H0,text:v7},V6=v("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",k0).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",u0).getRegex(),C7={...v1,lheading:U7,table:V6,paragraph:v(G1).replace("hr",k0).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",V6).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",u0).getRegex()},I7={...v1,html:v(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",U1).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:H0,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:v(G1).replace("hr",k0).replace("heading",` *#{1,6} *[^
]`).replace("lheading",x6).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},f7=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,P7=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,b6=/^( {2,}|\\)\n(?!\s*$)/,D7=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,l0=/[\p{P}\p{S}]/u,H1=/[\s\p{P}\p{S}]/u,U6=/[^\s\p{P}\p{S}]/u,R7=v(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,H1).getRegex(),v6=/(?!~)[\p{P}\p{S}]/u,M7=/(?!~)[\s\p{P}\p{S}]/u,S7=/(?:[^\s\p{P}\p{S}]|~)/u,O7=v(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",w7?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),H6=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,L7=v(H6,"u").replace(/punct/g,l0).getRegex(),g7=v(H6,"u").replace(/punct/g,v6).getRegex(),k6="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",y7=v(k6,"gu").replace(/notPunctSpace/g,U6).replace(/punctSpace/g,H1).replace(/punct/g,l0).getRegex(),p7=v(k6,"gu").replace(/notPunctSpace/g,S7).replace(/punctSpace/g,M7).replace(/punct/g,v6).getRegex(),m7=v("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,U6).replace(/punctSpace/g,H1).replace(/punct/g,l0).getRegex(),A7=v(/\\(punct)/,"gu").replace(/punct/g,l0).getRegex(),u7=v(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),l7=v(U1).replace("(?:-->|$)","-->").getRegex(),N7=v("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",l7).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),p0=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,d7=v(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",p0).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),h6=v(/^!?\[(label)\]\[(ref)\]/).replace("label",p0).replace("ref",b1).getRegex(),F6=v(/^!?\[(ref)\](?:\[\])?/).replace("ref",b1).getRegex(),E7=v("reflink|nolink(?!\\()","g").replace("reflink",h6).replace("nolink",F6).getRegex(),Y6=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,k1={_backpedal:H0,anyPunctuation:A7,autolink:u7,blockSkip:O7,br:b6,code:P7,del:H0,emStrongLDelim:L7,emStrongRDelimAst:y7,emStrongRDelimUnd:m7,escape:f7,link:d7,nolink:F6,punctuation:R7,reflink:h6,reflinkSearch:E7,tag:N7,text:D7,url:H0},_7={...k1,link:v(/^!?\[(label)\]\((.*?)\)/).replace("label",p0).getRegex(),reflink:v(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",p0).getRegex()},w1={...k1,emStrongRDelimAst:p7,emStrongLDelim:g7,url:v(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",Y6).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:v(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",Y6).getRegex()},c7={...w1,br:v(b6).replace("{2,}","*").getRegex(),text:v(w1.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},y0={normal:v1,gfm:C7,pedantic:I7},b0={normal:k1,gfm:w1,breaks:c7,pedantic:_7},T7={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},X6=(Z)=>T7[Z];function o(Z,J){if(J){if(m.escapeTest.test(Z))return Z.replace(m.escapeReplace,X6)}else if(m.escapeTestNoEncode.test(Z))return Z.replace(m.escapeReplaceNoEncode,X6);return Z}function j6(Z){try{Z=encodeURI(Z).replace(m.percentDecode,"%")}catch{return null}return Z}function z6(Z,J){let q=Z.replace(m.findPipe,(Y,V,z)=>{let X=!1,W=V;for(;--W>=0&&z[W]==="\\";)X=!X;return X?"|":" |"}),K=q.split(m.splitPipe),Q=0;if(K[0].trim()||K.shift(),K.length>0&&!K.at(-1)?.trim()&&K.pop(),J)if(K.length>J)K.splice(J);else for(;K.length<J;)K.push("");for(;Q<K.length;Q++)K[Q]=K[Q].trim().replace(m.slashPipe,"|");return K}function U0(Z,J,q){let K=Z.length;if(K===0)return"";let Q=0;for(;Q<K;){let Y=Z.charAt(K-Q-1);if(Y===J&&!q)Q++;else if(Y!==J&&q)Q++;else break}return Z.slice(0,K-Q)}function i7(Z,J){if(Z.indexOf(J[1])===-1)return-1;let q=0;for(let K=0;K<Z.length;K++)if(Z[K]==="\\")K++;else if(Z[K]===J[0])q++;else if(Z[K]===J[1]&&(q--,q<0))return K;return q>0?-2:-1}function B6(Z,J,q,K,Q){let Y=J.href,V=J.title||null,z=Z[1].replace(Q.other.outputLinkReplace,"$1");K.state.inLink=!0;let X={type:Z[0].charAt(0)==="!"?"image":"link",raw:q,href:Y,title:V,text:z,tokens:K.inlineTokens(z)};return K.state.inLink=!1,X}function s7(Z,J,q){let K=Z.match(q.other.indentCodeCompensation);if(K===null)return J;let Q=K[1];return J.split(`
`).map((Y)=>{let V=Y.match(q.other.beginningSpace);if(V===null)return Y;let[z]=V;return z.length>=Q.length?Y.slice(Q.length):Y}).join(`
`)}var m0=class{options;rules;lexer;constructor(Z){this.options=Z||e}space(Z){let J=this.rules.block.newline.exec(Z);if(J&&J[0].length>0)return{type:"space",raw:J[0]}}code(Z){let J=this.rules.block.code.exec(Z);if(J){let q=J[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:J[0],codeBlockStyle:"indented",text:this.options.pedantic?q:U0(q,`
`)}}}fences(Z){let J=this.rules.block.fences.exec(Z);if(J){let q=J[0],K=s7(q,J[3]||"",this.rules);return{type:"code",raw:q,lang:J[2]?J[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):J[2],text:K}}}heading(Z){let J=this.rules.block.heading.exec(Z);if(J){let q=J[2].trim();if(this.rules.other.endingHash.test(q)){let K=U0(q,"#");(this.options.pedantic||!K||this.rules.other.endingSpaceChar.test(K))&&(q=K.trim())}return{type:"heading",raw:J[0],depth:J[1].length,text:q,tokens:this.lexer.inline(q)}}}hr(Z){let J=this.rules.block.hr.exec(Z);if(J)return{type:"hr",raw:U0(J[0],`
`)}}blockquote(Z){let J=this.rules.block.blockquote.exec(Z);if(J){let q=U0(J[0],`
`).split(`
`),K="",Q="",Y=[];for(;q.length>0;){let V=!1,z=[],X;for(X=0;X<q.length;X++)if(this.rules.other.blockquoteStart.test(q[X]))z.push(q[X]),V=!0;else if(!V)z.push(q[X]);else break;q=q.slice(X);let W=z.join(`
`),B=W.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");K=K?`${K}
${W}`:W,Q=Q?`${Q}
${B}`:B;let U=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(B,Y,!0),this.lexer.state.top=U,q.length===0)break;let b=Y.at(-1);if(b?.type==="code")break;if(b?.type==="blockquote"){let h=b,H=h.raw+`
`+q.join(`
`),S=this.blockquote(H);Y[Y.length-1]=S,K=K.substring(0,K.length-h.raw.length)+S.raw,Q=Q.substring(0,Q.length-h.text.length)+S.text;break}else if(b?.type==="list"){let h=b,H=h.raw+`
`+q.join(`
`),S=this.list(H);Y[Y.length-1]=S,K=K.substring(0,K.length-b.raw.length)+S.raw,Q=Q.substring(0,Q.length-h.raw.length)+S.raw,q=H.substring(Y.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:K,tokens:Y,text:Q}}}list(Z){let J=this.rules.block.list.exec(Z);if(J){let q=J[1].trim(),K=q.length>1,Q={type:"list",raw:"",ordered:K,start:K?+q.slice(0,-1):"",loose:!1,items:[]};q=K?`\\d{1,9}\\${q.slice(-1)}`:`\\${q}`,this.options.pedantic&&(q=K?q:"[*+-]");let Y=this.rules.other.listItemRegex(q),V=!1;for(;Z;){let X=!1,W="",B="";if(!(J=Y.exec(Z))||this.rules.block.hr.test(Z))break;W=J[0],Z=Z.substring(W.length);let U=J[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,(S)=>" ".repeat(3*S.length)),b=Z.split(`
`,1)[0],h=!U.trim(),H=0;if(this.options.pedantic?(H=2,B=U.trimStart()):h?H=J[1].length+1:(H=J[2].search(this.rules.other.nonSpaceChar),H=H>4?1:H,B=U.slice(H),H+=J[1].length),h&&this.rules.other.blankLine.test(b)&&(W+=b+`
`,Z=Z.substring(b.length+1),X=!0),!X){let S=this.rules.other.nextBulletRegex(H),h0=this.rules.other.hrRegex(H),F0=this.rules.other.fencesBeginRegex(H),C0=this.rules.other.headingBeginRegex(H),J0=this.rules.other.htmlBeginRegex(H);for(;Z;){let f=Z.split(`
`,1)[0],l;if(b=f,this.options.pedantic?(b=b.replace(this.rules.other.listReplaceNesting,"  "),l=b):l=b.replace(this.rules.other.tabCharGlobal,"    "),F0.test(b)||C0.test(b)||J0.test(b)||S.test(b)||h0.test(b))break;if(l.search(this.rules.other.nonSpaceChar)>=H||!b.trim())B+=`
`+l.slice(H);else{if(h||U.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||F0.test(U)||C0.test(U)||h0.test(U))break;B+=`
`+b}!h&&!b.trim()&&(h=!0),W+=f+`
`,Z=Z.substring(f.length+1),U=l.slice(H)}}Q.loose||(V?Q.loose=!0:this.rules.other.doubleBlankLine.test(W)&&(V=!0)),Q.items.push({type:"list_item",raw:W,task:!!this.options.gfm&&this.rules.other.listIsTask.test(B),loose:!1,text:B,tokens:[]}),Q.raw+=W}let z=Q.items.at(-1);if(z)z.raw=z.raw.trimEnd(),z.text=z.text.trimEnd();else return;Q.raw=Q.raw.trimEnd();for(let X of Q.items){if(this.lexer.state.top=!1,X.tokens=this.lexer.blockTokens(X.text,[]),X.task){if(X.text=X.text.replace(this.rules.other.listReplaceTask,""),X.tokens[0]?.type==="text"||X.tokens[0]?.type==="paragraph"){X.tokens[0].raw=X.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),X.tokens[0].text=X.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let B=this.lexer.inlineQueue.length-1;B>=0;B--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[B].src)){this.lexer.inlineQueue[B].src=this.lexer.inlineQueue[B].src.replace(this.rules.other.listReplaceTask,"");break}}let W=this.rules.other.listTaskCheckbox.exec(X.raw);if(W){let B={type:"checkbox",raw:W[0]+" ",checked:W[0]!=="[ ]"};X.checked=B.checked,Q.loose?X.tokens[0]&&["paragraph","text"].includes(X.tokens[0].type)&&"tokens"in X.tokens[0]&&X.tokens[0].tokens?(X.tokens[0].raw=B.raw+X.tokens[0].raw,X.tokens[0].text=B.raw+X.tokens[0].text,X.tokens[0].tokens.unshift(B)):X.tokens.unshift({type:"paragraph",raw:B.raw,text:B.raw,tokens:[B]}):X.tokens.unshift(B)}}if(!Q.loose){let W=X.tokens.filter((U)=>U.type==="space"),B=W.length>0&&W.some((U)=>this.rules.other.anyLine.test(U.raw));Q.loose=B}}if(Q.loose)for(let X of Q.items){X.loose=!0;for(let W of X.tokens)W.type==="text"&&(W.type="paragraph")}return Q}}html(Z){let J=this.rules.block.html.exec(Z);if(J)return{type:"html",block:!0,raw:J[0],pre:J[1]==="pre"||J[1]==="script"||J[1]==="style",text:J[0]}}def(Z){let J=this.rules.block.def.exec(Z);if(J){let q=J[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),K=J[2]?J[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",Q=J[3]?J[3].substring(1,J[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):J[3];return{type:"def",tag:q,raw:J[0],href:K,title:Q}}}table(Z){let J=this.rules.block.table.exec(Z);if(!J||!this.rules.other.tableDelimiter.test(J[2]))return;let q=z6(J[1]),K=J[2].replace(this.rules.other.tableAlignChars,"").split("|"),Q=J[3]?.trim()?J[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],Y={type:"table",raw:J[0],header:[],align:[],rows:[]};if(q.length===K.length){for(let V of K)this.rules.other.tableAlignRight.test(V)?Y.align.push("right"):this.rules.other.tableAlignCenter.test(V)?Y.align.push("center"):this.rules.other.tableAlignLeft.test(V)?Y.align.push("left"):Y.align.push(null);for(let V=0;V<q.length;V++)Y.header.push({text:q[V],tokens:this.lexer.inline(q[V]),header:!0,align:Y.align[V]});for(let V of Q)Y.rows.push(z6(V,Y.header.length).map((z,X)=>({text:z,tokens:this.lexer.inline(z),header:!1,align:Y.align[X]})));return Y}}lheading(Z){let J=this.rules.block.lheading.exec(Z);if(J)return{type:"heading",raw:J[0],depth:J[2].charAt(0)==="="?1:2,text:J[1],tokens:this.lexer.inline(J[1])}}paragraph(Z){let J=this.rules.block.paragraph.exec(Z);if(J){let q=J[1].charAt(J[1].length-1)===`
`?J[1].slice(0,-1):J[1];return{type:"paragraph",raw:J[0],text:q,tokens:this.lexer.inline(q)}}}text(Z){let J=this.rules.block.text.exec(Z);if(J)return{type:"text",raw:J[0],text:J[0],tokens:this.lexer.inline(J[0])}}escape(Z){let J=this.rules.inline.escape.exec(Z);if(J)return{type:"escape",raw:J[0],text:J[1]}}tag(Z){let J=this.rules.inline.tag.exec(Z);if(J)return!this.lexer.state.inLink&&this.rules.other.startATag.test(J[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(J[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(J[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(J[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:J[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:J[0]}}link(Z){let J=this.rules.inline.link.exec(Z);if(J){let q=J[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(q)){if(!this.rules.other.endAngleBracket.test(q))return;let Y=U0(q.slice(0,-1),"\\");if((q.length-Y.length)%2===0)return}else{let Y=i7(J[2],"()");if(Y===-2)return;if(Y>-1){let V=(J[0].indexOf("!")===0?5:4)+J[1].length+Y;J[2]=J[2].substring(0,Y),J[0]=J[0].substring(0,V).trim(),J[3]=""}}let K=J[2],Q="";if(this.options.pedantic){let Y=this.rules.other.pedanticHrefTitle.exec(K);Y&&(K=Y[1],Q=Y[3])}else Q=J[3]?J[3].slice(1,-1):"";return K=K.trim(),this.rules.other.startAngleBracket.test(K)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(q)?K=K.slice(1):K=K.slice(1,-1)),B6(J,{href:K&&K.replace(this.rules.inline.anyPunctuation,"$1"),title:Q&&Q.replace(this.rules.inline.anyPunctuation,"$1")},J[0],this.lexer,this.rules)}}reflink(Z,J){let q;if((q=this.rules.inline.reflink.exec(Z))||(q=this.rules.inline.nolink.exec(Z))){let K=(q[2]||q[1]).replace(this.rules.other.multipleSpaceGlobal," "),Q=J[K.toLowerCase()];if(!Q){let Y=q[0].charAt(0);return{type:"text",raw:Y,text:Y}}return B6(q,Q,q[0],this.lexer,this.rules)}}emStrong(Z,J,q=""){let K=this.rules.inline.emStrongLDelim.exec(Z);if(!K||K[3]&&q.match(this.rules.other.unicodeAlphaNumeric))return;if(!(K[1]||K[2])||!q||this.rules.inline.punctuation.exec(q)){let Q=[...K[0]].length-1,Y,V,z=Q,X=0,W=K[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(W.lastIndex=0,J=J.slice(-1*Z.length+Q);(K=W.exec(J))!=null;){if(Y=K[1]||K[2]||K[3]||K[4]||K[5]||K[6],!Y)continue;if(V=[...Y].length,K[3]||K[4]){z+=V;continue}else if((K[5]||K[6])&&Q%3&&!((Q+V)%3)){X+=V;continue}if(z-=V,z>0)continue;V=Math.min(V,V+z+X);let B=[...K[0]][0].length,U=Z.slice(0,Q+K.index+B+V);if(Math.min(Q,V)%2){let h=U.slice(1,-1);return{type:"em",raw:U,text:h,tokens:this.lexer.inlineTokens(h)}}let b=U.slice(2,-2);return{type:"strong",raw:U,text:b,tokens:this.lexer.inlineTokens(b)}}}}codespan(Z){let J=this.rules.inline.code.exec(Z);if(J){let q=J[2].replace(this.rules.other.newLineCharGlobal," "),K=this.rules.other.nonSpaceChar.test(q),Q=this.rules.other.startingSpaceChar.test(q)&&this.rules.other.endingSpaceChar.test(q);return K&&Q&&(q=q.substring(1,q.length-1)),{type:"codespan",raw:J[0],text:q}}}br(Z){let J=this.rules.inline.br.exec(Z);if(J)return{type:"br",raw:J[0]}}del(Z){let J=this.rules.inline.del.exec(Z);if(J)return{type:"del",raw:J[0],text:J[2],tokens:this.lexer.inlineTokens(J[2])}}autolink(Z){let J=this.rules.inline.autolink.exec(Z);if(J){let q,K;return J[2]==="@"?(q=J[1],K="mailto:"+q):(q=J[1],K=q),{type:"link",raw:J[0],text:q,href:K,tokens:[{type:"text",raw:q,text:q}]}}}url(Z){let J;if(J=this.rules.inline.url.exec(Z)){let q,K;if(J[2]==="@")q=J[0],K="mailto:"+q;else{let Q;do Q=J[0],J[0]=this.rules.inline._backpedal.exec(J[0])?.[0]??"";while(Q!==J[0]);q=J[0],J[1]==="www."?K="http://"+J[0]:K=J[0]}return{type:"link",raw:J[0],text:q,href:K,tokens:[{type:"text",raw:q,text:q}]}}}inlineText(Z){let J=this.rules.inline.text.exec(Z);if(J){let q=this.lexer.state.inRawBlock;return{type:"text",raw:J[0],text:J[0],escaped:q}}}},d=class Z{tokens;options;state;inlineQueue;tokenizer;constructor(J){this.tokens=[],this.tokens.links=Object.create(null),this.options=J||e,this.options.tokenizer=this.options.tokenizer||new m0,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let q={other:m,block:y0.normal,inline:b0.normal};this.options.pedantic?(q.block=y0.pedantic,q.inline=b0.pedantic):this.options.gfm&&(q.block=y0.gfm,this.options.breaks?q.inline=b0.breaks:q.inline=b0.gfm),this.tokenizer.rules=q}static get rules(){return{block:y0,inline:b0}}static lex(J,q){return new Z(q).lex(J)}static lexInline(J,q){return new Z(q).inlineTokens(J)}lex(J){J=J.replace(m.carriageReturn,`
`),this.blockTokens(J,this.tokens);for(let q=0;q<this.inlineQueue.length;q++){let K=this.inlineQueue[q];this.inlineTokens(K.src,K.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(J,q=[],K=!1){for(this.options.pedantic&&(J=J.replace(m.tabCharGlobal,"    ").replace(m.spaceLine,""));J;){let Q;if(this.options.extensions?.block?.some((V)=>(Q=V.call({lexer:this},J,q))?(J=J.substring(Q.raw.length),q.push(Q),!0):!1))continue;if(Q=this.tokenizer.space(J)){J=J.substring(Q.raw.length);let V=q.at(-1);Q.raw.length===1&&V!==void 0?V.raw+=`
`:q.push(Q);continue}if(Q=this.tokenizer.code(J)){J=J.substring(Q.raw.length);let V=q.at(-1);V?.type==="paragraph"||V?.type==="text"?(V.raw+=(V.raw.endsWith(`
`)?"":`
`)+Q.raw,V.text+=`
`+Q.text,this.inlineQueue.at(-1).src=V.text):q.push(Q);continue}if(Q=this.tokenizer.fences(J)){J=J.substring(Q.raw.length),q.push(Q);continue}if(Q=this.tokenizer.heading(J)){J=J.substring(Q.raw.length),q.push(Q);continue}if(Q=this.tokenizer.hr(J)){J=J.substring(Q.raw.length),q.push(Q);continue}if(Q=this.tokenizer.blockquote(J)){J=J.substring(Q.raw.length),q.push(Q);continue}if(Q=this.tokenizer.list(J)){J=J.substring(Q.raw.length),q.push(Q);continue}if(Q=this.tokenizer.html(J)){J=J.substring(Q.raw.length),q.push(Q);continue}if(Q=this.tokenizer.def(J)){J=J.substring(Q.raw.length);let V=q.at(-1);V?.type==="paragraph"||V?.type==="text"?(V.raw+=(V.raw.endsWith(`
`)?"":`
`)+Q.raw,V.text+=`
`+Q.raw,this.inlineQueue.at(-1).src=V.text):this.tokens.links[Q.tag]||(this.tokens.links[Q.tag]={href:Q.href,title:Q.title},q.push(Q));continue}if(Q=this.tokenizer.table(J)){J=J.substring(Q.raw.length),q.push(Q);continue}if(Q=this.tokenizer.lheading(J)){J=J.substring(Q.raw.length),q.push(Q);continue}let Y=J;if(this.options.extensions?.startBlock){let V=1/0,z=J.slice(1),X;this.options.extensions.startBlock.forEach((W)=>{X=W.call({lexer:this},z),typeof X=="number"&&X>=0&&(V=Math.min(V,X))}),V<1/0&&V>=0&&(Y=J.substring(0,V+1))}if(this.state.top&&(Q=this.tokenizer.paragraph(Y))){let V=q.at(-1);K&&V?.type==="paragraph"?(V.raw+=(V.raw.endsWith(`
`)?"":`
`)+Q.raw,V.text+=`
`+Q.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=V.text):q.push(Q),K=Y.length!==J.length,J=J.substring(Q.raw.length);continue}if(Q=this.tokenizer.text(J)){J=J.substring(Q.raw.length);let V=q.at(-1);V?.type==="text"?(V.raw+=(V.raw.endsWith(`
`)?"":`
`)+Q.raw,V.text+=`
`+Q.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=V.text):q.push(Q);continue}if(J){let V="Infinite loop on byte: "+J.charCodeAt(0);if(this.options.silent){console.error(V);break}else throw Error(V)}}return this.state.top=!0,q}inline(J,q=[]){return this.inlineQueue.push({src:J,tokens:q}),q}inlineTokens(J,q=[]){let K=J,Q=null;if(this.tokens.links){let X=Object.keys(this.tokens.links);if(X.length>0)for(;(Q=this.tokenizer.rules.inline.reflinkSearch.exec(K))!=null;)X.includes(Q[0].slice(Q[0].lastIndexOf("[")+1,-1))&&(K=K.slice(0,Q.index)+"["+"a".repeat(Q[0].length-2)+"]"+K.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(Q=this.tokenizer.rules.inline.anyPunctuation.exec(K))!=null;)K=K.slice(0,Q.index)+"++"+K.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let Y;for(;(Q=this.tokenizer.rules.inline.blockSkip.exec(K))!=null;)Y=Q[2]?Q[2].length:0,K=K.slice(0,Q.index+Y)+"["+"a".repeat(Q[0].length-Y-2)+"]"+K.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);K=this.options.hooks?.emStrongMask?.call({lexer:this},K)??K;let V=!1,z="";for(;J;){V||(z=""),V=!1;let X;if(this.options.extensions?.inline?.some((B)=>(X=B.call({lexer:this},J,q))?(J=J.substring(X.raw.length),q.push(X),!0):!1))continue;if(X=this.tokenizer.escape(J)){J=J.substring(X.raw.length),q.push(X);continue}if(X=this.tokenizer.tag(J)){J=J.substring(X.raw.length),q.push(X);continue}if(X=this.tokenizer.link(J)){J=J.substring(X.raw.length),q.push(X);continue}if(X=this.tokenizer.reflink(J,this.tokens.links)){J=J.substring(X.raw.length);let B=q.at(-1);X.type==="text"&&B?.type==="text"?(B.raw+=X.raw,B.text+=X.text):q.push(X);continue}if(X=this.tokenizer.emStrong(J,K,z)){J=J.substring(X.raw.length),q.push(X);continue}if(X=this.tokenizer.codespan(J)){J=J.substring(X.raw.length),q.push(X);continue}if(X=this.tokenizer.br(J)){J=J.substring(X.raw.length),q.push(X);continue}if(X=this.tokenizer.del(J)){J=J.substring(X.raw.length),q.push(X);continue}if(X=this.tokenizer.autolink(J)){J=J.substring(X.raw.length),q.push(X);continue}if(!this.state.inLink&&(X=this.tokenizer.url(J))){J=J.substring(X.raw.length),q.push(X);continue}let W=J;if(this.options.extensions?.startInline){let B=1/0,U=J.slice(1),b;this.options.extensions.startInline.forEach((h)=>{b=h.call({lexer:this},U),typeof b=="number"&&b>=0&&(B=Math.min(B,b))}),B<1/0&&B>=0&&(W=J.substring(0,B+1))}if(X=this.tokenizer.inlineText(W)){J=J.substring(X.raw.length),X.raw.slice(-1)!=="_"&&(z=X.raw.slice(-1)),V=!0;let B=q.at(-1);B?.type==="text"?(B.raw+=X.raw,B.text+=X.text):q.push(X);continue}if(J){let B="Infinite loop on byte: "+J.charCodeAt(0);if(this.options.silent){console.error(B);break}else throw Error(B)}}return q}},A0=class{options;parser;constructor(Z){this.options=Z||e}space(Z){return""}code({text:Z,lang:J,escaped:q}){let K=(J||"").match(m.notSpaceStart)?.[0],Q=Z.replace(m.endingNewline,"")+`
`;return K?'<pre><code class="language-'+o(K)+'">'+(q?Q:o(Q,!0))+`</code></pre>
`:"<pre><code>"+(q?Q:o(Q,!0))+`</code></pre>
`}blockquote({tokens:Z}){return`<blockquote>
${this.parser.parse(Z)}</blockquote>
`}html({text:Z}){return Z}def(Z){return""}heading({tokens:Z,depth:J}){return`<h${J}>${this.parser.parseInline(Z)}</h${J}>
`}hr(Z){return`<hr>
`}list(Z){let{ordered:J,start:q}=Z,K="";for(let V=0;V<Z.items.length;V++){let z=Z.items[V];K+=this.listitem(z)}let Q=J?"ol":"ul",Y=J&&q!==1?' start="'+q+'"':"";return"<"+Q+Y+`>
`+K+"</"+Q+`>
`}listitem(Z){return`<li>${this.parser.parse(Z.tokens)}</li>
`}checkbox({checked:Z}){return"<input "+(Z?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:Z}){return`<p>${this.parser.parseInline(Z)}</p>
`}table(Z){let J="",q="";for(let Q=0;Q<Z.header.length;Q++)q+=this.tablecell(Z.header[Q]);J+=this.tablerow({text:q});let K="";for(let Q=0;Q<Z.rows.length;Q++){let Y=Z.rows[Q];q="";for(let V=0;V<Y.length;V++)q+=this.tablecell(Y[V]);K+=this.tablerow({text:q})}return K&&(K=`<tbody>${K}</tbody>`),`<table>
<thead>
`+J+`</thead>
`+K+`</table>
`}tablerow({text:Z}){return`<tr>
${Z}</tr>
`}tablecell(Z){let J=this.parser.parseInline(Z.tokens),q=Z.header?"th":"td";return(Z.align?`<${q} align="${Z.align}">`:`<${q}>`)+J+`</${q}>
`}strong({tokens:Z}){return`<strong>${this.parser.parseInline(Z)}</strong>`}em({tokens:Z}){return`<em>${this.parser.parseInline(Z)}</em>`}codespan({text:Z}){return`<code>${o(Z,!0)}</code>`}br(Z){return"<br>"}del({tokens:Z}){return`<del>${this.parser.parseInline(Z)}</del>`}link({href:Z,title:J,tokens:q}){let K=this.parser.parseInline(q),Q=j6(Z);if(Q===null)return K;Z=Q;let Y='<a href="'+Z+'"';return J&&(Y+=' title="'+o(J)+'"'),Y+=">"+K+"</a>",Y}image({href:Z,title:J,text:q,tokens:K}){K&&(q=this.parser.parseInline(K,this.parser.textRenderer));let Q=j6(Z);if(Q===null)return o(q);Z=Q;let Y=`<img src="${Z}" alt="${q}"`;return J&&(Y+=` title="${o(J)}"`),Y+=">",Y}text(Z){return"tokens"in Z&&Z.tokens?this.parser.parseInline(Z.tokens):("escaped"in Z)&&Z.escaped?Z.text:o(Z.text)}},h1=class{strong({text:Z}){return Z}em({text:Z}){return Z}codespan({text:Z}){return Z}del({text:Z}){return Z}html({text:Z}){return Z}text({text:Z}){return Z}link({text:Z}){return""+Z}image({text:Z}){return""+Z}br(){return""}checkbox({raw:Z}){return Z}},E=class Z{options;renderer;textRenderer;constructor(J){this.options=J||e,this.options.renderer=this.options.renderer||new A0,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new h1}static parse(J,q){return new Z(q).parse(J)}static parseInline(J,q){return new Z(q).parseInline(J)}parse(J){let q="";for(let K=0;K<J.length;K++){let Q=J[K];if(this.options.extensions?.renderers?.[Q.type]){let V=Q,z=this.options.extensions.renderers[V.type].call({parser:this},V);if(z!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(V.type)){q+=z||"";continue}}let Y=Q;switch(Y.type){case"space":{q+=this.renderer.space(Y);break}case"hr":{q+=this.renderer.hr(Y);break}case"heading":{q+=this.renderer.heading(Y);break}case"code":{q+=this.renderer.code(Y);break}case"table":{q+=this.renderer.table(Y);break}case"blockquote":{q+=this.renderer.blockquote(Y);break}case"list":{q+=this.renderer.list(Y);break}case"checkbox":{q+=this.renderer.checkbox(Y);break}case"html":{q+=this.renderer.html(Y);break}case"def":{q+=this.renderer.def(Y);break}case"paragraph":{q+=this.renderer.paragraph(Y);break}case"text":{q+=this.renderer.text(Y);break}default:{let V='Token with "'+Y.type+'" type was not found.';if(this.options.silent)return console.error(V),"";throw Error(V)}}}return q}parseInline(J,q=this.renderer){let K="";for(let Q=0;Q<J.length;Q++){let Y=J[Q];if(this.options.extensions?.renderers?.[Y.type]){let z=this.options.extensions.renderers[Y.type].call({parser:this},Y);if(z!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(Y.type)){K+=z||"";continue}}let V=Y;switch(V.type){case"escape":{K+=q.text(V);break}case"html":{K+=q.html(V);break}case"link":{K+=q.link(V);break}case"image":{K+=q.image(V);break}case"checkbox":{K+=q.checkbox(V);break}case"strong":{K+=q.strong(V);break}case"em":{K+=q.em(V);break}case"codespan":{K+=q.codespan(V);break}case"br":{K+=q.br(V);break}case"del":{K+=q.del(V);break}case"text":{K+=q.text(V);break}default:{let z='Token with "'+V.type+'" type was not found.';if(this.options.silent)return console.error(z),"";throw Error(z)}}}return K}},v0=class{options;block;constructor(Z){this.options=Z||e}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(Z){return Z}postprocess(Z){return Z}processAllTokens(Z){return Z}emStrongMask(Z){return Z}provideLexer(){return this.block?d.lex:d.lexInline}provideParser(){return this.block?E.parse:E.parseInline}},a7=class{defaults=W1();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=E;Renderer=A0;TextRenderer=h1;Lexer=d;Tokenizer=m0;Hooks=v0;constructor(...Z){this.use(...Z)}walkTokens(Z,J){let q=[];for(let K of Z)switch(q=q.concat(J.call(this,K)),K.type){case"table":{let Q=K;for(let Y of Q.header)q=q.concat(this.walkTokens(Y.tokens,J));for(let Y of Q.rows)for(let V of Y)q=q.concat(this.walkTokens(V.tokens,J));break}case"list":{let Q=K;q=q.concat(this.walkTokens(Q.items,J));break}default:{let Q=K;this.defaults.extensions?.childTokens?.[Q.type]?this.defaults.extensions.childTokens[Q.type].forEach((Y)=>{let V=Q[Y].flat(1/0);q=q.concat(this.walkTokens(V,J))}):Q.tokens&&(q=q.concat(this.walkTokens(Q.tokens,J)))}}return q}use(...Z){let J=this.defaults.extensions||{renderers:{},childTokens:{}};return Z.forEach((q)=>{let K={...q};if(K.async=this.defaults.async||K.async||!1,q.extensions&&(q.extensions.forEach((Q)=>{if(!Q.name)throw Error("extension name required");if("renderer"in Q){let Y=J.renderers[Q.name];Y?J.renderers[Q.name]=function(...V){let z=Q.renderer.apply(this,V);return z===!1&&(z=Y.apply(this,V)),z}:J.renderers[Q.name]=Q.renderer}if("tokenizer"in Q){if(!Q.level||Q.level!=="block"&&Q.level!=="inline")throw Error("extension level must be 'block' or 'inline'");let Y=J[Q.level];Y?Y.unshift(Q.tokenizer):J[Q.level]=[Q.tokenizer],Q.start&&(Q.level==="block"?J.startBlock?J.startBlock.push(Q.start):J.startBlock=[Q.start]:Q.level==="inline"&&(J.startInline?J.startInline.push(Q.start):J.startInline=[Q.start]))}"childTokens"in Q&&Q.childTokens&&(J.childTokens[Q.name]=Q.childTokens)}),K.extensions=J),q.renderer){let Q=this.defaults.renderer||new A0(this.defaults);for(let Y in q.renderer){if(!(Y in Q))throw Error(`renderer '${Y}' does not exist`);if(["options","parser"].includes(Y))continue;let V=Y,z=q.renderer[V],X=Q[V];Q[V]=(...W)=>{let B=z.apply(Q,W);return B===!1&&(B=X.apply(Q,W)),B||""}}K.renderer=Q}if(q.tokenizer){let Q=this.defaults.tokenizer||new m0(this.defaults);for(let Y in q.tokenizer){if(!(Y in Q))throw Error(`tokenizer '${Y}' does not exist`);if(["options","rules","lexer"].includes(Y))continue;let V=Y,z=q.tokenizer[V],X=Q[V];Q[V]=(...W)=>{let B=z.apply(Q,W);return B===!1&&(B=X.apply(Q,W)),B}}K.tokenizer=Q}if(q.hooks){let Q=this.defaults.hooks||new v0;for(let Y in q.hooks){if(!(Y in Q))throw Error(`hook '${Y}' does not exist`);if(["options","block"].includes(Y))continue;let V=Y,z=q.hooks[V],X=Q[V];v0.passThroughHooks.has(Y)?Q[V]=(W)=>{if(this.defaults.async&&v0.passThroughHooksRespectAsync.has(Y))return(async()=>{let U=await z.call(Q,W);return X.call(Q,U)})();let B=z.call(Q,W);return X.call(Q,B)}:Q[V]=(...W)=>{if(this.defaults.async)return(async()=>{let U=await z.apply(Q,W);return U===!1&&(U=await X.apply(Q,W)),U})();let B=z.apply(Q,W);return B===!1&&(B=X.apply(Q,W)),B}}K.hooks=Q}if(q.walkTokens){let Q=this.defaults.walkTokens,Y=q.walkTokens;K.walkTokens=function(V){let z=[];return z.push(Y.call(this,V)),Q&&(z=z.concat(Q.call(this,V))),z}}this.defaults={...this.defaults,...K}}),this}setOptions(Z){return this.defaults={...this.defaults,...Z},this}lexer(Z,J){return d.lex(Z,J??this.defaults)}parser(Z,J){return E.parse(Z,J??this.defaults)}parseMarkdown(Z){return(J,q)=>{let K={...q},Q={...this.defaults,...K},Y=this.onError(!!Q.silent,!!Q.async);if(this.defaults.async===!0&&K.async===!1)return Y(Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof J>"u"||J===null)return Y(Error("marked(): input parameter is undefined or null"));if(typeof J!="string")return Y(Error("marked(): input parameter is of type "+Object.prototype.toString.call(J)+", string expected"));if(Q.hooks&&(Q.hooks.options=Q,Q.hooks.block=Z),Q.async)return(async()=>{let V=Q.hooks?await Q.hooks.preprocess(J):J,z=await(Q.hooks?await Q.hooks.provideLexer():Z?d.lex:d.lexInline)(V,Q),X=Q.hooks?await Q.hooks.processAllTokens(z):z;Q.walkTokens&&await Promise.all(this.walkTokens(X,Q.walkTokens));let W=await(Q.hooks?await Q.hooks.provideParser():Z?E.parse:E.parseInline)(X,Q);return Q.hooks?await Q.hooks.postprocess(W):W})().catch(Y);try{Q.hooks&&(J=Q.hooks.preprocess(J));let V=(Q.hooks?Q.hooks.provideLexer():Z?d.lex:d.lexInline)(J,Q);Q.hooks&&(V=Q.hooks.processAllTokens(V)),Q.walkTokens&&this.walkTokens(V,Q.walkTokens);let z=(Q.hooks?Q.hooks.provideParser():Z?E.parse:E.parseInline)(V,Q);return Q.hooks&&(z=Q.hooks.postprocess(z)),z}catch(V){return Y(V)}}}onError(Z,J){return(q)=>{if(q.message+=`
Please report this to https://github.com/markedjs/marked.`,Z){let K="<p>An error occurred:</p><pre>"+o(q.message+"",!0)+"</pre>";return J?Promise.resolve(K):K}if(J)return Promise.reject(q);throw q}}},t=new a7;function k(Z,J){return t.parse(Z,J)}k.options=k.setOptions=function(Z){return t.setOptions(Z),k.defaults=t.defaults,w6(k.defaults),k};k.getDefaults=W1;k.defaults=e;k.use=function(...Z){return t.use(...Z),k.defaults=t.defaults,w6(k.defaults),k};k.walkTokens=function(Z,J){return t.walkTokens(Z,J)};k.parseInline=t.parseInline;k.Parser=E;k.parser=E.parse;k.Renderer=A0;k.TextRenderer=h1;k.Lexer=d;k.lexer=d.lex;k.Tokenizer=m0;k.Hooks=v0;k.parse=k;var{options:e7,setOptions:J8,use:Q8,walkTokens:q8,parseInline:Z8}=k;var K8=E.parse,$8=d.lex;document.addEventListener("DOMContentLoaded",()=>{document.addEventListener("click",(J)=>{let q=J.target;if(q&&q.id==="regenerate_answer"){J.preventDefault();let K=document.querySelectorAll('div[data-role="user"]'),Q=K[K.length-1]?.textContent?.trim()||"";D6(Q),R6(Q)}if(q&&q.id==="prompt__submit"){J.preventDefault();let K=P6(),Q=document.querySelector("textarea");if(Q)N0(Q);F1(K)}if(q&&q.dataset.role==="example"){J.preventDefault();let K=q.textContent?.trim()||"";F1(K)}});let Z=document.querySelector("textarea");if(Z)Z.addEventListener("input",()=>N0(Z)),N0(Z);I6()});var C6=(Z)=>{if(Z.key==="Enter"){Z.preventDefault();let J=P6(),q=document.querySelector("textarea");if(q)N0(q);F1(J)}};function o7(){let Z=document.getElementById("prompt__input");if(Z)Z.removeEventListener("keydown",C6)}function I6(){let Z=document.getElementById("prompt__input");if(Z)Z.addEventListener("keydown",C6)}function F1(Z){if(Z!=="")D6(Z),R6(Z)}function n7(){let Z=document.querySelectorAll("a:not([data-config])");for(let J of Z)J.target="_blank"}function f6(){setTimeout(()=>{window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},5)}function N0(Z){Z.style.height="auto",Z.style.height=`${Math.min(Z.scrollHeight,250)}px`}function P6(){let Z=document.getElementById("prompt__input");if(Z){let{value:J}=Z;return Z.value="",J.trim()}return"Bonjour !"}async function r7(Z){document.querySelector('[data-role="system__loading"]')?.remove();let q=document.querySelector("main > div:last-child");if(!q)return;q.classList.add("prose");let K=Z.replace(/<br\/>/g,`

`).replace(/\n{3,}/g,`

`),Q=$6.sanitize(K);q.innerHTML=await k.parse(Q),n7(),f6()}function D6(Z){let J=document.querySelector("main");if(!J)return;let q=document.createElement("div");q.setAttribute("data-role","user"),q.classList.add("user"),q.textContent=Z;let K=document.createElement("div");K.setAttribute("data-role","system");let Q=document.createElement("div");Q.classList.add("thinking"),K.appendChild(Q);let Y=document.createDocumentFragment();Y.appendChild(q),Y.appendChild(K),J.appendChild(Y),f6()}async function R6(Z){for(let J of document.querySelectorAll("button"))J.disabled=!0;o7();try{let J=document.querySelector('meta[name="conv_id"]').getAttribute("content"),q=new URLSearchParams(window.location.search),K=q.get("config")||"",Q=q.get("data")||"",Y=`/ai?message=${encodeURIComponent(Z)}&config=${encodeURIComponent(K)}&data=${encodeURIComponent(Q)}&conv_id=${encodeURIComponent(J)}`,V=await fetch(Y,{method:"GET"});if(!V.body)throw Error("Response body is null");let z=V.body.getReader(),X=new TextDecoder,W="";while(!0){let{done:B,value:U}=await z.read();if(B){let h=document.getElementById("disclaimer");if(h){let H=document.createElement("div");H.setAttribute("data-role","disclaimer"),H.textContent=h.value;let S=document.querySelector("main");if(S)S.appendChild(H)}break}if(X.decode(U).includes("pierre_error"))W="<p class='pierre_error'>Une erreur s'est produite chez le fournisseur de modèle de langage. <span id='regenerate_answer'>Cliquer pour regénérer une réponse</span>. Si le problème persiste, patienter quelques minutes.</p>";else W+=`${X.decode(U)}`;r7(W)}}catch(J){console.error(J)}finally{for(let J of document.querySelectorAll("button"))J.disabled=!1;I6()}}
