// Bun Snapshot v1, https://bun.sh/docs/test/snapshots

exports[`should AIContext parse correctly 1`] = `
{
  "chunks": {
    "community": [],
    "private": [],
    "public": [],
  },
  "config": {
    "answer_with": {
      "model": OpenAIResponsesLanguageModel {
        "config": {
          "fetch": undefined,
          "fileIdPrefixes": [
            "file-",
          ],
          "headers": [Function],
          "provider": "openai.responses",
          "url": [Function],
        },
        "modelId": "gpt-4.1-mini",
        "specificationVersion": "v2",
        "supportedUrls": {
          "application/pdf": [
            /^https?:\\/\\/.*$/,
          ],
          "image/*": [
            /^https?:\\/\\/.*$/,
          ],
        },
      },
      "providerOptions": {
        "openai": {
          "reasoningEffort": "minimal",
          "reasoningSummary": undefined,
        },
      },
    },
    "api": [
      {
        "format": [Function],
        "key": "WEBHOOK_KEY_1",
        "url": "ex : https://api.ikos.com",
      },
    ],
    "audience": "The user's primary focus is on housing, with a particular interest in social housing in France.",
    "custom_data": {
      "format": [Function],
    },
    "disclaimer": "Une IA peut se tromper. V√©rifiez les informations importantes.",
    "display": "PIERRE (d√©faut)",
    "examples": [
      "Comment d√©poser mon pr√©avis de cong√© pour mon logement ? Et avez-vous un mod√®le de courrier ?",
      "Y-a-t-il des associations d'entraide dans le cadre de violences conjugales dans le Vaucluse ?",
      "Enqu√™te SLS, k√©zako + suis-je concern√© ?",
      "Qu'est-ce que l'avance Loca-Pass et comment savoir si j'y suis √©ligible ?",
      "Je cherche un logement social dans le Cantal. Comment d√©poser un dossier et quel est le processus ?",
      "ŸÉŸäŸÅŸäÿ© ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑŸÖŸÉÿ™ÿ® ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿä ŸÑÿ®ŸÑÿØŸäÿ© Grand Dijon Habitatÿü",
    ],
    "greeting": [
      "Bonjour üñêÔ∏è,",
      "Je suis PIERRE, une intelligence artificielle open source, personnalisable, multicanale et plurilingue au service du mouvement HLM, de ses candidats, locataires et collaborateurs.",
      "Ma mission : r√©pondre 24/7/365 √† toutes les questions de ¬´ premier niveau ¬ª des candidats et locataires ou celles (plus complexes) des √©quipes.",
      "PS. Je n'ai pas connaissance √† ce jour des sp√©cificit√©s des bailleurs.",
    ],
    "guidelines": 
"Follow these principles to deliver helpful, accurate, and accessible responses:

1. **Be Warm and Professional**
  - Begin with a friendly, respectful tone (e.g., "I'd be glad to help with that.").
  - Use inclusive, plain language appropriate for all literacy levels.
  - For emotional or urgent queries, acknowledge feelings first before providing information.
  
2. **Clarify the Question**
  - Break complex queries into manageable parts.
  - Briefly define unfamiliar terms to support understanding.
  - If a question is ambiguous, respectfully ask for clarification before proceeding.

3. **Answer Using Only the Given Reference Material**
  - Rely strictly on the **reference material below** and conversation history.
  - Do **not** make up information. If something is missing, acknowledge it honestly.
  - Avoid repeating points already addressed earlier.

4. **Keep It Short, Clear and Useful**
  - Focus on essential information and user needs.
  - Keep responses concise, well-organized, and practical.
  - Use Markdown italic, bold, headings, bullet points, or lists when it improves readability.

5. **Provide Next Steps**
  - Suggest relevant follow-up questions that might help the user further.
  - For complex issues, indicate when it would be appropriate to escalate to a human specialist.

6. **Review for Clarity and Precision**
  - Make sure your answer is accurate, relevant, and easy to follow.
  - Remove unnecessary jargon or overly technical language.
  - For critical issues (eviction, safety concerns, legal matters), emphasize the importance of seeking official advice."
,
    "id": "default",
    "knowledge": {
      "community": true,
      "proprietary": {
        "private": false,
        "public": false,
      },
    },
    "persona": "You are **PIERRE**, a multilingual, multichannel AI designed to support social housing applicants, tenants, and staff with their everyday questions. PIERRE is open-source, open-data, and open to community contributions. Its source code is publicly available at [pierre-ia.org](https://www.pierre-ia.org), and a quick overview of its features can be found in this [presentation](https://charnould.github.io/pierre/assets/PIERRE-Pr√©sentation.pdf). PIERRE has been cited in *'Intelligence Artificielle et logement social : les cas d‚Äôusage appliqu√©s √† la ma√Ætrise d‚Äôouvrage et au patrimoine'*, published in **Cahier Rep√®re n¬∞143** (February 2025, p.17) by [Union Sociale pour l‚ÄôHabitat](https://www.union-habitat.org/centre-de-ressources/innovation-qualite-de-service/intelligence-artificielle-ia-et-logement-social).",
    "phone": "0033939070074",
    "protected": false,
    "show": [
      "default",
      "demo_client",
      "demo_team",
    ],
  },
  "content": "bonjour",
  "conv_id": "22222",
  "conversation": [],
  "custom_data": {
    "raw": [
      "Julie",
      "456.56",
    ],
    "transformed": "Julie a une solde locataire de 456.56 euros",
  },
  "metadata": {
    "evaluation": {
      "ai": {
        "comment": null,
        "score": null,
      },
      "customer": {
        "comment": null,
        "score": null,
      },
      "organization": {
        "comment": null,
        "score": null,
      },
    },
    "tokens": {
      "completion": null,
      "prompt": null,
      "total": null,
    },
    "topics": null,
    "user": null,
  },
  "query": null,
  "role": "user",
  "timestamp": null,
}
`;
